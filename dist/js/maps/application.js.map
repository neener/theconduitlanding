{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/runner.js","application.js","node_modules/domready/ready.js","node_modules/three/three.js","src/js/App.js","src/js/MirrorLoader.js","src/js/WaterLoader.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","App","domReady","app","window","innerWidth","canvas","document","createElement","WebGLRenderingContext","getContext","./App.js","domready",2,"name","definition","define","amd","this","listener","fns","doc","hack","documentElement","doScroll","domContentLoaded","loaded","test","readyState","addEventListener","removeEventListener","shift","fn","setTimeout","push",3,"self","THREE","REVISION","undefined","Math","sign","x","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoShading","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Projector","console","error","projectVector","vector","camera","warn","project","unprojectVector","unproject","pickingRay","CanvasRenderer","domElement","clear","render","setClearColor","setSize","Color","color","arguments","setRGB","set","prototype","constructor","g","b","value","copy","setHex","setStyle","hex","floor","setHSL","h","hue2rgb","p","q","style","exec","min","parseInt","ColorKeywords","copyGammaToLinear","copyLinearToGamma","sqrt","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","toString","slice","getHSL","optionalTarget","hue","saturation","hsl","max","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","c","fromArray","array","toArray","clone","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Quaternion","y","z","w","_x","_y","_z","_w",{"end":{"file":"?","comments_before":[],"nlb":false,"endpos":17103,"endcol":6,"endline":704,"pos":17102,"col":5,"line":704,"value":"x","type":"name"},"start":{"file":"?","comments_before":[],"nlb":false,"endpos":17103,"endcol":6,"endline":704,"pos":17102,"col":5,"line":704,"value":"x","type":"name"},"name":"x"},"onChangeCallback","quaternion","setFromEuler","euler","update","Euler","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","m","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","v1","EPS","vFrom","vTo","Vector3","dot","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","applyQuaternion","slerp","qb","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","offset","onChange","callback","qa","qm","Vector2","setX","setY","setComponent","index","getComponent","addVectors","sub","subVectors","divide","divideScalar","scalar","invScalar","clamp","clampScalar","minVal","maxVal","ceil","round","roundToZero","negate","distanceTo","distanceToSquared","dx","dy","setLength","oldLength","fromAttribute","attribute","itemSize","setZ","multiplyVectors","applyEuler","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","d","qx","qy","qz","qw","ix","iy","iz","iw","matrix","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","transformDirection","lengthManhattan","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","me","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","PI","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","atan2","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","start","end","line","center","result","distanceSq","distance","at","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","Infinity","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","box","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromObject","object","scope","updateMatrixWorld","traverse","node","geometry","Geometry","vertices","BufferGeometry","attributes","positions","getBoundingSphere","Sphere","radius","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","multiplyVector3Array","applyToVector3Array","j","determinant","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","setRotationFromQuaternion","x2","y2","z2","wx","wy","wz","lookAt","eye","target","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","getPosition","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","isIntersectionSphere","sphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","denominator","distanceToPlane","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","v2","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","chars","split","uuid","Array","rnd","random","join","clampBottom","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","Spline","interpolate","t2","t3","intPoint","weight","w2","w3","pa","pb","pc","pd","v3","initFromArray","getPoint","k","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","Clock","autoStart","startTime","oldTime","elapsedTime","running","performance","now","Date","stop","getElapsedTime","getDelta","newTime","EventDispatcher","apply","hasEventListener","dispatchEvent","type","_listeners","listeners","indexOf","listenerArray","splice","event","Raycaster","params","Sprite","Mesh","PointCloud","threshold","LOD","Line","descSort","intersectObject","raycaster","intersects","recursive","raycast","children","precision","linePrecision","setFromCamera","PerspectiveCamera","OrthographicCamera","sort","intersectObjects","objects","log","Object3D","Object","defineProperty","Object3DIdCount","parent","DefaultUp","rotation","onRotationChange","onQuaternionChange","defineProperties","enumerable","rotationAutoUpdate","matrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","userData","eulerOrder","useQuaternion","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","q1","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getChildByName","getObjectByName","getObjectById","id","getObjectByProperty","child","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","force","toJSON","output","metadata","version","generator","geometries","parseGeometry","json","materials","parseMaterial","material","parseObject","data","JSON","stringify","AmbientLight","DirectionalLight","intensity","PointLight","SpotLight","exponent","HemisphereLight","groundColor","parse","Face3","materialIndex","vertexNormals","vertexColors","vertexTangents","face","Face4","BufferAttribute","needsUpdate","copyAt","index1","index2","setXY","setXYZ","setXYZW","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","GeometryIdCount","attributesKeys","drawcalls","offsets","boundingBox","addAttribute","keys","getAttribute","addDrawCall","count","indexOffset","fromGeometry","settings","faces","faceVertexUvs","hasFaceVertexUv","hasFaceVertexNormals","normals","colors","uvs","i3","na","nb","nc","fc","vca","vcb","vcc","uva","uvb","uvc","computeBoundingBox","bb","isNaN","computeFaceNormals","computeVertexNormals","vA","vB","vC","pA","pB","pC","cb","ab","indices","jl","normalizeNormals","computeTangents","handleTriangle","uvA","uvB","uvC","x1","y1","z1","sdir","tdir","tan1","tan2","handleVertex","n2","tmp2","tangents","uv","nVertices","tangent","iA","iB","iC","computeOffsets","indexBufferSize","facesCount","sortedIndices","Uint16Array","indexPtr","vertexPtr","duplicatedVertices","newVerticeMaps","faceVertices","Int32Array","vertexMap","revVertexMap","findex","vo","vid","faceMax","new_offset","new_vid","reorderBuffers","merge","key","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","indexBuffer","indexMap","vertexCount","sortedAttributes","attr","sourceArray","attrArray","attrSize","sortedAttr","numItems","typeArray","sourceAttr","dispose","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","hasTangents","dynamic","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","tangentsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","fromBufferGeometry","tempNormals","tempUVs","addFace","fl","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","context","ua","ub","uc","vertexIndex","faceIndex","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","uvs2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precisionPoints","pow","faceIndicesToRemove","dupIndex","idx","setBit","enabled","getNormalIndex","hash","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","parameters","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","kl","Camera","matrixWorldInverse","create","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","format","magFilter","minFilter","updateCubeMap","renderer","scene","generateMipmaps","activeCubeFace","zoom","updateProjectionMatrix","cx","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","width","height","Light","light","AreaLight","constantAttenuation","linearAttenuation","quadraticAttenuation","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowCascade","shadowCascadeOffset","shadowCascadeCount","shadowCascadeBias","shadowCascadeWidth","shadowCascadeHeight","shadowCascadeNearZ","shadowCascadeFarZ","shadowCascadeArray","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","skyColor","shadowCameraFov","Cache","files","file","get","Loader","showStatus","statusDomElement","addStatusElement","imageLoader","ImageLoader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","fontSize","textAlign","background","padding","zIndex","innerHTML","updateProgress","progress","message","toFixed","extractUrlBase","url","parts","pop","initMaterials","texturePath","createMaterial","needsTangents","ShaderMaterial","nearest_pow2","LN2","create_texture","where","sourceFile","repeat","wrap","anisotropy","texture","fullPath","loader","Handlers","load","Texture","image","drawImage","wrapS","wrapT","wrapMap","mirror","rgb2hex","rgb","mtype","mpars","opacity","map","lightMap","normalMap","bumpMap","wireframe","shading","toLowerCase","blending","transparent","depthTest","depthWrite","flipSided","side","doubleSided","colorDiffuse","DbgColor","colorSpecular","specular","colorAmbient","ambient","colorEmissive","emissive","transparency","specularCoef","shininess","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","mapNormalFactor","normalScale","DbgName","handlers","regex","XHRLoader","manager","cache","DefaultLoadingManager","onLoad","onProgress","onError","cached","request","XMLHttpRequest","open","response","itemEnd","responseType","send","itemStart","setResponseType","setCrossOrigin","src","JSONLoader","withCredentials","loadAjaxJSON","callbackProgress","xhr","onreadystatechange","DONE","status","responseText","LOADING","getResponseHeader","HEADERS_RECEIVED","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","bones","animation","animations","parseMorphing","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","BufferGeometryLoader","text","typedArray","MaterialLoader","uniforms","vertexShader","fragmentShader","ObjectLoader","parseGeometries","parseMaterials","geometryLoader","bufferGeometryLoader","PlaneGeometry","widthSegments","heightSegments","BoxGeometry","depth","depthSegments","CircleGeometry","segments","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","IcosahedronGeometry","detail","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","Scene","Group","TextureLoader","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","buffer","texData","mipmaps","mipmapCount","CompressedTextureLoader","images","CompressedTexture","loadTexture","texDatas","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","alphaTest","overdraw","setValues","values","newValue","currentValue","Number","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshNormalMaterial","MeshDepthMaterial","SpriteMaterial","LineBasicMaterial","linewidth","linecap","linejoin","fog","LineDashedMaterial","dashSize","gapSize","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","wrapAround","wrapRGB","metal","MeshFaceMaterial","PointCloudMaterial","sizeAttenuation","ParticleBasicMaterial","ParticleSystemMaterial","defines","lights","defaultAttributeValues","uv2","index0AttributeName","UniformsUtils","RawShaderMaterial","mapping","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","_needsUpdate","onUpdate","CubeTexture","VideoTexture","video","requestAnimationFrame","HAVE_ENOUGH_DATA","inverseMatrix","localThreshold","testPoint","rayPointDistance","intersectPoint","distanceToRay","oi","ol","pointCount","ParticleSystem","mode","LineStrip","LinePieces","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","nbVertices","updateMorphTargets","morphTargetBase","morphTargetForcedOrder","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","intersectionPoint","isFaceMaterial","objectMaterials","morphInfluences","tl","influence","targets","Bone","belongsToSkin","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","offsetMatrix","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","bind","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","time","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","morph","match","label","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","mix","interpolateTargets","influences","addLevel","getObjectForDistance","matrixPosition","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","common","diffuse","offsetRepeat","flipEnvMap","bump","normalmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLightDirection","directionalLightColor","hemisphereLightDirection","hemisphereLightSkyColor","hemisphereLightGroundColor","pointLightColor","pointLightPosition","pointLightDistance","spotLightColor","spotLightPosition","spotLightDirection","spotLightDistance","spotLightAngleCos","spotLightExponent","particle","psColor","shadowmap","ShaderLib","basic","lambert","phong","particle_basic","dashed","totalSize","mNear","mFar","cube","tCube","tFlip","equirect","tEquirect","depthRGBA","WebGLRenderer","createParticleBuffers","__webglVertexBuffer","_gl","createBuffer","__webglColorBuffer","_this","info","memory","createLineBuffers","__webglLineDistanceBuffer","createMeshBuffers","geometryGroup","__webglNormalBuffer","__webglTangentBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","numMorphTargets","__webglMorphTargetsBuffers","numMorphNormals","__webglMorphNormalsBuffers","initCustomAttributes","nvertices","__webglCustomAttributesList","__webglInitialized","createUniqueBuffers","belongsToAttribute","initParticleBuffers","__vertexArray","__colorArray","__sortArray","__webglParticleCount","initLineBuffers","__lineDistanceArray","__webglLineCount","initMeshBuffers","faces3","ntris","nlines","getBufferMaterial","__normalArray","__uvArray","__uv2Array","__tangentArray","__skinIndexArray","__skinWeightArray","UintArray","extensions","Uint32Array","__typeArray","__faceArray","__lineArray","__morphTargetsArrays","__morphNormalsArrays","__webglFaceCount","originalAttribute","property","__original","__inittedArrays","materialNeedsSmoothNormals","setParticleBuffers","hint","ca","cal","customAttribute","vertexArray","colorArray","dirtyVertices","dirtyColors","customAttributes","bindBuffer","ARRAY_BUFFER","bufferData","boundTo","setLineBuffers","dl","lineDistanceArray","dirtyLineDistances","setMeshBuffers","faceColor","n1","n3","sw1","sw2","sw3","si1","si2","si3","vn","uvi","uv2i","vk","vkl","vka","nka","chf","needsSmoothNormals","offset_uv","offset_uv2","offset_face","offset_normal","offset_tangent","offset_line","offset_color","offset_skin","offset_morphTarget","offset_custom","offset_customSrc","uvArray","uv2Array","normalArray","tangentArray","skinIndexArray","skinWeightArray","morphTargetsArrays","morphNormalsArrays","faceArray","lineArray","dirtyElements","dirtyUvs","dirtyNormals","dirtyTangents","dirtyMorphTargets","morphTargetsNeedUpdate","chunk_faces3","obj_faces","obj_uvs","obj_uvs2","obj_skinIndices","obj_skinWeights","ELEMENT_ARRAY_BUFFER","pp","setupVertexAttributes","program","startIndex","geometryAttributes","programAttributes","programAttributesKeys","programAttribute","geometryAttribute","enableAttribute","vertexAttribPointer","FLOAT","vertexAttrib2fv","vertexAttrib3fv","disableUnusedAttributes","initAttributes","_newAttributes","_enabledAttributes","enableVertexAttribArray","disableVertexAttribArray","setupMorphTargets","numSupportedMorphTargets","__webglMorphTargetInfluences","activeInfluenceIndices","numericalSort","numSupportedMorphNormals","influenceIndex","uniform1fv","painterSortStable","reversePainterSortStable","projectObject","initObject","sprites","webglObjects","_webglObjects","_frustum","webglObject","unrollBufferMaterial","sortObjects","_vector3","_projScreenMatrix","renderObjects","renderList","useBlending","setupMatrices","setBlending","setDepthTest","setDepthWrite","setPolygonOffset","setMaterialFaces","renderBufferDirect","renderBuffer","renderObjectsImmediate","materialType","renderImmediateObject","unrollImmediateBufferMaterial","globject","opaque","transparentObjects","opaqueObjects","__webglInit","_modelViewMatrix","_normalMatrix","onObjectRemoved","onGeometryDispose","initGeometryGroups","__webglActive","addBuffer","geometryGroupsList","geometryGroups","ImmediateRenderObject","immediateRenderCallback","addBufferImmediate","_webglObjectsImmediate","makeGroups","usesFaceMaterial","groupHash","group","maxVerticesInGroup","hash_map","groups","groupsList","counter","geometryGroupCounter","addBuffers","objlist","updateObject","bufferType","STATIC_DRAW","customAttributesDirty","areCustomAttributesDirty","DYNAMIC_DRAW","clearCustomAttributes","removeObject","removeInstances","initMaterial","onMaterialDispose","shaderID","shaderIDs","shader","__webglShader","maxLightCount","allocateLights","maxShadows","allocateShadows","maxBones","allocateBones","_precision","supportsVertexTextures","_supportsVertexTextures","envMapMode","useFog","fogExp","logarithmicDepthBuffer","_logarithmicDepthBuffer","_supportsBoneTextures","maxMorphTargets","maxMorphNormals","maxDirLights","directional","maxPointLights","maxSpotLights","spot","maxHemiLights","hemi","shadowMapEnabled","shadowMapType","shadowMapDebug","shadowMapCascade","pl","_programs","programInfo","usedTimes","WebGLProgram","programs","base","uniformsList","location","setProgram","_usedTextureUnits","deallocateMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","_currentProgram","useProgram","_currentMaterialId","_currentCamera","uniformMatrix4fv","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","refreshUniformsFog","_lightsNeedUpdate","setupLights","refreshUniformsLights","_lights","markUniformsLightsNeedsUpdate","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsParticle","refreshUniformsPhong","refreshUniformsLambert","_shadowPass","refreshUniformsShadow","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","gammaInput","uvScaleMap","_canvas","distances","directions","anglesCos","exponents","skyColors","groundColors","boolean","modelViewMatrix","uniformMatrix3fv","_maxTextures","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform2fv","uniform3fv","uniform4fv","_array","setCubeTexture","setCubeTextureDynamic","setColorGamma","intensitySq","setColorLinear","ll","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","_direction","setLineWidth","pixelRatio","_oldLineWidth","lineWidth","polygonoffset","factor","units","_oldPolygonOffset","enable","POLYGON_OFFSET_FILL","disable","_oldPolygonOffsetFactor","_oldPolygonOffsetUnits","setTextureParameters","textureType","isImagePowerOfTwo","extension","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__oldAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","clampToMaxSize","maxSize","slot","__webglTextureCube","onTextureDispose","createTexture","textures","activeTexture","TEXTURE0","bindTexture","TEXTURE_CUBE_MAP","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isDataTexture","cubeImage","autoScaleCubemaps","_maxCubemapSize","glFormat","glType","mipmap","getCompressedTextureFormats","compressedTexImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","texImage2D","generateMipmap","__webglTexture","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","updateRenderTargetMipmap","TEXTURE_2D","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","nVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","nVertexMatrices","dirLights","pointLights","spotLights","hemiLights","_context","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_clearColor","_clearAlpha","autoClear","autoClearColor","autoClearDepth","autoClearStencil","gammaOutput","shadowMapCullFace","calls","_currentFramebuffer","_currentGeometryProgram","_oldDoubleSided","_oldFlipSided","_oldBlending","_oldBlendEquation","_oldBlendSrc","_oldBlendDst","_oldDepthTest","_oldDepthWrite","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_currentWidth","_currentHeight","Uint8Array","preventDefault","resetGLState","setDefaultGLState","getShaderPrecisionFormat","rangeMin","rangeMax","WebGLExtensions","clearColor","clearDepth","clearStencil","DEPTH_TEST","depthFunc","LEQUAL","frontFace","CCW","cullFace","BACK","CULL_FACE","BLEND","blendFunc","viewport","MAX_TEXTURE_IMAGE_UNITS","_maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","_maxTextureSize","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","_vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","_vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","_fragmentShaderPrecisionHighpFloat","LOW_FLOAT","FRAGMENT_SHADER","_fragmentShaderPrecisionMediumpFloat","formats","COMPRESSED_TEXTURE_FORMATS","highpAvailable","mediumpAvailable","shadowMapPlugin","ShadowMapPlugin","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","forceContextLoss","loseContext","supportsFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","updateStyle","setViewport","setScissor","scissor","enableScissorTest","SCISSOR_TEST","getClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","setRenderTarget","deallocateGeometry","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","deleteBuffers","buffers","deleteBuffer","deleteTexture","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","deleteProgram","newPrograms","renderBufferImmediate","hasPositions","hasNormals","hasUvs","__webglUvBuffer","hasColors","positionArray","nx","ny","nz","nax","nbx","ncx","nay","nby","ncy","naz","nbz","ncz","drawArrays","TRIANGLES","updateBuffers","wireframeBit","geometryProgram","LINES","drawElements","POINTS","LINE_STRIP","skinIndex","skinWeight","lineDistance","forceClear","setFaceCulling","frontFaceDirection","CW","FRONT","FRONT_AND_BACK","depthMask","blendEquationSeparate","blendFuncSeparate","uploadTexture","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","vx","vy","addPrePlugin","addPostPlugin","updateShadowMap","WebGLRenderTarget","options","gl","getExtension","programIdCount","generateDefines","chunk","cacheUniformLocations","identifiers","getUniformLocation","cacheAttributeLocations","getAttribLocation","shadowMapTypeDefine","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefix_vertex","prefix_fragment","customDefines","createProgram","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getProgramInfoLog","deleteShader","addLineNumbers","string","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","flares","prefix","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","init","renderType","occlusionMap","screenPosition","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","_renderer","_renderList","createVirtualLight","cascade","virtualLight","isVirtual","pointsWorld","pointsFrustum","nearZ","farZ","updateVirtualLight","updateShadowCamera","_min","_max","getObjectMaterial","_depthMaterial","_depthMaterialMorph","_depthMaterialSkin","_depthMaterialMorphSkin","_matrixPosition","depthShader","depthUniforms","originalCamera","gyro","Gyroscope","shadowFilter","pars","cameraHelper","CameraHelper","objectMaterial","useMorphing","useSkinning","customDepthMaterial","clearAlpha","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","ThreeFont","cssFontWeight","cssFontStyle","drawText","resolution","String","fontPaths","path","Path","ret","extractGlyphPoints","paths","outline","action","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","pts","glyph","glyphs","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","ha","generateShapes","curveSegments","font","shapes","toShapes","namespace","EPSILON","process","contour","verts","vertIndices","nv","snip","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cCROSSap","bCROSScp","aCROSSbp","Triangulate","_typeface_js","typeface_js","Audio","source","createBufferSource","gain","createGain","connect","destination","panner","createPanner","onload","decodeAudioData","setLoop","loop","setRefDistance","refDistance","setRolloffFactor","rolloffFactor","AudioListener","AudioContext","webkitAudioContext","orientation","velocity","positionPrev","setOrientation","setVelocity","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","vec","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","oldX","oldY","xNorm","bounds","pathPt","translationObject","quaternionObject","scaleObject","translationWorld","quaternionWorld","scaleWorld","actions","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vectors","vlen","args","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","EllipseCurve","lastPoint","closedPath","useSpacedPoints","item","spts","concat","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","isClockWise","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambigious","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","tmpHoles","holes","extrude","extruded","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","shape","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","intersection","intersectsHoleEdge","ihIdx","chkHole","indepHoles","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","hl","minShapeIndex","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","quat","usedMorphTargets","morphTargetName","morphTargetsInfluences","root","parseRecurseHierarchy","play","deltaTimeMS","resetBlendWeights","Animation","currentTime","timeScale","isPlaying","interpolationType","keyTypes","reset","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","newVector","newQuat","interpolateCatmullRom","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","obj","sid","next","endTime","original","hasTarget","MorphAnimation","frames","lastFrame","currentFrame","pause","interpolation","frame","buildPlane","udir","vdir","gridX","gridY","width_half","height_half","gridX1","gridY1","segment_width","segment_height","uvd","depth_half","centerUV","segment","CubeGeometry","heightHalf","verticesRow","uvsRow","tanTheta","v4","n4","uv1","uv3","uv4","addShapeList","addShape","scalePt2","pt","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","colinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","buildLidFaces","bevelEnabled","layer","flen","f3","steps","bevelSegments","buildSideFaces","layeroffset","sidewalls","ahole","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","extrudeMaterial","generateSideWallUV","extrudePts","splineTube","binormal","position2","amount","bevelThickness","bevelSize","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","TubeGeometry","FrenetFrames","shapePoints","reverse","bs","vert","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","phi","np","u0","u1","PlaneBufferGeometry","offset2","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegment","TextGeometry","textShapes","getPos","in_q","in_p","cu","su","quOverP","cs","tz","grid","tang","bitan","ip","jp","closed","taper","NoTaper","numpoints","pos2","SinusoidalTaper","initialNormal3","smallest","MAX_VALUE","mat","PolyhedronGeometry","prepare","that","azimuth","inclination","make","centroid","azi","correctUV","subdivide","cols","aj","bj","rows","DodecahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","sliceCount","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","dir","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","addLine","addPoint","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","edge","sortFunction","numEdges","vert1","vert2","face1","face2","FaceNormalsHelper","objectVertices","objectFaces","objectWorldMatrix","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","arrowLength","domeSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","worldMatrix","vertexId","VertexTangentsHelper","WireframeHelper","edges","numTris","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","active","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation",4,"container","body","innerHeight","appendChild","pointLight","makeWater","makeEnvironment","waterNormals","water","Water","textureWidth","textureHeight","sunDirection","sunColor","waterColor","distortionScale","waterPlane","mirrorMesh","cubeMap","getSide","cubeShader","skyBoxMaterial","skyBox","noRender","stopRender","./MirrorLoader.js","./WaterLoader.js","three",5,"MirrorLoader","mirrorColor","mirrorSampler","textureMatrix","Mirror","matrixNeedsUpdate","clipBias","mirrorPlane","mirrorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","debugMode","arrow","planeGeometry","mirrorCamera","mirrorShader","mirrorUniforms","updateTextureMatrix","renderWithMirror","otherMirror","tempCamera","renderTemp","view",6,"WaterLoader","normalSampler","optionalParameter","defaultValue","worldCoordinates"],"mappings":"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","file":"application.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var App = require('./App.js');\nvar domReady = require('domready');\n\ndomReady(function(){\n\tvar app;\n\tif (window.innerWidth >= 768 && ( function () { try { var canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) ); } catch ( e ) { return false; } } )()){\n    \tapp = new App();\n\t}\n});",null,"/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  if (typeof module != 'undefined') module.exports = definition()\n  else if (typeof define == 'function' && typeof define.amd == 'object') define(definition)\n  else this[name] = definition()\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState)\n\n\n  if (!loaded)\n  doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener)\n    loaded = 1\n    while (listener = fns.shift()) listener()\n  })\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn)\n  }\n\n});\n","var self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '70' };\r\n\r\n// browserify support\r\n\r\nif ( typeof module === 'object' ) {\r\n\r\n\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n// polyfills\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : 0;\r\n\r\n\t};\r\n\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\r\n// GL STATE CONSTANTS\r\n\r\nTHREE.CullFaceNone = 0;\r\nTHREE.CullFaceBack = 1;\r\nTHREE.CullFaceFront = 2;\r\nTHREE.CullFaceFrontBack = 3;\r\n\r\nTHREE.FrontFaceDirectionCW = 0;\r\nTHREE.FrontFaceDirectionCCW = 1;\r\n\r\n// SHADOWING TYPES\r\n\r\nTHREE.BasicShadowMap = 0;\r\nTHREE.PCFShadowMap = 1;\r\nTHREE.PCFSoftShadowMap = 2;\r\n\r\n// MATERIAL CONSTANTS\r\n\r\n// side\r\n\r\nTHREE.FrontSide = 0;\r\nTHREE.BackSide = 1;\r\nTHREE.DoubleSide = 2;\r\n\r\n// shading\r\n\r\nTHREE.NoShading = 0;\r\nTHREE.FlatShading = 1;\r\nTHREE.SmoothShading = 2;\r\n\r\n// colors\r\n\r\nTHREE.NoColors = 0;\r\nTHREE.FaceColors = 1;\r\nTHREE.VertexColors = 2;\r\n\r\n// blending modes\r\n\r\nTHREE.NoBlending = 0;\r\nTHREE.NormalBlending = 1;\r\nTHREE.AdditiveBlending = 2;\r\nTHREE.SubtractiveBlending = 3;\r\nTHREE.MultiplyBlending = 4;\r\nTHREE.CustomBlending = 5;\r\n\r\n// custom blending equations\r\n// (numbers start from 100 not to clash with other\r\n//  mappings to OpenGL constants defined in Texture.js)\r\n\r\nTHREE.AddEquation = 100;\r\nTHREE.SubtractEquation = 101;\r\nTHREE.ReverseSubtractEquation = 102;\r\nTHREE.MinEquation = 103;\r\nTHREE.MaxEquation = 104;\r\n\r\n// custom blending destination factors\r\n\r\nTHREE.ZeroFactor = 200;\r\nTHREE.OneFactor = 201;\r\nTHREE.SrcColorFactor = 202;\r\nTHREE.OneMinusSrcColorFactor = 203;\r\nTHREE.SrcAlphaFactor = 204;\r\nTHREE.OneMinusSrcAlphaFactor = 205;\r\nTHREE.DstAlphaFactor = 206;\r\nTHREE.OneMinusDstAlphaFactor = 207;\r\n\r\n// custom blending source factors\r\n\r\n//THREE.ZeroFactor = 200;\r\n//THREE.OneFactor = 201;\r\n//THREE.SrcAlphaFactor = 204;\r\n//THREE.OneMinusSrcAlphaFactor = 205;\r\n//THREE.DstAlphaFactor = 206;\r\n//THREE.OneMinusDstAlphaFactor = 207;\r\nTHREE.DstColorFactor = 208;\r\nTHREE.OneMinusDstColorFactor = 209;\r\nTHREE.SrcAlphaSaturateFactor = 210;\r\n\r\n\r\n// TEXTURE CONSTANTS\r\n\r\nTHREE.MultiplyOperation = 0;\r\nTHREE.MixOperation = 1;\r\nTHREE.AddOperation = 2;\r\n\r\n// Mapping modes\r\n\r\nTHREE.UVMapping = 300;\r\n\r\nTHREE.CubeReflectionMapping = 301;\r\nTHREE.CubeRefractionMapping = 302;\r\n\r\nTHREE.EquirectangularReflectionMapping = 303;\r\nTHREE.EquirectangularRefractionMapping = 304;\r\n\r\nTHREE.SphericalReflectionMapping = 305;\r\n\r\n// Wrapping modes\r\n\r\nTHREE.RepeatWrapping = 1000;\r\nTHREE.ClampToEdgeWrapping = 1001;\r\nTHREE.MirroredRepeatWrapping = 1002;\r\n\r\n// Filters\r\n\r\nTHREE.NearestFilter = 1003;\r\nTHREE.NearestMipMapNearestFilter = 1004;\r\nTHREE.NearestMipMapLinearFilter = 1005;\r\nTHREE.LinearFilter = 1006;\r\nTHREE.LinearMipMapNearestFilter = 1007;\r\nTHREE.LinearMipMapLinearFilter = 1008;\r\n\r\n// Data types\r\n\r\nTHREE.UnsignedByteType = 1009;\r\nTHREE.ByteType = 1010;\r\nTHREE.ShortType = 1011;\r\nTHREE.UnsignedShortType = 1012;\r\nTHREE.IntType = 1013;\r\nTHREE.UnsignedIntType = 1014;\r\nTHREE.FloatType = 1015;\r\n\r\n// Pixel types\r\n\r\n//THREE.UnsignedByteType = 1009;\r\nTHREE.UnsignedShort4444Type = 1016;\r\nTHREE.UnsignedShort5551Type = 1017;\r\nTHREE.UnsignedShort565Type = 1018;\r\n\r\n// Pixel formats\r\n\r\nTHREE.AlphaFormat = 1019;\r\nTHREE.RGBFormat = 1020;\r\nTHREE.RGBAFormat = 1021;\r\nTHREE.LuminanceFormat = 1022;\r\nTHREE.LuminanceAlphaFormat = 1023;\r\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\r\n// DDS / ST3C Compressed texture formats\r\n\r\nTHREE.RGB_S3TC_DXT1_Format = 2001;\r\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\r\n\r\n// PVRTC compressed texture formats\r\n\r\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\r\n\r\n// DEPRECATED\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( color ) {\r\n\r\n\tif ( arguments.length === 3 ) {\r\n\r\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\r\n\r\n\t}\r\n\r\n\treturn this.set( color )\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function ( h, s, l ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tif ( s === 0 ) {\r\n\r\n\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar hue2rgb = function ( p, q, t ) {\r\n\r\n\t\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\t// rgb(255,0,0)\r\n\r\n\t\tif ( /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.exec( style );\r\n\r\n\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// rgb(100%,0%,0%)\r\n\r\n\t\tif ( /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.exec( style );\r\n\r\n\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// #ff0000\r\n\r\n\t\tif ( /^\\#([0-9a-f]{6})$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^\\#([0-9a-f]{6})$/i.exec( style );\r\n\r\n\t\t\tthis.setHex( parseInt( color[ 1 ], 16 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// #f00\r\n\r\n\t\tif ( /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test( style ) ) {\r\n\r\n\t\t\tvar color = /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec( style );\r\n\r\n\t\t\tthis.setHex( parseInt( color[ 1 ] + color[ 1 ] + color[ 2 ] + color[ 2 ] + color[ 3 ] + color[ 3 ], 16 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\t// red\r\n\r\n\t\tif ( /^(\\w+)$/i.test( style ) ) {\r\n\r\n\t\t\tthis.setHex( THREE.ColorKeywords[ style ] );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color ) {\r\n\r\n\t\tthis.r = color.r * color.r;\r\n\t\tthis.g = color.g * color.g;\r\n\t\tthis.b = color.b * color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color ) {\r\n\r\n\t\tthis.r = Math.sqrt( color.r );\r\n\t\tthis.g = Math.sqrt( color.g );\r\n\t\tthis.b = Math.sqrt( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.r = array[ 0 ];\r\n\t\tthis.g = array[ 1 ];\r\n\t\tthis.b = array[ 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\treturn [ this.r, this.g, this.b ];\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Color().setRGB( this.r, this.g, this.b );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\t_x: 0,_y: 0, _z: 0, _w: 0,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\tthis.normalize();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\tthis.conjugate().normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\treturn vector.applyQuaternion( this );\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Quaternion( this._x, this._y, this._z, this._w );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\r\n\r\n\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n}\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.x *= s;\r\n\t\tthis.y *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclampScalar: ( function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function ( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t    if ( offset === undefined ) offset = 0;\r\n\r\n\t    index = index * attribute.itemSize + offset;\r\n\r\n\t    this.x = attribute.array[ index ];\r\n\t    this.y = attribute.array[ index + 1 ];\r\n\r\n\t    return this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Vector2( this.x, this.y );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function ( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar qx = q.x;\r\n\t\tvar qy = q.y;\r\n\t\tvar qz = q.z;\r\n\t\tvar qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\tthis.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: ( function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function ( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x;\r\n\t\tvar dy = this.y - v.y;\r\n\t\tvar dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetEulerFromRotationMatrix: function ( m, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\r\n\tsetEulerFromQuaternion: function ( q, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\r\n\t\treturn this.setFromMatrixScale( m );\r\n\t},\r\n\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\r\n\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tthis.x = m.elements[ 12 ];\r\n\t\tthis.y = m.elements[ 13 ];\r\n\t\tthis.z = m.elements[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[  2 ] ).length();\r\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[  6 ] ).length();\r\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\r\n\t\tvar offset = index * 4;\r\n\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tthis.x = me[ offset ];\r\n\t\tthis.y = me[ offset + 1 ];\r\n\t\tthis.z = me[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t    if ( offset === undefined ) offset = 0;\r\n\r\n\t    index = index * attribute.itemSize + offset;\r\n\r\n\t    this.x = attribute.array[ index ];\r\n\t    this.y = attribute.array[ index + 1 ];\r\n\t    this.z = attribute.array[ index + 2 ];\r\n\r\n\t    return this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Vector3( this.x, this.y, this.z );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\t\tvar w = this.w;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\t\t\tthis.w *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 1;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) { // m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) { // m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else { // m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w > v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < min.w ) {\r\n\r\n\t\t\tthis.w = min.w;\r\n\r\n\t\t} else if ( this.w > max.w ) {\r\n\r\n\t\t\tthis.w = max.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: ( function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function ( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n    floor: function () {\r\n\r\n        this.x = Math.floor( this.x );\r\n        this.y = Math.floor( this.y );\r\n        this.z = Math.floor( this.z );\r\n        this.w = Math.floor( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    ceil: function () {\r\n\r\n        this.x = Math.ceil( this.x );\r\n        this.y = Math.ceil( this.y );\r\n        this.z = Math.ceil( this.z );\r\n        this.w = Math.ceil( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    round: function () {\r\n\r\n        this.x = Math.round( this.x );\r\n        this.y = Math.round( this.y );\r\n        this.z = Math.round( this.z );\r\n        this.w = Math.round( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    roundToZero: function () {\r\n\r\n        this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n        this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n        this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n        this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t    if ( offset === undefined ) offset = 0;\r\n\r\n\t    index = index * attribute.itemSize + offset;\r\n\r\n\t    this.x = attribute.array[ index ];\r\n\t    this.y = attribute.array[ index + 1 ];\r\n\t    this.z = attribute.array[ index + 2 ];\r\n\t    this.w = attribute.array[ index + 3 ];\r\n\r\n\t    return this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Vector4( this.x, this.y, this.z, this.w );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\t_x: 0, _y: 0, _z: 0, _order: THREE.Euler.DefaultOrder,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\treturn [ this._x, this._y, this._z, this._order ];\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Euler( this._x, this._y, this._z, this._order );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Line3().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] )\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Box2().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] )\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and childrens', world transforms\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ||\r\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\r\n\r\n\t\t\tthis.makeEmpty();\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Box3().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.x = array[ j ];\r\n\t\t\t\tv1.y = array[ j + 1 ];\r\n\t\t\t\tv1.z = array[ j + 2 ];\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tarray[ j ]     = v1.x;\r\n\t\t\t\tarray[ j + 1 ] = v1.y;\r\n\t\t\t\tarray[ j + 2 ] = v1.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnInvertible ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\r\n\t\tvar me = matrix.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\r\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\r\n\t\t// no inverse\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1.0 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset     ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\r\n\t\tthis.getInverse( m ).transpose();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix3().fromArray( this.elements );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n \r\n \t\tvar te = this.elements;\r\n \r\n\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\r\n \r\n \t\treturn this;\r\n \t\t\r\n \t},\r\n \r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t    return this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x = new THREE.Vector3();\r\n\t\tvar y = new THREE.Vector3();\r\n\t\tvar z = new THREE.Vector3();\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.length() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.length() === 0 ) {\r\n\r\n\t\t\t\tz.x += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\treturn vector.applyProjection( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.x = array[ j ];\r\n\t\t\t\tv1.y = array[ j + 1 ];\r\n\t\t\t\tv1.z = array[ j + 2 ];\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tarray[ j ]     = v1.x;\r\n\t\t\t\tarray[ j + 1 ] = v1.y;\r\n\t\t\t\tarray[ j + 2 ] = v1.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset     ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnInvertible ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\r\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\r\n\t\tif ( det == 0 ) {\r\n\r\n\t\t\tvar msg = \"Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateByAxis: function ( axis, angle ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\t\t\t\tsx = - sx;\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = right - left;\r\n\t\tvar h = top - bottom;\r\n\t\tvar p = far - near;\r\n\r\n\t\tvar x = ( right + left ) / w;\r\n\t\tvar y = ( top + bottom ) / h;\r\n\t\tvar z = ( far + near ) / p;\r\n\r\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceTo( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceTo( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0 \r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\tif ( denominator == 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) == 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectBox: function ( box , optionalTarget ) {\r\n\r\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\r\n\r\n\t\tvar tmin,tmax,tymin,tymax,tzmin,tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Ray().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter )  {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n \t\t};\r\n\r\n\t}(),\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Sphere().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Frustum().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tisIntersectionLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator == 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) == 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\t// compute new normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\r\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant == this.constant );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Plane().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i == 8 || i == 13 || i == 18 || i == 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i == 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i == 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\t// Clamp value to range <a, b>\r\n\r\n\tclamp: function ( x, a, b ) {\r\n\r\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\r\n\r\n\t},\r\n\r\n\t// Clamp value to range <a, inf)\r\n\r\n\tclampBottom: function ( x, a ) {\r\n\r\n\t\treturn x < a ? a : x;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random float from <0, 1> with 16 bits of randomness\r\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\r\n\r\n\trandom16: function () {\r\n\r\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn Math.floor( this.randFloat( low, high ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function () {\r\n\r\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\t\treturn function ( degrees ) {\r\n\r\n\t\t\treturn degrees * degreeToRadiansFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tradToDeg: function () {\r\n\r\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\t\treturn function ( radians ) {\r\n\r\n\t\t\treturn radians * radianToDegreesFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint != oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\tlinearDistance, realDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycoordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// colinear or singular triangle\r\n\t\tif ( denom == 0 ) {\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycoordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Triangle().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {}\r\n\r\nTHREE.EventDispatcher.prototype = {\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( object ) {\r\n\r\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\r\n\t},\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://exocortex.com/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tSprite: {},\r\n\t\t\tMesh: {},\r\n\t\t\tPointCloud: { threshold: 1 },\r\n\t\t\tLOD: {},\r\n\t\t\tLine: {}\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tvar descSort = function ( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t};\r\n\r\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tprecision: 0.0001,\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\t// camera is assumed _not_ to be a child of a transformed object\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.copy( camera.position );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( camera.position ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( objects instanceof Array === false ) {\r\n\r\n\t\t\t\tconsole.log( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = undefined;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar scope = this;\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tvar onRotationChange = function () {\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\t};\r\n\r\n\tvar onQuaternionChange = function () {\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\t};\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t} );\r\n\r\n\tthis.rotationAutoUpdate = true;\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = true;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\n\r\nTHREE.Object3D.prototype = {\r\n\r\n\tconstructor: THREE.Object3D,\r\n\r\n\tget eulerOrder () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\treturn this.rotation.order;\r\n\r\n\t},\r\n\r\n\tset eulerOrder ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\tthis.rotation.order = value;\r\n\r\n\t},\r\n\r\n\tget useQuaternion () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tset useQuaternion ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"can't be added as a child of itself.\" );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== undefined ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"is not an instance of THREE.Object3D.\" );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = undefined;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetChildByName: function ( name, recursive ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name, recursive );\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id, recursive ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id, recursive );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name, recursive ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name, recursive );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value, recursive ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value, recursive );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tif ( this.parent ) {\r\n\r\n\t\t\tcallback( this.parent );\r\n\r\n\t\t\tthis.parent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === undefined ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.3,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'ObjectExporter'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tvar parseGeometry = function ( geometry ) {\r\n\r\n\t\t\tif ( output.geometries === undefined ) {\r\n\r\n\t\t\t\toutput.geometries = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometries[ geometry.uuid ] === undefined ) {\r\n\r\n\t\t\t\tvar json = geometry.toJSON();\r\n\r\n\t\t\t\tdelete json.metadata;\r\n\r\n\t\t\t\tgeometries[ geometry.uuid ] = json;\r\n\r\n\t\t\t\toutput.geometries.push( json );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn geometry.uuid;\r\n\r\n\t\t};\r\n\r\n\t\t//\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tvar parseMaterial = function ( material ) {\r\n\r\n\t\t\tif ( output.materials === undefined ) {\r\n\r\n\t\t\t\toutput.materials = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materials[ material.uuid ] === undefined ) {\r\n\r\n\t\t\t\tvar json = material.toJSON();\r\n\r\n\t\t\t\tdelete json.metadata;\r\n\r\n\t\t\t\tmaterials[ material.uuid ] = json;\r\n\r\n\t\t\t\toutput.materials.push( json );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn material.uuid;\r\n\r\n\t\t};\r\n\r\n\t\t//\r\n\r\n\t\tvar parseObject = function ( object ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tdata.uuid = object.uuid;\r\n\t\t\tdata.type = object.type;\r\n\r\n\t\t\tif ( object.name !== '' ) data.name = object.name;\r\n\t\t\tif ( JSON.stringify( object.userData ) !== '{}' ) data.userData = object.userData;\r\n\t\t\tif ( object.visible !== true ) data.visible = object.visible;\r\n\r\n\t\t\tif ( object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tdata.fov = object.fov;\r\n\t\t\t\tdata.aspect = object.aspect;\r\n\t\t\t\tdata.near = object.near;\r\n\t\t\t\tdata.far = object.far;\r\n\r\n\t\t\t} else if ( object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tdata.left = object.left;\r\n\t\t\t\tdata.right = object.right;\r\n\t\t\t\tdata.top = object.top;\r\n\t\t\t\tdata.bottom = object.bottom;\r\n\t\t\t\tdata.near = object.near;\r\n\t\t\t\tdata.far = object.far;\r\n\r\n\t\t\t} else if ( object instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\r\n\t\t\t} else if ( object instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.intensity = object.intensity;\r\n\r\n\t\t\t} else if ( object instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.intensity = object.intensity;\r\n\t\t\t\tdata.distance = object.distance;\r\n\r\n\t\t\t} else if ( object instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.intensity = object.intensity;\r\n\t\t\t\tdata.distance = object.distance;\r\n\t\t\t\tdata.angle = object.angle;\r\n\t\t\t\tdata.exponent = object.exponent;\r\n\r\n\t\t\t} else if ( object instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\tdata.color = object.color.getHex();\r\n\t\t\t\tdata.groundColor = object.groundColor.getHex();\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\r\n\t\t\t\tdata.material = parseMaterial( object.material );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\r\n\t\t\t\tdata.material = parseMaterial( object.material );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tdata.material = parseMaterial( object.material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.matrix = object.matrix.toArray();\r\n\r\n\t\t\tif ( object.children.length > 0 ) {\r\n\r\n\t\t\t\tdata.children = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\t\t\t\tdata.children.push( parseObject( object.children[ i ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = parseObject( this );\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function ( object, recursive ) {\r\n\r\n\t\tif ( object === undefined ) object = new THREE.Object3D();\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tobject.name = this.name;\r\n\r\n\t\tobject.up.copy( this.up );\r\n\r\n\t\tobject.position.copy( this.position );\r\n\t\tobject.quaternion.copy( this.quaternion );\r\n\t\tobject.scale.copy( this.scale );\r\n\r\n\t\tobject.rotationAutoUpdate = this.rotationAutoUpdate;\r\n\r\n\t\tobject.matrix.copy( this.matrix );\r\n\t\tobject.matrixWorld.copy( this.matrixWorld );\r\n\r\n\t\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\r\n\t\tobject.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate;\r\n\r\n\t\tobject.visible = this.visible;\r\n\r\n\t\tobject.castShadow = this.castShadow;\r\n\t\tobject.receiveShadow = this.receiveShadow;\r\n\r\n\t\tobject.frustumCulled = this.frustumCulled;\r\n\r\n\t\tobject.userData = JSON.parse( JSON.stringify( this.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = this.children[ i ];\r\n\t\t\t\tobject.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = normal instanceof Array ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = color instanceof Array ? color : [];\r\n\r\n\tthis.vertexTangents = [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar face = new THREE.Face3( this.a, this.b, this.c );\r\n\r\n\t\tface.normal.copy( this.normal );\r\n\t\tface.color.copy( this.color );\r\n\r\n\t\tface.materialIndex = this.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = this.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tface.vertexNormals[ i ] = this.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tface.vertexColors[ i ] = this.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.vertexTangents.length; i < il; i ++ ) {\r\n\r\n\t\t\tface.vertexTangents[ i ] = this.vertexTangents[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn face;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Face4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' )\r\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.needsUpdate = false;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.array.set( value );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index     ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index     ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index     ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.BufferAttribute( new this.array.constructor( this.array ), this.itemSize );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( data, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\r\n\treturn new THREE.BufferAttribute( data, itemSize );\r\n\r\n};\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.attributes = {};\r\n\tthis.attributesKeys = [];\r\n\r\n\tthis.drawcalls = [];\r\n\tthis.offsets = this.drawcalls; // backwards compatibility\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n};\r\n\r\nTHREE.BufferGeometry.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometry,\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.attributes[ name ] = { array: arguments[ 1 ], itemSize: arguments[ 2 ] };\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\t\tthis.attributesKeys = Object.keys( this.attributes );\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tthis.drawcalls.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tindex: indexOffset !== undefined ? indexOffset : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\t// TODO\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry, settings ) {\r\n\r\n\t\tsettings = settings || { 'vertexColors': THREE.NoColors };\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\t\tvar vertexColors = settings.vertexColors;\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexNormals = faces[ 0 ].vertexNormals.length == 3;\r\n\r\n\t\tvar positions = new Float32Array( faces.length * 3 * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\t\tvar normals = new Float32Array( faces.length * 3 * 3 );\r\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\r\n\t\tif ( vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\tvar colors = new Float32Array( faces.length * 3 * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( faces.length * 3 * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, i2 = 0, i3 = 0; i < faces.length; i ++, i2 += 6, i3 += 9 ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar a = vertices[ face.a ];\r\n\t\t\tvar b = vertices[ face.b ];\r\n\t\t\tvar c = vertices[ face.c ];\r\n\r\n\t\t\tpositions[ i3     ] = a.x;\r\n\t\t\tpositions[ i3 + 1 ] = a.y;\r\n\t\t\tpositions[ i3 + 2 ] = a.z;\r\n\r\n\t\t\tpositions[ i3 + 3 ] = b.x;\r\n\t\t\tpositions[ i3 + 4 ] = b.y;\r\n\t\t\tpositions[ i3 + 5 ] = b.z;\r\n\r\n\t\t\tpositions[ i3 + 6 ] = c.x;\r\n\t\t\tpositions[ i3 + 7 ] = c.y;\r\n\t\t\tpositions[ i3 + 8 ] = c.z;\r\n\r\n\t\t\tif ( hasFaceVertexNormals === true ) {\r\n\r\n\t\t\t\tvar na = face.vertexNormals[ 0 ];\r\n\t\t\t\tvar nb = face.vertexNormals[ 1 ];\r\n\t\t\t\tvar nc = face.vertexNormals[ 2 ];\r\n\r\n\t\t\t\tnormals[ i3     ] = na.x;\r\n\t\t\t\tnormals[ i3 + 1 ] = na.y;\r\n\t\t\t\tnormals[ i3 + 2 ] = na.z;\r\n\r\n\t\t\t\tnormals[ i3 + 3 ] = nb.x;\r\n\t\t\t\tnormals[ i3 + 4 ] = nb.y;\r\n\t\t\t\tnormals[ i3 + 5 ] = nb.z;\r\n\r\n\t\t\t\tnormals[ i3 + 6 ] = nc.x;\r\n\t\t\t\tnormals[ i3 + 7 ] = nc.y;\r\n\t\t\t\tnormals[ i3 + 8 ] = nc.z;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar n = face.normal;\r\n\r\n\t\t\t\tnormals[ i3     ] = n.x;\r\n\t\t\t\tnormals[ i3 + 1 ] = n.y;\r\n\t\t\t\tnormals[ i3 + 2 ] = n.z;\r\n\r\n\t\t\t\tnormals[ i3 + 3 ] = n.x;\r\n\t\t\t\tnormals[ i3 + 4 ] = n.y;\r\n\t\t\t\tnormals[ i3 + 5 ] = n.z;\r\n\r\n\t\t\t\tnormals[ i3 + 6 ] = n.x;\r\n\t\t\t\tnormals[ i3 + 7 ] = n.y;\r\n\t\t\t\tnormals[ i3 + 8 ] = n.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( vertexColors === THREE.FaceColors ) {\r\n\r\n\t\t\t\tvar fc = face.color;\r\n\r\n\t\t\t\tcolors[ i3     ] = fc.r;\r\n\t\t\t\tcolors[ i3 + 1 ] = fc.g;\r\n\t\t\t\tcolors[ i3 + 2 ] = fc.b;\r\n\r\n\t\t\t\tcolors[ i3 + 3 ] = fc.r;\r\n\t\t\t\tcolors[ i3 + 4 ] = fc.g;\r\n\t\t\t\tcolors[ i3 + 5 ] = fc.b;\r\n\r\n\t\t\t\tcolors[ i3 + 6 ] = fc.r;\r\n\t\t\t\tcolors[ i3 + 7 ] = fc.g;\r\n\t\t\t\tcolors[ i3 + 8 ] = fc.b;\r\n\r\n\t\t\t} else if ( vertexColors === THREE.VertexColors ) {\r\n\r\n\t\t\t\tvar vca = face.vertexColors[ 0 ];\r\n\t\t\t\tvar vcb = face.vertexColors[ 1 ];\r\n\t\t\t\tvar vcc = face.vertexColors[ 2 ];\r\n\r\n\t\t\t\tcolors[ i3     ] = vca.r;\r\n\t\t\t\tcolors[ i3 + 1 ] = vca.g;\r\n\t\t\t\tcolors[ i3 + 2 ] = vca.b;\r\n\r\n\t\t\t\tcolors[ i3 + 3 ] = vcb.r;\r\n\t\t\t\tcolors[ i3 + 4 ] = vcb.g;\r\n\t\t\t\tcolors[ i3 + 5 ] = vcb.b;\r\n\r\n\t\t\t\tcolors[ i3 + 6 ] = vcc.r;\r\n\t\t\t\tcolors[ i3 + 7 ] = vcc.g;\r\n\t\t\t\tcolors[ i3 + 8 ] = vcc.b;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar uva = faceVertexUvs[ 0 ][ i ][ 0 ];\r\n\t\t\t\tvar uvb = faceVertexUvs[ 0 ][ i ][ 1 ];\r\n\t\t\t\tvar uvc = faceVertexUvs[ 0 ][ i ][ 2 ];\r\n\r\n\t\t\t\tuvs[ i2     ] = uva.x;\r\n\t\t\t\tuvs[ i2 + 1 ] = uva.y;\r\n\r\n\t\t\t\tuvs[ i2 + 2 ] = uvb.x;\r\n\t\t\t\tuvs[ i2 + 3 ] = uvb.y;\r\n\r\n\t\t\t\tuvs[ i2 + 4 ] = uvc.x;\r\n\t\t\t\tuvs[ i2 + 5 ] = uvc.y;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeBoundingSphere()\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar bb = this.boundingBox;\r\n\t\t\t\tbb.makeEmpty();\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\t\t\t\tbb.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\r\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tbox.makeEmpty();\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\t\t\t\tbox.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox:  sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormals[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( attributes.index ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\r\n\t\t\t\tvar offsets = ( this.offsets.length > 0 ? this.offsets : [ { start: 0, count: indices.length, index: 0 } ] );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = offsets.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar start = offsets[ j ].start;\r\n\t\t\t\t\tvar count = offsets[ j ].count;\r\n\t\t\t\t\tvar index = offsets[ j ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = ( index + indices[ i     ] ) * 3;\r\n\t\t\t\t\t\tvB = ( index + indices[ i + 1 ] ) * 3;\r\n\t\t\t\t\t\tvC = ( index + indices[ i + 2 ] ) * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA     ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB     ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC     ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i     ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t// (per vertex tangents)\r\n\r\n\t\tif ( this.attributes.index === undefined ||\r\n\t\t\t this.attributes.position === undefined ||\r\n\t\t\t this.attributes.normal === undefined ||\r\n\t\t\t this.attributes.uv === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = this.attributes.index.array;\r\n\t\tvar positions = this.attributes.position.array;\r\n\t\tvar normals = this.attributes.normal.array;\r\n\t\tvar uvs = this.attributes.uv.array;\r\n\r\n\t\tvar nVertices = positions.length / 3;\r\n\r\n\t\tif ( this.attributes.tangent === undefined ) {\r\n\r\n\t\t\tthis.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar tangents = this.attributes.tangent.array;\r\n\r\n\t\tvar tan1 = [], tan2 = [];\r\n\r\n\t\tfor ( var k = 0; k < nVertices; k ++ ) {\r\n\r\n\t\t\ttan1[ k ] = new THREE.Vector3();\r\n\t\t\ttan2[ k ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tvar vA = new THREE.Vector3(),\r\n\t\t\tvB = new THREE.Vector3(),\r\n\t\t\tvC = new THREE.Vector3(),\r\n\r\n\t\t\tuvA = new THREE.Vector2(),\r\n\t\t\tuvB = new THREE.Vector2(),\r\n\t\t\tuvC = new THREE.Vector2(),\r\n\r\n\t\t\tx1, x2, y1, y2, z1, z2,\r\n\t\t\ts1, s2, t1, t2, r;\r\n\r\n\t\tvar sdir = new THREE.Vector3(), tdir = new THREE.Vector3();\r\n\r\n\t\tfunction handleTriangle( a, b, c ) {\r\n\r\n\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\tx1 = vB.x - vA.x;\r\n\t\t\tx2 = vC.x - vA.x;\r\n\r\n\t\t\ty1 = vB.y - vA.y;\r\n\t\t\ty2 = vC.y - vA.y;\r\n\r\n\t\t\tz1 = vB.z - vA.z;\r\n\t\t\tz2 = vC.z - vA.z;\r\n\r\n\t\t\ts1 = uvB.x - uvA.x;\r\n\t\t\ts2 = uvC.x - uvA.x;\r\n\r\n\t\t\tt1 = uvB.y - uvA.y;\r\n\t\t\tt2 = uvC.y - uvA.y;\r\n\r\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\r\n\t\t\tsdir.set(\r\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\r\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\r\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttdir.set(\r\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\r\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\r\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttan1[ a ].add( sdir );\r\n\t\t\ttan1[ b ].add( sdir );\r\n\t\t\ttan1[ c ].add( sdir );\r\n\r\n\t\t\ttan2[ a ].add( tdir );\r\n\t\t\ttan2[ b ].add( tdir );\r\n\t\t\ttan2[ c ].add( tdir );\r\n\r\n\t\t}\r\n\r\n\t\tvar i, il;\r\n\t\tvar j, jl;\r\n\t\tvar iA, iB, iC;\r\n\r\n\t\tif ( this.drawcalls.length === 0 ) {\r\n\r\n\t\t\tthis.addDrawCall( 0, indices.length, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tvar drawcalls = this.drawcalls;\r\n\r\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\r\n\r\n\t\t\tvar start = drawcalls[ j ].start;\r\n\t\t\tvar count = drawcalls[ j ].count;\r\n\t\t\tvar index = drawcalls[ j ].index;\r\n\r\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\tiA = index + indices[ i ];\r\n\t\t\t\tiB = index + indices[ i + 1 ];\r\n\t\t\t\tiC = index + indices[ i + 2 ];\r\n\r\n\t\t\t\thandleTriangle( iA, iB, iC );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\r\n\t\tvar w, t, test;\r\n\r\n\t\tfunction handleVertex( v ) {\r\n\r\n\t\t\tn.fromArray( normals, v * 3 );\r\n\t\t\tn2.copy( n );\r\n\r\n\t\t\tt = tan1[ v ];\r\n\r\n\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\ttmp.copy( t );\r\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t// Calculate handedness\r\n\r\n\t\t\ttmp2.crossVectors( n2, t );\r\n\t\t\ttest = tmp2.dot( tan2[ v ] );\r\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\ttangents[ v * 4     ] = tmp.x;\r\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\r\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\r\n\t\t\ttangents[ v * 4 + 3 ] = w;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\r\n\r\n\t\t\tvar start = drawcalls[ j ].start;\r\n\t\t\tvar count = drawcalls[ j ].count;\r\n\t\t\tvar index = drawcalls[ j ].index;\r\n\r\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\tiA = index + indices[ i ];\r\n\t\t\t\tiB = index + indices[ i + 1 ];\r\n\t\t\t\tiC = index + indices[ i + 2 ];\r\n\r\n\t\t\t\thandleVertex( iA );\r\n\t\t\t\thandleVertex( iB );\r\n\t\t\t\thandleVertex( iC );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/*\r\n\t\tcomputeOffsets\r\n\t\tCompute the draw offset for large models by chunking the index buffer into chunks of 65k addressable vertices.\r\n\t\tThis method will effectively rewrite the index buffer and remap all attributes to match the new indices.\r\n\t\tWARNING: This method will also expand the vertex count to prevent sprawled triangles across draw offsets.\r\n\t\tindexBufferSize - Defaults to 65535, but allows for larger or smaller chunks.\r\n\t*/\r\n\tcomputeOffsets: function ( indexBufferSize ) {\r\n\r\n\t\tvar size = indexBufferSize;\r\n\t\tif ( indexBufferSize === undefined )\r\n\t\t\tsize = 65535; //WebGL limits type of index buffer values to 16-bit.\r\n\r\n\t\tvar s = Date.now();\r\n\r\n\t\tvar indices = this.attributes.index.array;\r\n\t\tvar vertices = this.attributes.position.array;\r\n\r\n\t\tvar verticesCount = ( vertices.length / 3 );\r\n\t\tvar facesCount = ( indices.length / 3 );\r\n\r\n\t\t/*\r\n\t\tconsole.log(\"Computing buffers in offsets of \"+size+\" -> indices:\"+indices.length+\" vertices:\"+vertices.length);\r\n\t\tconsole.log(\"Faces to process: \"+(indices.length/3));\r\n\t\tconsole.log(\"Reordering \"+verticesCount+\" vertices.\");\r\n\t\t*/\r\n\r\n\t\tvar sortedIndices = new Uint16Array( indices.length ); //16-bit buffers\r\n\t\tvar indexPtr = 0;\r\n\t\tvar vertexPtr = 0;\r\n\r\n\t\tvar offsets = [ { start:0, count:0, index:0 } ];\r\n\t\tvar offset = offsets[ 0 ];\r\n\r\n\t\tvar duplicatedVertices = 0;\r\n\t\tvar newVerticeMaps = 0;\r\n\t\tvar faceVertices = new Int32Array( 6 );\r\n\t\tvar vertexMap = new Int32Array( vertices.length );\r\n\t\tvar revVertexMap = new Int32Array( vertices.length );\r\n\t\tfor ( var j = 0; j < vertices.length; j ++ ) { vertexMap[ j ] = - 1; revVertexMap[ j ] = - 1; }\r\n\r\n\t\t/*\r\n\t\t\tTraverse every face and reorder vertices in the proper offsets of 65k.\r\n\t\t\tWe can have more than 65k entries in the index buffer per offset, but only reference 65k values.\r\n\t\t*/\r\n\t\tfor ( var findex = 0; findex < facesCount; findex ++ ) {\r\n\t\t\tnewVerticeMaps = 0;\r\n\r\n\t\t\tfor ( var vo = 0; vo < 3; vo ++ ) {\r\n\t\t\t\tvar vid = indices[ findex * 3 + vo ];\r\n\t\t\t\tif ( vertexMap[ vid ] == - 1 ) {\r\n\t\t\t\t\t//Unmapped vertice\r\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\r\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\r\n\t\t\t\t\tnewVerticeMaps ++;\r\n\t\t\t\t} else if ( vertexMap[ vid ] < offset.index ) {\r\n\t\t\t\t\t//Reused vertices from previous block (duplicate)\r\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\r\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\r\n\t\t\t\t\tduplicatedVertices ++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//Reused vertice in the current block\r\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\r\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = vertexMap[ vid ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar faceMax = vertexPtr + newVerticeMaps;\r\n\t\t\tif ( faceMax > ( offset.index + size ) ) {\r\n\t\t\t\tvar new_offset = { start:indexPtr, count:0, index:vertexPtr };\r\n\t\t\t\toffsets.push( new_offset );\r\n\t\t\t\toffset = new_offset;\r\n\r\n\t\t\t\t//Re-evaluate reused vertices in light of new offset.\r\n\t\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\r\n\t\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\r\n\t\t\t\t\tif ( new_vid > - 1 && new_vid < offset.index )\r\n\t\t\t\t\t\tfaceVertices[ v + 1 ] = - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Reindex the face.\r\n\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\r\n\t\t\t\tvar vid = faceVertices[ v ];\r\n\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\r\n\r\n\t\t\t\tif ( new_vid === - 1 )\r\n\t\t\t\t\tnew_vid = vertexPtr ++;\r\n\r\n\t\t\t\tvertexMap[ vid ] = new_vid;\r\n\t\t\t\trevVertexMap[ new_vid ] = vid;\r\n\t\t\t\tsortedIndices[ indexPtr ++ ] = new_vid - offset.index; //XXX overflows at 16bit\r\n\t\t\t\toffset.count ++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Move all attribute values to map to the new computed indices , also expand the vertice stack to match our new vertexPtr. */\r\n\t\tthis.reorderBuffers( sortedIndices, revVertexMap, vertexPtr );\r\n\t\tthis.offsets = offsets;\r\n\r\n\t\t/*\r\n\t\tvar orderTime = Date.now();\r\n\t\tconsole.log(\"Reorder time: \"+(orderTime-s)+\"ms\");\r\n\t\tconsole.log(\"Duplicated \"+duplicatedVertices+\" vertices.\");\r\n\t\tconsole.log(\"Compute Buffers time: \"+(Date.now()-s)+\"ms\");\r\n\t\tconsole.log(\"Draw offsets: \"+offsets.length);\r\n\t\t*/\r\n\r\n\t\treturn offsets;\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i     ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/*\r\n\t\treoderBuffers:\r\n\t\tReorder attributes based on a new indexBuffer and indexMap.\r\n\t\tindexBuffer - Uint16Array of the new ordered indices.\r\n\t\tindexMap - Int32Array where the position is the new vertex ID and the value the old vertex ID for each vertex.\r\n\t\tvertexCount - Amount of total vertices considered in this reordering (in case you want to grow the vertice stack).\r\n\t*/\r\n\treorderBuffers: function ( indexBuffer, indexMap, vertexCount ) {\r\n\r\n\t\t/* Create a copy of all attributes for reordering. */\r\n\t\tvar sortedAttributes = {};\r\n\t\tfor ( var attr in this.attributes ) {\r\n\t\t\tif ( attr == 'index' )\r\n\t\t\t\tcontinue;\r\n\t\t\tvar sourceArray = this.attributes[ attr ].array;\r\n\t\t\tsortedAttributes[ attr ] = new sourceArray.constructor( this.attributes[ attr ].itemSize * vertexCount );\r\n\t\t}\r\n\r\n\t\t/* Move attribute positions based on the new index map */\r\n\t\tfor ( var new_vid = 0; new_vid < vertexCount; new_vid ++ ) {\r\n\t\t\tvar vid = indexMap[ new_vid ];\r\n\t\t\tfor ( var attr in this.attributes ) {\r\n\t\t\t\tif ( attr == 'index' )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar attrArray = this.attributes[ attr ].array;\r\n\t\t\t\tvar attrSize = this.attributes[ attr ].itemSize;\r\n\t\t\t\tvar sortedAttr = sortedAttributes[ attr ];\r\n\t\t\t\tfor ( var k = 0; k < attrSize; k ++ )\r\n\t\t\t\t\tsortedAttr[ new_vid * attrSize + k ] = attrArray[ vid * attrSize + k ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Carry the new sorted buffers locally */\r\n\t\tthis.attributes[ 'index' ].array = indexBuffer;\r\n\t\tfor ( var attr in this.attributes ) {\r\n\t\t\tif ( attr == 'index' )\r\n\t\t\t\tcontinue;\r\n\t\t\tthis.attributes[ attr ].array = sortedAttributes[ attr ];\r\n\t\t\tthis.attributes[ attr ].numItems = this.attributes[ attr ].itemSize * vertexCount;\r\n\t\t}\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.0,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometryExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tdata: {\r\n\t\t\t\tattributes: {}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar offsets = this.offsets;\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = [], typeArray = attribute.array;\r\n\r\n\t\t\tfor ( var i = 0, l = typeArray.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = typeArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( offsets.length > 0 ) {\r\n\r\n\t\t\toutput.data.offsets = JSON.parse( JSON.stringify( offsets ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\toutput.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tfor ( var attr in this.attributes ) {\r\n\r\n\t\t\tvar sourceAttr = this.attributes[ attr ];\r\n\t\t\tgeometry.addAttribute( attr, sourceAttr.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar offset = this.offsets[ i ];\r\n\r\n\t\t\tgeometry.offsets.push( {\r\n\r\n\t\t\t\tstart: offset.start,\r\n\t\t\t\tindex: offset.index,\r\n\t\t\t\tcount: offset.count\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];  // one-to-one vertex colors, used in Points and Line\r\n\r\n\tthis.faces = [];\r\n\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphColors = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.hasTangents = false;\r\n\r\n\tthis.dynamic = true; // the intermediate typed arrays will be deleted when set to false\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.tangentsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.Geometry.prototype = {\r\n\r\n\tconstructor: THREE.Geometry,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox instanceof THREE.Box3 ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere instanceof THREE.Sphere ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar vertices = attributes.position.array;\r\n\t\tvar indices = attributes.index !== undefined ? attributes.index.array : undefined;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\r\n\t\tfor ( var i = 0, j = 0; i < vertices.length; i += 3, j += 2 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar addFace = function ( a, b, c ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c, vertexNormals, vertexColors ) );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\toffset.addVectors( this.boundingBox.min, this.boundingBox.max );\r\n\t\toffset.multiplyScalar( - 0.5 );\r\n\r\n\t\tthis.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC, vD;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3(),\r\n\t\t\t\tdb = new THREE.Vector3(), dc = new THREE.Vector3(), bc = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.vertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\tface.vertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\tface.vertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t// tangents go to vertices\r\n\r\n\t\tvar f, fl, v, vl, i, il, vertexIndex,\r\n\t\t\tface, uv, vA, vB, vC, uvA, uvB, uvC,\r\n\t\t\tx1, x2, y1, y2, z1, z2,\r\n\t\t\ts1, s2, t1, t2, r, t, test,\r\n\t\t\ttan1 = [], tan2 = [],\r\n\t\t\tsdir = new THREE.Vector3(), tdir = new THREE.Vector3(),\r\n\t\t\ttmp = new THREE.Vector3(), tmp2 = new THREE.Vector3(),\r\n\t\t\tn = new THREE.Vector3(), w;\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\ttan1[ v ] = new THREE.Vector3();\r\n\t\t\ttan2[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTriangle( context, a, b, c, ua, ub, uc ) {\r\n\r\n\t\t\tvA = context.vertices[ a ];\r\n\t\t\tvB = context.vertices[ b ];\r\n\t\t\tvC = context.vertices[ c ];\r\n\r\n\t\t\tuvA = uv[ ua ];\r\n\t\t\tuvB = uv[ ub ];\r\n\t\t\tuvC = uv[ uc ];\r\n\r\n\t\t\tx1 = vB.x - vA.x;\r\n\t\t\tx2 = vC.x - vA.x;\r\n\t\t\ty1 = vB.y - vA.y;\r\n\t\t\ty2 = vC.y - vA.y;\r\n\t\t\tz1 = vB.z - vA.z;\r\n\t\t\tz2 = vC.z - vA.z;\r\n\r\n\t\t\ts1 = uvB.x - uvA.x;\r\n\t\t\ts2 = uvC.x - uvA.x;\r\n\t\t\tt1 = uvB.y - uvA.y;\r\n\t\t\tt2 = uvC.y - uvA.y;\r\n\r\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\t\t\tsdir.set( ( t2 * x1 - t1 * x2 ) * r,\r\n\t\t\t\t\t  ( t2 * y1 - t1 * y2 ) * r,\r\n\t\t\t\t\t  ( t2 * z1 - t1 * z2 ) * r );\r\n\t\t\ttdir.set( ( s1 * x2 - s2 * x1 ) * r,\r\n\t\t\t\t\t  ( s1 * y2 - s2 * y1 ) * r,\r\n\t\t\t\t\t  ( s1 * z2 - s2 * z1 ) * r );\r\n\r\n\t\t\ttan1[ a ].add( sdir );\r\n\t\t\ttan1[ b ].add( sdir );\r\n\t\t\ttan1[ c ].add( sdir );\r\n\r\n\t\t\ttan2[ a ].add( tdir );\r\n\t\t\ttan2[ b ].add( tdir );\r\n\t\t\ttan2[ c ].add( tdir );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\t\t\tuv = this.faceVertexUvs[ 0 ][ f ]; // use UV layer 0 for tangents\r\n\r\n\t\t\thandleTriangle( this, face.a, face.b, face.c, 0, 1, 2 );\r\n\r\n\t\t}\r\n\r\n\t\tvar faceIndex = [ 'a', 'b', 'c', 'd' ];\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tfor ( i = 0; i < Math.min( face.vertexNormals.length, 3 ); i ++ ) {\r\n\r\n\t\t\t\tn.copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\tvertexIndex = face[ faceIndex[ i ] ];\r\n\r\n\t\t\t\tt = tan1[ vertexIndex ];\r\n\r\n\t\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\t\ttmp.copy( t );\r\n\t\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t\t// Calculate handedness\r\n\r\n\t\t\t\ttmp2.crossVectors( face.vertexNormals[ i ], t );\r\n\t\t\t\ttest = tmp2.dot( tan2[ vertexIndex ] );\r\n\t\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\t\tface.vertexTangents[ i ] = new THREE.Vector4( tmp.x, tmp.y, tmp.z, w );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.hasTangents = true;\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertice by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, eg. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i,il, face;\r\n\t\tvar indices, k, j, jl, u;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\t\t\t\tif ( indices[ n ] == indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.0,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometryExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type\r\n\t\t};\r\n\r\n\t\tif ( this.name !== \"\" ) output.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) output[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 );\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\r\n\r\n\t\t\t/*\r\n\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\toutput.data = {};\r\n\r\n\t\toutput.data.vertices = vertices;\r\n\t\toutput.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) output.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) output.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\toutput.data.faces = faces;\r\n\r\n\t\t//\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar geometry = new THREE.Geometry();\r\n\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tgeometry.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = this.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tgeometry.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = this.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( geometry.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t}\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function ( camera ) {\r\n\r\n\tif ( camera === undefined ) camera = new THREE.Camera();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, camera );\r\n\r\n\tcamera.matrixWorldInverse.copy( this.matrixWorldInverse );\r\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\r\n\r\n\treturn camera;\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\r\n\r\n\t\trenderTarget.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\r\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\tvar cx = ( this.right + this.left ) / 2;\r\n\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.clone = function () {\r\n\r\n\tvar camera = new THREE.OrthographicCamera();\r\n\r\n\tTHREE.Camera.prototype.clone.call( this, camera );\r\n\r\n\tcamera.zoom = this.zoom;\r\n\r\n\tcamera.left = this.left;\r\n\tcamera.right = this.right;\r\n\tcamera.top = this.top;\r\n\tcamera.bottom = this.bottom;\r\n\r\n\tcamera.near = this.near;\r\n\tcamera.far = this.far;\r\n\r\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\r\n\r\n\treturn camera;\r\n};\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\r\n\r\n/**\r\n * Uses Focal Length (in mm) to estimate and set FOV\r\n * 35mm (fullframe) camera is used if frame size is not specified;\r\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\r\n\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\r\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\n\r\n/**\r\n * Sets an offset in a larger frustum. This is useful for multi-window or\r\n * multi-monitor/multi-machine setups.\r\n *\r\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n * the monitors are in grid like this\r\n *\r\n *   +---+---+---+\r\n *   | A | B | C |\r\n *   +---+---+---+\r\n *   | D | E | F |\r\n *   +---+---+---+\r\n *\r\n * then for each monitor you would call it like this\r\n *\r\n *   var w = 1920;\r\n *   var h = 1080;\r\n *   var fullWidth = w * 3;\r\n *   var fullHeight = h * 2;\r\n *\r\n *   --A--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n *   --B--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n *   --C--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n *   --D--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n *   --E--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n *   --F--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n *\r\n *   Note there is no reason monitors have to be the same size or in a grid.\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\tthis.fullWidth = fullWidth;\r\n\tthis.fullHeight = fullHeight;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\r\n\tif ( this.fullWidth ) {\r\n\r\n\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\tvar bottom = - top;\r\n\t\tvar left = aspect * bottom;\r\n\t\tvar right = aspect * top;\r\n\t\tvar width = Math.abs( right - left );\r\n\t\tvar height = Math.abs( top - bottom );\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\tthis.near,\r\n\t\t\tthis.far\r\n\t\t);\r\n\r\n\t} else {\r\n\r\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.clone = function () {\r\n\r\n\tvar camera = new THREE.PerspectiveCamera();\r\n\r\n\tTHREE.Camera.prototype.clone.call( this, camera );\r\n\r\n\tcamera.zoom = this.zoom;\r\n\r\n\tcamera.fov = this.fov;\r\n\tcamera.aspect = this.aspect;\r\n\tcamera.near = this.near;\r\n\tcamera.far = this.far;\r\n\r\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\r\n\r\n\treturn camera;\r\n\r\n};\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\t\r\n\tthis.color = new THREE.Color( color );\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Light.prototype.constructor = THREE.Light;\r\n\r\nTHREE.Light.prototype.clone = function ( light ) {\r\n\r\n\tif ( light === undefined ) light = new THREE.Light();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, light );\r\n\r\n\tlight.color.copy( this.color );\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\r\nTHREE.AmbientLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.AmbientLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/AreaLight.js\r\n\r\n/**\r\n * @author MPanknin / http://www.redplant.de/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.AreaLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'AreaLight';\r\n\r\n\tthis.normal = new THREE.Vector3( 0, - 1, 0 );\r\n\tthis.right = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n\tthis.width = 1.0;\r\n\tthis.height = 1.0;\r\n\r\n\tthis.constantAttenuation = 1.5;\r\n\tthis.linearAttenuation = 0.5;\r\n\tthis.quadraticAttenuation = 0.1;\r\n\r\n};\r\n\r\nTHREE.AreaLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.AreaLight.prototype.constructor = THREE.AreaLight;\r\n\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\t//\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\r\n\tthis.shadowCameraLeft = - 500;\r\n\tthis.shadowCameraRight = 500;\r\n\tthis.shadowCameraTop = 500;\r\n\tthis.shadowCameraBottom = - 500;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\t//\r\n\r\n\tthis.shadowCascade = false;\r\n\r\n\tthis.shadowCascadeOffset = new THREE.Vector3( 0, 0, - 1000 );\r\n\tthis.shadowCascadeCount = 2;\r\n\r\n\tthis.shadowCascadeBias = [ 0, 0, 0 ];\r\n\tthis.shadowCascadeWidth = [ 512, 512, 512 ];\r\n\tthis.shadowCascadeHeight = [ 512, 512, 512 ];\r\n\r\n\tthis.shadowCascadeNearZ = [ - 1.000, 0.990, 0.998 ];\r\n\tthis.shadowCascadeFarZ  = [  0.990, 0.998, 1.000 ];\r\n\r\n\tthis.shadowCascadeArray = [];\r\n\r\n\t//\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\r\nTHREE.DirectionalLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.DirectionalLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.target = this.target.clone();\r\n\r\n\tlight.intensity = this.intensity;\r\n\r\n\tlight.castShadow = this.castShadow;\r\n\tlight.onlyShadow = this.onlyShadow;\r\n\r\n\t//\r\n\r\n\tlight.shadowCameraNear = this.shadowCameraNear;\r\n\tlight.shadowCameraFar = this.shadowCameraFar;\r\n\r\n\tlight.shadowCameraLeft = this.shadowCameraLeft;\r\n\tlight.shadowCameraRight = this.shadowCameraRight;\r\n\tlight.shadowCameraTop = this.shadowCameraTop;\r\n\tlight.shadowCameraBottom = this.shadowCameraBottom;\r\n\r\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\r\n\r\n\tlight.shadowBias = this.shadowBias;\r\n\tlight.shadowDarkness = this.shadowDarkness;\r\n\r\n\tlight.shadowMapWidth = this.shadowMapWidth;\r\n\tlight.shadowMapHeight = this.shadowMapHeight;\r\n\r\n\t//\r\n\r\n\tlight.shadowCascade = this.shadowCascade;\r\n\r\n\tlight.shadowCascadeOffset.copy( this.shadowCascadeOffset );\r\n\tlight.shadowCascadeCount = this.shadowCascadeCount;\r\n\r\n\tlight.shadowCascadeBias = this.shadowCascadeBias.slice( 0 );\r\n\tlight.shadowCascadeWidth = this.shadowCascadeWidth.slice( 0 );\r\n\tlight.shadowCascadeHeight = this.shadowCascadeHeight.slice( 0 );\r\n\r\n\tlight.shadowCascadeNearZ = this.shadowCascadeNearZ.slice( 0 );\r\n\tlight.shadowCascadeFarZ  = this.shadowCascadeFarZ.slice( 0 );\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.position.set( 0, 100, 0 );\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\r\nTHREE.HemisphereLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.HemisphereLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.groundColor.copy( this.groundColor );\r\n\tlight.intensity = this.intensity;\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLight = function ( color, intensity, distance ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\r\nTHREE.PointLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.PointLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.intensity = this.intensity;\r\n\tlight.distance = this.distance;\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\t//\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\tthis.shadowCameraFov = 50;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\t//\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\r\nTHREE.SpotLight.prototype.clone = function () {\r\n\r\n\tvar light = new THREE.SpotLight();\r\n\r\n\tTHREE.Light.prototype.clone.call( this, light );\r\n\r\n\tlight.target = this.target.clone();\r\n\r\n\tlight.intensity = this.intensity;\r\n\tlight.distance = this.distance;\r\n\tlight.angle = this.angle;\r\n\tlight.exponent = this.exponent;\r\n\r\n\tlight.castShadow = this.castShadow;\r\n\tlight.onlyShadow = this.onlyShadow;\r\n\r\n\t//\r\n\r\n\tlight.shadowCameraNear = this.shadowCameraNear;\r\n\tlight.shadowCameraFar = this.shadowCameraFar;\r\n\tlight.shadowCameraFov = this.shadowCameraFov;\r\n\r\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\r\n\r\n\tlight.shadowBias = this.shadowBias;\r\n\tlight.shadowDarkness = this.shadowDarkness;\r\n\r\n\tlight.shadowMapWidth = this.shadowMapWidth;\r\n\tlight.shadowMapHeight = this.shadowMapHeight;\r\n\r\n\treturn light;\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = function () {\r\n\r\n\tthis.files = {};\r\n\r\n};\r\n\r\nTHREE.Cache.prototype = {\r\n\r\n\tconstructor: THREE.Cache,\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function ( showStatus ) {\r\n\r\n\tthis.showStatus = showStatus;\r\n\tthis.statusDomElement = showStatus ? THREE.Loader.prototype.addStatusElement() : null;\r\n\r\n\tthis.imageLoader = new THREE.ImageLoader();\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\taddStatusElement: function () {\r\n\r\n\t\tvar e = document.createElement( 'div' );\r\n\r\n\t\te.style.position = 'absolute';\r\n\t\te.style.right = '0px';\r\n\t\te.style.top = '0px';\r\n\t\te.style.fontSize = '0.8em';\r\n\t\te.style.textAlign = 'left';\r\n\t\te.style.background = 'rgba(0,0,0,0.25)';\r\n\t\te.style.color = '#fff';\r\n\t\te.style.width = '120px';\r\n\t\te.style.padding = '0.5em 0.5em 0.5em 0.5em';\r\n\t\te.style.zIndex = 1000;\r\n\r\n\t\te.innerHTML = 'Loading ...';\r\n\r\n\t\treturn e;\r\n\r\n\t},\r\n\r\n\tupdateProgress: function ( progress ) {\r\n\r\n\t\tvar message = 'Loaded ';\r\n\r\n\t\tif ( progress.total ) {\r\n\r\n\t\t\tmessage += ( 100 * progress.loaded / progress.total ).toFixed( 0 ) + '%';\r\n\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmessage += ( progress.loaded / 1024 ).toFixed( 2 ) + ' KB';\r\n\r\n\t\t}\r\n\r\n\t\tthis.statusDomElement.innerHTML = message;\r\n\r\n\t},\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tneedsTangents: function ( materials ) {\r\n\r\n\t\tfor ( var i = 0, il = materials.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar m = materials[ i ];\r\n\r\n\t\t\tif ( m instanceof THREE.ShaderMaterial ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: function ( m, texturePath ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tfunction nearest_pow2( n ) {\r\n\r\n\t\t\tvar l = Math.log( n ) / Math.LN2;\r\n\t\t\treturn Math.pow( 2, Math.round(  l ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\tvar fullPath = texturePath + sourceFile;\r\n\r\n\t\t\tvar texture;\r\n\r\n\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\t\tloader = scope.imageLoader;\r\n\t\t\t\tloader.crossOrigin = scope.crossOrigin;\r\n\t\t\t\tloader.load( fullPath, function ( image ) {\r\n\r\n\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\r\n\t\t\t\t\t\t THREE.Math.isPowerOfTwo( image.height ) === false ) {\r\n\r\n\t\t\t\t\t\tvar width = nearest_pow2( image.width );\r\n\t\t\t\t\t\tvar height = nearest_pow2( image.height );\r\n\r\n\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\t\t\ttexture.image = canvas;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ttexture.image = image;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.sourceFile = sourceFile;\r\n\r\n\t\t\tif ( repeat ) {\r\n\r\n\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\r\n\r\n\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset ) {\r\n\r\n\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( wrap ) {\r\n\r\n\t\t\t\tvar wrapMap = {\r\n\t\t\t\t\t'repeat': THREE.RepeatWrapping,\r\n\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\r\n\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( anisotropy ) {\r\n\r\n\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhere[ name ] = texture;\r\n\r\n\t\t}\r\n\r\n\t\tfunction rgb2hex( rgb ) {\r\n\r\n\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\r\n\r\n\t\t}\r\n\r\n\t\t// defaults\r\n\r\n\t\tvar mtype = 'MeshLambertMaterial';\r\n\t\tvar mpars = { color: 0xeeeeee, opacity: 1.0, map: null, lightMap: null, normalMap: null, bumpMap: null, wireframe: false };\r\n\r\n\t\t// parameters from model file\r\n\r\n\t\tif ( m.shading ) {\r\n\r\n\t\t\tvar shading = m.shading.toLowerCase();\r\n\r\n\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\r\n\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\r\n\r\n\t\t\tmpars.blending = THREE[ m.blending ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.transparent !== undefined || m.opacity < 1.0 ) {\r\n\r\n\t\t\tmpars.transparent = m.transparent;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.depthTest !== undefined ) {\r\n\r\n\t\t\tmpars.depthTest = m.depthTest;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.depthWrite !== undefined ) {\r\n\r\n\t\t\tmpars.depthWrite = m.depthWrite;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.visible !== undefined ) {\r\n\r\n\t\t\tmpars.visible = m.visible;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.flipSided !== undefined ) {\r\n\r\n\t\t\tmpars.side = THREE.BackSide;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.doubleSided !== undefined ) {\r\n\r\n\t\t\tmpars.side = THREE.DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.wireframe !== undefined ) {\r\n\r\n\t\t\tmpars.wireframe = m.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.vertexColors !== undefined ) {\r\n\r\n\t\t\tif ( m.vertexColors === 'face' ) {\r\n\r\n\t\t\t\tmpars.vertexColors = THREE.FaceColors;\r\n\r\n\t\t\t} else if ( m.vertexColors ) {\r\n\r\n\t\t\t\tmpars.vertexColors = THREE.VertexColors;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tif ( m.colorDiffuse ) {\r\n\r\n\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\r\n\r\n\t\t} else if ( m.DbgColor ) {\r\n\r\n\t\t\tmpars.color = m.DbgColor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.colorSpecular ) {\r\n\r\n\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.colorAmbient ) {\r\n\r\n\t\t\tmpars.ambient = rgb2hex( m.colorAmbient );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.colorEmissive ) {\r\n\r\n\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\r\n\r\n\t\t}\r\n\r\n\t\t// modifiers\r\n\r\n\t\tif ( m.transparency ) {\r\n\r\n\t\t\tmpars.opacity = m.transparency;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.specularCoef ) {\r\n\r\n\t\t\tmpars.shininess = m.specularCoef;\r\n\r\n\t\t}\r\n\r\n\t\t// textures\r\n\r\n\t\tif ( m.mapDiffuse && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapLight && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapBump && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapNormal && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapSpecular && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapAlpha && texturePath ) {\r\n\r\n\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( m.mapBumpScale ) {\r\n\r\n\t\t\tmpars.bumpScale = m.mapBumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( m.mapNormalFactor ) {\r\n\r\n\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\r\n\r\n\t\t}\r\n\r\n\t\tvar material = new THREE[ mtype ]( mpars );\r\n\r\n\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = this.handlers[ i ];\r\n\t\t\tvar loader  = this.handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.cache = new THREE.Cache();\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = scope.cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) onLoad( cached );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tscope.cache.add( url, this.response );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this.response );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onError !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tonError( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.cache = new THREE.Cache();\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = scope.cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tonLoad( cached );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\t\tscope.cache.add( url, this );\r\n\r\n\t\t\t\tonLoad( this );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onError !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tonError( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\timage.src = url;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( showStatus ) {\r\n\r\n\tTHREE.Loader.call( this, showStatus );\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = Object.create( THREE.Loader.prototype );\r\nTHREE.JSONLoader.prototype.constructor = THREE.JSONLoader;\r\n\r\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath ) {\r\n\r\n\tvar scope = this;\r\n\r\n\t// todo: unify load API to for easier SceneLoader use\r\n\r\n\ttexturePath = texturePath && ( typeof texturePath === 'string' ) ? texturePath : this.extractUrlBase( url );\r\n\r\n\tthis.onLoadStart();\r\n\tthis.loadAjaxJSON( this, url, callback, texturePath );\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype.loadAjaxJSON = function ( context, url, callback, texturePath, callbackProgress ) {\r\n\r\n\tvar xhr = new XMLHttpRequest();\r\n\r\n\tvar length = 0;\r\n\r\n\txhr.onreadystatechange = function () {\r\n\r\n\t\tif ( xhr.readyState === xhr.DONE ) {\r\n\r\n\t\t\tif ( xhr.status === 200 || xhr.status === 0 ) {\r\n\r\n\t\t\t\tif ( xhr.responseText ) {\r\n\r\n\t\t\t\t\tvar json = JSON.parse( xhr.responseText );\r\n\r\n\t\t\t\t\tif ( json.metadata !== undefined && json.metadata.type === 'scene' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be a Scene. Use THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar result = context.parse( json, texturePath );\r\n\t\t\t\t\tcallback( result.geometry, result.materials );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be unreachable or the file is empty.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// in context of more complex asset initialization\r\n\t\t\t\t// do not block on single failed file\r\n\t\t\t\t// maybe should go even one more level up\r\n\r\n\t\t\t\tcontext.onLoadComplete();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.JSONLoader: Couldn\\'t load \"' + url + '\" (' + xhr.status + ')' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( xhr.readyState === xhr.LOADING ) {\r\n\r\n\t\t\tif ( callbackProgress ) {\r\n\r\n\t\t\t\tif ( length === 0 ) {\r\n\r\n\t\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallbackProgress( { total: length, loaded: xhr.responseText.length } );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( xhr.readyState === xhr.HEADERS_RECEIVED ) {\r\n\r\n\t\t\tif ( callbackProgress !== undefined ) {\r\n\r\n\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\txhr.open( 'GET', url, true );\r\n\txhr.withCredentials = this.withCredentials;\r\n\txhr.send( null );\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype.parse = function ( json, texturePath ) {\r\n\r\n\tvar scope = this,\r\n\tgeometry = new THREE.Geometry(),\r\n\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\tparseModel( scale );\r\n\r\n\tparseSkin();\r\n\tparseMorphing( scale );\r\n\r\n\tgeometry.computeFaceNormals();\r\n\tgeometry.computeBoundingSphere();\r\n\r\n\tfunction parseModel( scale ) {\r\n\r\n\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t}\r\n\r\n\t\tvar i, j, fi,\r\n\r\n\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\ttype,\r\n\t\tisQuad,\r\n\t\thasMaterial,\r\n\t\thasFaceVertexUv,\r\n\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, color, hex, normal,\r\n\r\n\t\tuvLayer, uv, u, v,\r\n\r\n\t\tfaces = json.faces,\r\n\t\tvertices = json.vertices,\r\n\t\tnormals = json.normals,\r\n\t\tcolors = json.colors,\r\n\r\n\t\tnUvLayers = 0;\r\n\r\n\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t// disregard empty arrays\r\n\r\n\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\toffset = 0;\r\n\t\tzLength = vertices.length;\r\n\r\n\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t\toffset = 0;\r\n\t\tzLength = faces.length;\r\n\r\n\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\toffset += 4;\r\n\r\n\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = []\r\n\r\n\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction parseSkin() {\r\n\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\tvar x =                               json.skinWeights[ i     ];\r\n\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\tvar a =                               json.skinIndices[ i     ];\r\n\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.bones = json.bones;\r\n\r\n\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// could change this to json.animations[0] or remove completely\r\n\r\n\t\tgeometry.animation = json.animation;\r\n\t\tgeometry.animations = json.animations;\r\n\r\n\t};\r\n\r\n\tfunction parseMorphing( scale ) {\r\n\r\n\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\r\n\r\n\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\tsrcVertices = json.morphTargets [ i ].vertices;\r\n\r\n\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.morphColors !== undefined ) {\r\n\r\n\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\r\n\r\n\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tgeometry.morphColors[ i ] = {};\r\n\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\r\n\t\t\t\tgeometry.morphColors[ i ].colors = [];\r\n\r\n\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\r\n\t\t\t\tsrcColors = json.morphColors [ i ].colors;\r\n\r\n\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\r\n\r\n\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\r\n\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\r\n\t\t\t\t\tdstColors.push( color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\treturn { geometry: geometry };\r\n\r\n\t} else {\r\n\r\n\t\tvar materials = this.initMaterials( json.materials, texturePath );\r\n\r\n\t\tif ( this.needsTangents( materials ) ) {\r\n\r\n\t\t\tgeometry.computeTangents();\r\n\r\n\t\t}\r\n\r\n\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar loaded = 0, total = 0;\r\n\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\ttotal ++;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\tloaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, loaded, total );\r\n\r\n\t\t}\r\n\r\n\t\tif ( loaded === total && scope.onLoad !== undefined ) {\r\n\r\n\t\t\tscope.onLoad();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar attributes = json.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar offsets = json.offsets;\r\n\r\n\t\tif ( offsets !== undefined ) {\r\n\r\n\t\t\tgeometry.offsets = JSON.parse( JSON.stringify( offsets ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.ambient !== undefined ) material.ambient.setHex( json.ambient );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\t\tvar materials = this.parseMaterials( json.materials );\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.PlaneGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data.data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\t\t\t\tvar material = loader.parse( data );\r\n\r\n\t\t\t\tmaterial.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) material.name = data.name;\r\n\r\n\t\t\t\tmaterials[ data.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\r\n\t\t\t\t\tvar material = materials[ data.material ];\r\n\r\n\t\t\t\t\tif ( geometry === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( material === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\r\n\t\t\t\t\tvar material = materials[ data.material ];\r\n\r\n\t\t\t\t\tif ( geometry === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( material === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject = new THREE.Line( geometry, material );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tvar material = materials[ data.material ];\r\n\r\n\t\t\t\t\tif ( material === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( material );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\tvar texture = new THREE.Texture( image );\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function () {\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture( );\r\n\r\n\t\tvar loader = new THREE.XHRLoader();\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( !texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ){\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function () {\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader();\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tif ( url instanceof Array ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\t\timages[ i ] = {\r\n\t\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\t\tif ( loaded === 6 ) {\r\n\r\n \t\t\t\t\t\tif (texDatas.mipmapCount == 1)\r\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.side = THREE.FrontSide;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( key in this ) {\r\n\r\n\t\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t\t} else if ( key == 'overdraw' ) {\r\n\r\n\t\t\t\t\t// ensure overdraw is backwards-compatable with legacy boolean type\r\n\t\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type\r\n\t\t};\r\n\r\n\t\tif ( this.name !== \"\" ) output.name = this.name;\r\n\r\n\t\tif ( this instanceof THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\t\t\toutput.ambient = this.ambient.getHex();\r\n\t\t\toutput.emissive = this.emissive.getHex();\r\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\t\t\toutput.ambient = this.ambient.getHex();\r\n\t\t\toutput.emissive = this.emissive.getHex();\r\n\t\t\toutput.specular = this.specular.getHex();\r\n\t\t\toutput.shininess = this.shininess;\r\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\tif ( this.shading !== THREE.FlatShading ) output.shading = this.shading;\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\r\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\r\n\r\n\t\t} else if ( this instanceof THREE.ShaderMaterial ) {\r\n\r\n\t\t\toutput.uniforms = this.uniforms;\r\n\t\t\toutput.vertexShader = this.vertexShader;\r\n\t\t\toutput.fragmentShader = this.fragmentShader;\r\n\r\n\t\t} else if ( this instanceof THREE.SpriteMaterial ) {\r\n\r\n\t\t\toutput.color = this.color.getHex();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.opacity < 1 ) output.opacity = this.opacity;\r\n\t\tif ( this.transparent !== false ) output.transparent = this.transparent;\r\n\t\tif ( this.wireframe !== false ) output.wireframe = this.wireframe;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function ( material ) {\r\n\r\n\t\tif ( material === undefined ) material = new THREE.Material();\r\n\r\n\t\tmaterial.name = this.name;\r\n\r\n\t\tmaterial.side = this.side;\r\n\r\n\t\tmaterial.opacity = this.opacity;\r\n\t\tmaterial.transparent = this.transparent;\r\n\r\n\t\tmaterial.blending = this.blending;\r\n\r\n\t\tmaterial.blendSrc = this.blendSrc;\r\n\t\tmaterial.blendDst = this.blendDst;\r\n\t\tmaterial.blendEquation = this.blendEquation;\r\n\r\n\t\tmaterial.depthTest = this.depthTest;\r\n\t\tmaterial.depthWrite = this.depthWrite;\r\n\r\n\t\tmaterial.polygonOffset = this.polygonOffset;\r\n\t\tmaterial.polygonOffsetFactor = this.polygonOffsetFactor;\r\n\t\tmaterial.polygonOffsetUnits = this.polygonOffsetUnits;\r\n\r\n\t\tmaterial.alphaTest = this.alphaTest;\r\n\r\n\t\tmaterial.overdraw = this.overdraw;\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\",\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.LineBasicMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.linewidth = this.linewidth;\r\n\tmaterial.linecap = this.linecap;\r\n\tmaterial.linejoin = this.linejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.LineDashedMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.linewidth = this.linewidth;\r\n\r\n\tmaterial.scale = this.scale;\r\n\tmaterial.dashSize = this.dashSize;\r\n\tmaterial.gapSize = this.gapSize;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshBasicMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.lightMap = this.lightMap;\r\n\r\n\tmaterial.specularMap = this.specularMap;\r\n\r\n\tmaterial.alphaMap = this.alphaMap;\r\n\r\n\tmaterial.envMap = this.envMap;\r\n\tmaterial.combine = this.combine;\r\n\tmaterial.reflectivity = this.reflectivity;\r\n\tmaterial.refractionRatio = this.refractionRatio;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\r\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  ambient: <hex>,\r\n *  emissive: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.ambient = new THREE.Color( 0xffffff );\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\r\n\tthis.wrapAround = false;\r\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshLambertMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\tmaterial.ambient.copy( this.ambient );\r\n\tmaterial.emissive.copy( this.emissive );\r\n\r\n\tmaterial.wrapAround = this.wrapAround;\r\n\tmaterial.wrapRGB.copy( this.wrapRGB );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.lightMap = this.lightMap;\r\n\r\n\tmaterial.specularMap = this.specularMap;\r\n\r\n\tmaterial.alphaMap = this.alphaMap;\r\n\r\n\tmaterial.envMap = this.envMap;\r\n\tmaterial.combine = this.combine;\r\n\tmaterial.reflectivity = this.reflectivity;\r\n\tmaterial.refractionRatio = this.refractionRatio;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\r\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\tmaterial.morphNormals = this.morphNormals;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  ambient: <hex>,\r\n *  emissive: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.ambient = new THREE.Color( 0xffffff );\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.metal = false;\r\n\r\n\tthis.wrapAround = false;\r\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshPhongMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\tmaterial.ambient.copy( this.ambient );\r\n\tmaterial.emissive.copy( this.emissive );\r\n\tmaterial.specular.copy( this.specular );\r\n\tmaterial.shininess = this.shininess;\r\n\r\n\tmaterial.metal = this.metal;\r\n\r\n\tmaterial.wrapAround = this.wrapAround;\r\n\tmaterial.wrapRGB.copy( this.wrapRGB );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.lightMap = this.lightMap;\r\n\r\n\tmaterial.bumpMap = this.bumpMap;\r\n\tmaterial.bumpScale = this.bumpScale;\r\n\r\n\tmaterial.normalMap = this.normalMap;\r\n\tmaterial.normalScale.copy( this.normalScale );\r\n\r\n\tmaterial.specularMap = this.specularMap;\r\n\r\n\tmaterial.alphaMap = this.alphaMap;\r\n\r\n\tmaterial.envMap = this.envMap;\r\n\tmaterial.combine = this.combine;\r\n\tmaterial.reflectivity = this.reflectivity;\r\n\tmaterial.refractionRatio = this.refractionRatio;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\r\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\tmaterial.morphNormals = this.morphNormals;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.morphTargets = false;\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshDepthMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  shading: THREE.FlatShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.shading = THREE.FlatShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.MeshNormalMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/MeshFaceMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MeshFaceMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MeshFaceMaterial';\r\n\t\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n};\r\n\r\nTHREE.MeshFaceMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MeshFaceMaterial,\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new THREE.MeshFaceMaterial();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/PointCloudMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointCloudMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointCloudMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointCloudMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointCloudMaterial.prototype.constructor = THREE.PointCloudMaterial;\r\n\r\nTHREE.PointCloudMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.PointCloudMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.size = this.size;\r\n\tmaterial.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// backwards compatibility\r\n\r\nTHREE.ParticleBasicMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.' );\r\n\treturn new THREE.PointCloudMaterial( parameters );\r\n\r\n};\r\n\r\nTHREE.ParticleSystemMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.' );\r\n\treturn new THREE.PointCloudMaterial( parameters );\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\tthis.attributes = null;\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\r\n\tthis.lights = false; // set to use scene lights\r\n\r\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.ShaderMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.fragmentShader = this.fragmentShader;\r\n\tmaterial.vertexShader = this.vertexShader;\r\n\r\n\tmaterial.uniforms = THREE.UniformsUtils.clone( this.uniforms );\r\n\r\n\tmaterial.attributes = this.attributes;\r\n\tmaterial.defines = this.defines;\r\n\r\n\tmaterial.shading = this.shading;\r\n\r\n\tmaterial.wireframe = this.wireframe;\r\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\tmaterial.lights = this.lights;\r\n\r\n\tmaterial.vertexColors = this.vertexColors;\r\n\r\n\tmaterial.skinning = this.skinning;\r\n\r\n\tmaterial.morphTargets = this.morphTargets;\r\n\tmaterial.morphNormals = this.morphNormals;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\r\nTHREE.RawShaderMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.RawShaderMaterial();\r\n\r\n\tTHREE.ShaderMaterial.prototype.clone.call( this, material );\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2(),\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\t// set parameters\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.clone = function () {\r\n\r\n\tvar material = new THREE.SpriteMaterial();\r\n\r\n\tTHREE.Material.prototype.clone.call( this, material );\r\n\r\n\tmaterial.color.copy( this.color );\r\n\tmaterial.map = this.map;\r\n\r\n\tmaterial.rotation = this.rotation;\r\n\r\n\tmaterial.fog = this.fog;\r\n\r\n\treturn material;\r\n\r\n};\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\tthis._needsUpdate = false;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tget needsUpdate () {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tclone: function ( texture ) {\r\n\r\n\t\tif ( texture === undefined ) texture = new THREE.Texture();\r\n\r\n\t\ttexture.image = this.image;\r\n\t\ttexture.mipmaps = this.mipmaps.slice( 0 );\r\n\r\n\t\ttexture.mapping = this.mapping;\r\n\r\n\t\ttexture.wrapS = this.wrapS;\r\n\t\ttexture.wrapT = this.wrapT;\r\n\r\n\t\ttexture.magFilter = this.magFilter;\r\n\t\ttexture.minFilter = this.minFilter;\r\n\r\n\t\ttexture.anisotropy = this.anisotropy;\r\n\r\n\t\ttexture.format = this.format;\r\n\t\ttexture.type = this.type;\r\n\r\n\t\ttexture.offset.copy( this.offset );\r\n\t\ttexture.repeat.copy( this.repeat );\r\n\r\n\t\ttexture.generateMipmaps = this.generateMipmaps;\r\n\t\ttexture.premultiplyAlpha = this.premultiplyAlpha;\r\n\t\ttexture.flipY = this.flipY;\r\n\t\ttexture.unpackAlignment = this.unpackAlignment;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\t\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.images = images;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nTHREE.CubeTexture.clone = function ( texture ) {\r\n\r\n\tif ( texture === undefined ) texture = new THREE.CubeTexture();\r\n\r\n\tTHREE.Texture.prototype.clone.call( this, texture );\r\n\r\n\ttexture.images = this.images;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\nTHREE.CompressedTexture.prototype.clone = function () {\r\n\r\n\tvar texture = new THREE.CompressedTexture();\r\n\r\n\tTHREE.Texture.prototype.clone.call( this, texture );\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\nTHREE.DataTexture.prototype.clone = function () {\r\n\r\n\tvar texture = new THREE.DataTexture();\r\n\r\n\tTHREE.Texture.prototype.clone.call( this, texture );\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar update = function () {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Group.prototype.constructor = THREE.Group;\r\n\r\n// File:src/objects/PointCloud.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.PointCloud = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'PointCloud';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointCloudMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.PointCloud.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.PointCloud.prototype.constructor = THREE.PointCloud;\r\n\r\nTHREE.PointCloud.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tvar object = this;\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar threshold = raycaster.params.PointCloud.threshold;\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\tvar testPoint = function ( point, index ) {\r\n\r\n\t\t\tvar rayPointDistance = ray.distanceToPoint( point );\r\n\r\n\t\t\tif ( rayPointDistance < localThreshold ) {\r\n\r\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tdistanceToRay: rayPointDistance,\r\n\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.index !== undefined ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tvar offset = {\r\n\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\tcount: indices.length,\r\n\t\t\t\t\t\tindex: 0\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\toffsets = [ offset ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\r\n\r\n\t\t\t\t\tvar start = offsets[ oi ].start;\r\n\t\t\t\t\tvar count = offsets[ oi ].count;\r\n\t\t\t\t\tvar index = offsets[ oi ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar a = index + indices[ i ];\r\n\r\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar pointCount = positions.length / 3;\r\n\r\n\t\t\t\tfor ( var i = 0; i < pointCount; i ++ ) {\r\n\r\n\t\t\t\t\tposition.set(\r\n\t\t\t\t\t\tpositions[ 3 * i ],\r\n\t\t\t\t\t\tpositions[ 3 * i + 1 ],\r\n\t\t\t\t\t\tpositions[ 3 * i + 2 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar vertices = this.geometry.vertices;\r\n\r\n\t\t\tfor ( var i = 0; i < vertices.length; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.PointCloud.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.PointCloud( this.geometry, this.material );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.ParticleSystem = function ( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.PointCloud.' );\r\n\treturn new THREE.PointCloud( geometry, material );\r\n\r\n};\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.mode = ( mode !== undefined ) ? mode : THREE.LineStrip;\r\n\r\n};\r\n\r\nTHREE.LineStrip = 0;\r\nTHREE.LinePieces = 1;\r\n\r\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Line.prototype.constructor = THREE.Line;\r\n\r\nTHREE.Line.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tvar precision = raycaster.linePrecision;\r\n\t\tvar precisionSq = precision * precision;\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar vStart = new THREE.Vector3();\r\n\t\tvar vEnd = new THREE.Vector3();\r\n\t\tvar interSegment = new THREE.Vector3();\r\n\t\tvar interRay = new THREE.Vector3();\r\n\t\tvar step = this.mode === THREE.LineStrip ? 1 : 2;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tif ( attributes.index !== undefined ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var oi = 0; oi < offsets.length; oi++){\r\n\r\n\t\t\t\t\tvar start = offsets[ oi ].start;\r\n\t\t\t\t\tvar count = offsets[ oi ].count;\r\n\t\t\t\t\tvar index = offsets[ oi ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start; i < start + count - 1; i += step ) {\r\n\r\n\t\t\t\t\t\tvar a = index + indices[ i ];\r\n\t\t\t\t\t\tvar b = index + indices[ i + 1 ];\r\n\r\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0; i < positions.length / 3 - 1; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Line.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Line( this.geometry, this.material, this.mode );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\t\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\r\nTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\r\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\tthis.morphTargetBase = - 1;\r\n\t\tthis.morphTargetForcedOrder = [];\r\n\t\tthis.morphTargetInfluences = [];\r\n\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\r\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t}\r\n\r\n\tconsole.log( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\treturn 0;\r\n\r\n};\r\n\r\n\r\nTHREE.Mesh.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\tvar vA = new THREE.Vector3();\r\n\tvar vB = new THREE.Vector3();\r\n\tvar vC = new THREE.Vector3();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false )  {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar material = this.material;\r\n\r\n\t\t\tif ( material === undefined ) return;\r\n\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tvar a, b, c;\r\n\t\t\tvar precision = raycaster.precision;\r\n\r\n\t\t\tif ( attributes.index !== undefined ) {\r\n\r\n\t\t\t\tvar indices = attributes.index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\r\n\r\n\t\t\t\t\tvar start = offsets[ oi ].start;\r\n\t\t\t\t\tvar count = offsets[ oi ].count;\r\n\t\t\t\t\tvar index = offsets[ oi ].index;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\ta = index + indices[ i ];\r\n\t\t\t\t\t\tb = index + indices[ i + 1 ];\r\n\t\t\t\t\t\tc = index + indices[ i + 2 ];\r\n\r\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( intersectionPoint === null ) continue;\r\n\r\n\t\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\r\n\r\n\t\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\tpoint: intersectionPoint,\r\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, j = 0, il = positions.length; i < il; i += 3, j += 9 ) {\r\n\r\n\t\t\t\t\ta = i;\r\n\t\t\t\t\tb = i + 1;\r\n\t\t\t\t\tc = i + 2;\r\n\r\n\t\t\t\t\tvA.fromArray( positions, j );\r\n\t\t\t\t\tvB.fromArray( positions, j + 3 );\r\n\t\t\t\t\tvC.fromArray( positions, j + 6 );\r\n\r\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( intersectionPoint === null ) continue;\r\n\r\n\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\r\n\r\n\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPoint,\r\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar isFaceMaterial = this.material instanceof THREE.MeshFaceMaterial;\r\n\t\t\tvar objectMaterials = isFaceMaterial === true ? this.material.materials : null;\r\n\r\n\t\t\tvar a, b, c, d;\r\n\t\t\tvar precision = raycaster.precision;\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tvar face = geometry.faces[ f ];\r\n\r\n\t\t\t\tvar material = isFaceMaterial === true ? objectMaterials[ face.materialIndex ] : this.material;\r\n\r\n\t\t\t\tif ( material === undefined ) continue;\r\n\r\n\t\t\t\ta = vertices[ face.a ];\r\n\t\t\t\tb = vertices[ face.b ];\r\n\t\t\t\tc = vertices[ face.c ];\r\n\r\n\t\t\t\tif ( material.morphTargets === true ) {\r\n\r\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\tvA.x += ( targets[ face.a ].x - a.x ) * influence;\r\n\t\t\t\t\t\tvA.y += ( targets[ face.a ].y - a.y ) * influence;\r\n\t\t\t\t\t\tvA.z += ( targets[ face.a ].z - a.z ) * influence;\r\n\r\n\t\t\t\t\t\tvB.x += ( targets[ face.b ].x - b.x ) * influence;\r\n\t\t\t\t\t\tvB.y += ( targets[ face.b ].y - b.y ) * influence;\r\n\t\t\t\t\t\tvB.z += ( targets[ face.b ].z - b.z ) * influence;\r\n\r\n\t\t\t\t\t\tvC.x += ( targets[ face.c ].x - c.x ) * influence;\r\n\t\t\t\t\t\tvC.y += ( targets[ face.c ].y - c.y ) * influence;\r\n\t\t\t\t\t\tvC.z += ( targets[ face.c ].z - c.z ) * influence;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvA.add( a );\r\n\t\t\t\t\tvB.add( b );\r\n\t\t\t\t\tvC.add( c );\r\n\r\n\t\t\t\t\ta = vA;\r\n\t\t\t\t\tb = vB;\r\n\t\t\t\t\tc = vC;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( c, b, a, true );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( a, b, c, material.side !== THREE.DoubleSide );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( intersectionPoint === null ) continue;\r\n\r\n\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\r\n\r\n\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tpoint: intersectionPoint,\r\n\t\t\t\t\tface: face,\r\n\t\t\t\t\tfaceIndex: f,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Mesh.prototype.clone = function ( object, recursive ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Mesh( this.geometry, this.material );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object, recursive );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( belongsToSkin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.skin = belongsToSkin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones  (8 * 8  / 4)\r\n\t\t//       16x16 pixel texture max   64 bones (16 * 16 / 4)\r\n\t\t//       32x32 pixel texture max  256 bones (32 * 32 / 4)\r\n\t\t//       64x64 pixel texture max 1024 bones (64 * 64 / 4)\r\n\r\n\t\tvar size;\r\n\r\n\t\tif ( this.bones.length > 256 )\r\n\t\t\tsize = 64;\r\n\t\telse if ( this.bones.length > 64 )\r\n\t\t\tsize = 32;\r\n\t\telse if ( this.bones.length > 16 )\r\n\t\t\tsize = 16;\r\n\t\telse\r\n\t\t\tsize = 8;\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\t\tthis.boneTexture.minFilter = THREE.NearestFilter;\r\n\t\tthis.boneTexture.magFilter = THREE.NearestFilter;\r\n\t\tthis.boneTexture.generateMipmaps = false;\r\n\t\tthis.boneTexture.flipY = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\r\n\tthis.boneInverses = [];\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tthis.boneInverses.push( inverse );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.pose = function () {\r\n\r\n\tvar bone;\r\n\r\n\t// recover the bind-time world matrices\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// compute the local matrices, positions, rotations and scales\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.update = ( function () {\r\n\r\n\tvar offsetMatrix = new THREE.Matrix4();\r\n\t\r\n\treturn function () {\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n} )();\r\n\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone, p, q, s;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tp = gbone.pos;\r\n\t\t\tq = gbone.rotq;\r\n\t\t\ts = gbone.scl;\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.set( p[ 0 ], p[ 1 ], p[ 2 ] );\r\n\t\t\tbone.quaternion.set( q[ 0 ], q[ 1 ], q[ 2 ], q[ 3 ] );\r\n\r\n\t\t\tif ( s !== undefined ) {\r\n\r\n\t\t\t\tbone.scale.set( s[ 0 ], s[ 1 ], s[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.scale.set( 1, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ) );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\r\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\r\n\tthis.skeleton = skeleton;\r\n\r\n\tif ( bindMatrix === undefined ) {\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t}\r\n\r\n\tthis.bindMatrix.copy( bindMatrix );\r\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.pose = function () {\r\n\r\n\tthis.skeleton.pose();\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\r\n\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\r\n\r\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\r\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.SkinnedMesh unreckognized bindMode: ' + this.bindMode );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.clone = function( object ) {\r\n\r\n\tif ( object === undefined ) {\r\n\r\n\t\tobject = new THREE.SkinnedMesh( this.geometry, this.material, this.useVertexTexture );\r\n\r\n\t}\r\n\r\n\tTHREE.Mesh.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n\r\n// File:src/objects/MorphAnimMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphAnimMesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'MorphAnimMesh';\r\n\r\n\t// API\r\n\r\n\tthis.duration = 1000; // milliseconds\r\n\tthis.mirroredLoop = false;\r\n\tthis.time = 0;\r\n\r\n\t// internals\r\n\r\n\tthis.lastKeyframe = 0;\r\n\tthis.currentKeyframe = 0;\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n\tthis.setFrameRange( 0, this.geometry.morphTargets.length - 1 );\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\r\n\r\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\r\n\r\n\tthis.startKeyframe = start;\r\n\tthis.endKeyframe = end;\r\n\r\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\r\n\r\n\tthis.direction = - 1;\r\n\tthis.directionBackwards = true;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tif ( ! geometry.animations ) geometry.animations = {};\r\n\r\n\tvar firstAnimation, animations = geometry.animations;\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar parts = morph.name.match( pattern );\r\n\r\n\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\tvar label = parts[ 1 ];\r\n\t\t\tvar num = parts[ 2 ];\r\n\r\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar animation = animations[ label ];\r\n\r\n\t\t\tif ( i < animation.start ) animation.start = i;\r\n\t\t\tif ( i > animation.end ) animation.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\r\n\r\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\r\n\r\n\tthis.geometry.animations[ label ] = { start: start, end: end };\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\r\n\r\n\tvar animation = this.geometry.animations[ label ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tthis.setFrameRange( animation.start, animation.end );\r\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\r\n\t\tthis.time = 0;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'animation[' + label + '] undefined' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\r\n\r\n\tvar frameTime = this.duration / this.length;\r\n\r\n\tthis.time += this.direction * delta;\r\n\r\n\tif ( this.mirroredLoop ) {\r\n\r\n\t\tif ( this.time > this.duration || this.time < 0 ) {\r\n\r\n\t\t\tthis.direction *= - 1;\r\n\r\n\t\t\tif ( this.time > this.duration ) {\r\n\r\n\t\t\t\tthis.time = this.duration;\r\n\t\t\t\tthis.directionBackwards = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.time < 0 ) {\r\n\r\n\t\t\t\tthis.time = 0;\r\n\t\t\t\tthis.directionBackwards = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tthis.time = this.time % this.duration;\r\n\r\n\t\tif ( this.time < 0 ) this.time += this.duration;\r\n\r\n\t}\r\n\r\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\r\n\r\n\tif ( keyframe !== this.currentKeyframe ) {\r\n\r\n\t\tthis.morphTargetInfluences[ this.lastKeyframe ] = 0;\r\n\t\tthis.morphTargetInfluences[ this.currentKeyframe ] = 1;\r\n\r\n\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\tthis.lastKeyframe = this.currentKeyframe;\r\n\t\tthis.currentKeyframe = keyframe;\r\n\r\n\t}\r\n\r\n\tvar mix = ( this.time % frameTime ) / frameTime;\r\n\r\n\tif ( this.directionBackwards ) {\r\n\r\n\t\tmix = 1 - mix;\r\n\r\n\t}\r\n\r\n\tthis.morphTargetInfluences[ this.currentKeyframe ] = mix;\r\n\tthis.morphTargetInfluences[ this.lastKeyframe ] = 1 - mix;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\r\n\r\n\tvar influences = this.morphTargetInfluences;\r\n\r\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\r\n\r\n\t\tinfluences[ i ] = 0;\r\n\r\n\t}\r\n\r\n\tif ( a > -1 ) influences[ a ] = 1 - t;\r\n\tif ( b > -1 ) influences[ b ] = t;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.MorphAnimMesh( this.geometry, this.material );\r\n\r\n\tobject.duration = this.duration;\r\n\tobject.mirroredLoop = this.mirroredLoop;\r\n\tobject.time = this.time;\r\n\r\n\tobject.lastKeyframe = this.lastKeyframe;\r\n\tobject.currentKeyframe = this.currentKeyframe;\r\n\r\n\tobject.direction = this.direction;\r\n\tobject.directionBackwards = this.directionBackwards;\r\n\r\n\tTHREE.Mesh.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.objects = [];\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\r\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\r\n\tif ( distance === undefined ) distance = 0;\r\n\r\n\tdistance = Math.abs( distance );\r\n\r\n\tfor ( var l = 0; l < this.objects.length; l ++ ) {\r\n\r\n\t\tif ( distance < this.objects[ l ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.objects.splice( l, 0, { distance: distance, object: object } );\r\n\tthis.add( object );\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\r\n\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\r\n\r\n\t\tif ( distance < this.objects[ i ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn this.objects[ i - 1 ].object;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.LOD.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( camera ) {\r\n\r\n\t\tif ( this.objects.length > 1 ) {\r\n\r\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\tthis.objects[ 0 ].object.visible = true;\r\n\r\n\t\t\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= this.objects[ i ].distance ) {\r\n\r\n\t\t\t\t\tthis.objects[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tthis.objects[ i     ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.objects[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.LOD.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.LOD();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\tfor ( var i = 0, l = this.objects.length; i < l; i ++ ) {\r\n\t\tvar x = this.objects[ i ].object.clone();\r\n\t\tx.visible = i === 0;\r\n\t\tobject.addLevel( x, this.objects[ i ].distance );\r\n\t}\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = ( function () {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\treturn function ( material ) {\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tthis.type = 'Sprite';\r\n\r\n\t\tthis.geometry = geometry;\r\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\r\nTHREE.Sprite.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function ( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.distanceToPoint( matrixPosition );\r\n\r\n\t\tif ( distance > this.scale.x ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: this.position,\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Sprite.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Sprite( this.material );\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.Particle = THREE.Sprite;\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\r\n\r\n/*\r\n * Add: adds another flare\r\n */\r\n\r\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\tif ( size === undefined ) size = - 1;\r\n\tif ( distance === undefined ) distance = 0;\r\n\tif ( opacity === undefined ) opacity = 1;\r\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\tthis.lensFlares.push( {\r\n\t\ttexture: texture, \t\t\t// THREE.Texture\r\n\t\tsize: size, \t\t\t\t// size in pixels (-1 = use texture.width)\r\n\t\tdistance: distance, \t\t// distance (0-1) from light source (0=at light source)\r\n\t\tx: 0, y: 0, z: 0,\t\t\t// screen position (-1 => 1) z = 0 is ontop z = 1 is back\r\n\t\tscale: 1, \t\t\t\t\t// scale\r\n\t\trotation: 1, \t\t\t\t// rotation\r\n\t\topacity: opacity,\t\t\t// opacity\r\n\t\tcolor: color,\t\t\t\t// color\r\n\t\tblending: blending\t\t\t// blending\r\n\t} );\r\n\r\n};\r\n\r\n/*\r\n * Update lens flares update positions on all flares based on the screen position\r\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n */\r\n\r\nTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\r\n\tvar f, fl = this.lensFlares.length;\r\n\tvar flare;\r\n\tvar vecX = - this.positionScreen.x * 2;\r\n\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\tfor( f = 0; f < fl; f ++ ) {\r\n\r\n\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.clone = function ( object ) {\r\n\r\n\tif ( object === undefined ) object = new THREE.Scene();\r\n\r\n\tTHREE.Object3D.prototype.clone.call( this, object );\r\n\r\n\tif ( this.fog !== null ) object.fog = this.fog.clone();\r\n\tif ( this.overrideMaterial !== null ) object.overrideMaterial = this.overrideMaterial.clone();\r\n\r\n\tobject.autoUpdate = this.autoUpdate;\r\n\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\r\n\r\n\treturn object;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\ntransformedNormal = normalize( transformedNormal );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\tfloat dotProduct = dot( transformedNormal, dirVector );\\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\t#ifdef WRAP_AROUND\\n\\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\\n\\n\t#endif\\n\\n}\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\tfloat lDistance = 1.0;\\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\t\tlVector = normalize( lVector );\\n\\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\\n\\n\t\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/default_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'default_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#elif defined( USE_MORPHTARGETS )\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\\n\\n#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\t#ifdef USE_MORPHNORMALS\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\\n\\n\t#else\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"vec3 normal = normalize( vNormal );\\nvec3 viewPosition = normalize( vViewPosition );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tvec3 pointDiffuse = vec3( 0.0 );\\n\tvec3 pointSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\\n\\n\t\t\t\t// specular\\n\\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tvec3 spotDiffuse = vec3( 0.0 );\\n\tvec3 spotSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t\t#else\\n\\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t\t#endif\\n\\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\\n\\n\t\t\t\t\t// specular\\n\\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tvec3 dirDiffuse = vec3( 0.0 );\\n\tvec3 dirSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\t\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, dirVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\\n\\n\t\t// specular\\n\\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t/*\\n\t\t// fresnel term from skin shader\\n\t\tconst float F0 = 0.128;\\n\\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\\n\t\tfloat exponential = pow( base, 5.0 );\\n\\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\\n\t\t*/\\n\\n\t\t/*\\n\t\t// fresnel term from fresnel shader\\n\t\tconst float mFresnelBias = 0.08;\\n\t\tconst float mFresnelScale = 0.3;\\n\t\tconst float mFresnelPower = 5.0;\\n\\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\\n\t\t*/\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tvec3 hemiDiffuse = vec3( 0.0 );\\n\tvec3 hemiSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\themiDiffuse += diffuse * hemiColor;\\n\\n\t\t// specular (sky light)\\n\\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\\n\\n\t\t// specular (ground light)\\n\\n\t\tvec3 lVectorGround = -lVector;\\n\\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\\n\\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\\n\\n\t}\\n\\n#endif\\n\\nvec3 totalDiffuse = vec3( 0.0 );\\nvec3 totalSpecular = vec3( 0.0 );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\ttotalDiffuse += dirDiffuse;\\n\ttotalSpecular += dirSpecular;\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\ttotalDiffuse += hemiDiffuse;\\n\ttotalSpecular += hemiSpecular;\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\ttotalDiffuse += pointDiffuse;\\n\ttotalSpecular += pointSpecular;\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\ttotalDiffuse += spotDiffuse;\\n\ttotalSpecular += spotSpecular;\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\\n\\n#else\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tvec3 morphedNormal = vec3( 0.0 );\\n\\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n\tmorphedNormal += normal;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\tuniform sampler2D lightMap;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\ttexelColor.xyz *= texelColor.xyz;\\n\\n\t#endif\\n\\n\tgl_FragColor = gl_FragColor * texelColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tvColor = color * color;\\n\\n\t#else\\n\\n\t\tvColor = color;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\t#ifdef USE_MORPHTARGETS\\n\\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"#ifdef GAMMA_OUTPUT\\n\\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambient;\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\n\\nuniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t\t\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tenvColor.xyz *= envColor.xyz;\\n\\n\t#endif\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\tgl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tconst float LOG2 = 1.442695;\\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec3 objectNormal = skinnedNormal.xyz;\\n\\n#elif defined( USE_MORPHNORMALS )\\n\\n\tvec3 objectNormal = morphedNormal;\\n\\n#else\\n\\n\tvec3 objectNormal = normal;\\n\\n#endif\\n\\n#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\nvarying vec3 vNormal;\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\tvec3 morphed = vec3( 0.0 );\\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n\tmorphed += position;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\\n\tworldNormal = normalize( worldNormal );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\tint inFrustumCount = 0;\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\t\t\t// don't shadow pixels outside of light frustum\\n\t\t\t\t// use just first frustum (for cascades)\\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\\n\\n\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\tinFrustumCount += int( inFrustum );\\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\\n\\n\t\t#else\\n\\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\t#endif\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#else\\n\\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t}\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\tshadowColor *= shadowColor;\\n\\n\t#endif\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#elif defined( USE_MORPHTARGETS )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\t#extension GL_EXT_frag_depth : enable\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( parameter_src instanceof Array ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"lightMap\" : { type: \"t\", value: null },\r\n\t\t\"specularMap\" : { type: \"t\", value: null },\r\n\t\t\"alphaMap\" : { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\" : { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\r\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 },\r\n\r\n\t\t\"morphTargetInfluences\" : { type: \"f\", value: 0 }\r\n\r\n\t},\r\n\r\n\tbump: {\r\n\r\n\t\t\"bumpMap\" : { type: \"t\", value: null },\r\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\" : { type: \"t\", value: null },\r\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\t},\r\n\r\n\tfog : {\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\r\n\r\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] }\r\n\r\n\t},\r\n\r\n\tparticle: {\r\n\r\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"size\" : { type: \"f\", value: 1.0 },\r\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tshadowmap: {\r\n\r\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\r\n\r\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\r\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\r\n\r\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define LAMBERT\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\t\t//\"float isFront = float( gl_FrontFacing );\",\r\n\t\t\t\t\t//\"gl_FragColor.xyz *= isFront * vLightFront + ( 1.0 - isFront ) * vLightBack;\",\r\n\r\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\r\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightFront;\",\r\n\t\t\t\"\t\telse\",\r\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightBack;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragColor.xyz *= vLightFront;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bump\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 },\r\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform vec3 ambient;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\"uniform float shininess;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'particle_basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"particle\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float size;\",\r\n\t\t\t\"uniform float scale;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\r\n\t\t\t\"\t#else\",\r\n\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 psColor;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( psColor, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float scale;\",\r\n\t\t\t\"attribute float lineDistance;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\"uniform float totalSize;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\r\n\t\t\t\"\t\tdiscard;\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float mNear;\",\r\n\t\t\t\"uniform float mFar;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform sampler2D tEquirect;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\r\n\t\t\t\t\"vec2 sampleUV;\",\r\n\t\t\t\t\"sampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);\",\r\n\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;\", // reciprocal( 2 PI ) + 0.5\r\n\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t},\r\n\r\n\t/* Depth encoding into RGBA texture\r\n\t *\r\n\t * based on SpiderGL shadow map example\r\n\t * http://spidergl.org/example.php?id=6\r\n\t *\r\n\t * originally from\r\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t *\r\n\t * see also\r\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t */\r\n\r\n\t'depthRGBA': {\r\n\r\n\t\tuniforms: {},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\"),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\r\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\r\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\"\treturn res;\",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join(\"\\n\")\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\tpixelRatio = 1,\r\n\r\n\t_precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t_logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false,\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar _webglObjects = {};\r\n\tvar _webglObjectsImmediate = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar transparentObjects = [];\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// shadow map\r\n\r\n\tthis.shadowMapEnabled = false;\r\n\tthis.shadowMapType = THREE.PCFShadowMap;\r\n\tthis.shadowMapCullFace = THREE.CullFaceFront;\r\n\tthis.shadowMapDebug = false;\r\n\tthis.shadowMapCascade = false;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// info\r\n\r\n\tthis.info = {\r\n\r\n\t\tmemory: {\r\n\r\n\t\t\tprograms: 0,\r\n\t\t\tgeometries: 0,\r\n\t\t\ttextures: 0\r\n\r\n\t\t},\r\n\r\n\t\trender: {\r\n\r\n\t\t\tcalls: 0,\r\n\t\t\tvertices: 0,\r\n\t\t\tfaces: 0,\r\n\t\t\tpoints: 0\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t_programs = [],\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t// GL state cache\r\n\r\n\t_oldDoubleSided = - 1,\r\n\t_oldFlipSided = - 1,\r\n\r\n\t_oldBlending = - 1,\r\n\r\n\t_oldBlendEquation = - 1,\r\n\t_oldBlendSrc = - 1,\r\n\t_oldBlendDst = - 1,\r\n\r\n\t_oldDepthTest = - 1,\r\n\t_oldDepthWrite = - 1,\r\n\r\n\t_oldPolygonOffset = null,\r\n\t_oldPolygonOffsetFactor = null,\r\n\t_oldPolygonOffsetUnits = null,\r\n\r\n\t_oldLineWidth = null,\r\n\r\n\t_viewportX = 0,\r\n\t_viewportY = 0,\r\n\t_viewportWidth = _canvas.width,\r\n\t_viewportHeight = _canvas.height,\r\n\t_currentWidth = 0,\r\n\t_currentHeight = 0,\r\n\r\n\t_newAttributes = new Uint8Array( 16 ),\r\n\t_enabledAttributes = new Uint8Array( 16 ),\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t // camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\t_projScreenMatrixPS = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_direction = new THREE.Vector3(),\r\n\r\n\t_lightsNeedUpdate = true,\r\n\r\n\t_lights = {\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: { length: 0, colors:[], positions: [] },\r\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [] },\r\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [] },\r\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\r\n\r\n\t};\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl') !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', function ( event ) {\r\n\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tresetGLState();\r\n\t\t\tsetDefaultGLState();\r\n\r\n\t\t\t_webglObjects = {};\r\n\r\n\t\t}, false);\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( error );\r\n\r\n\t}\r\n\r\n\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\treturn {\r\n\t\t\t\t'rangeMin': 1,\r\n\t\t\t\t'rangeMax': 1,\r\n\t\t\t\t'precision': 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\r\n\tif ( _logarithmicDepthBuffer ) {\r\n\r\n\t\textensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar setDefaultGLState = function () {\r\n\r\n\t\t_gl.clearColor( 0, 0, 0, 1 );\r\n\t\t_gl.clearDepth( 1 );\r\n\t\t_gl.clearStencil( 0 );\r\n\r\n\t\t_gl.enable( _gl.DEPTH_TEST );\r\n\t\t_gl.depthFunc( _gl.LEQUAL );\r\n\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\t\t_gl.cullFace( _gl.BACK );\r\n\t\t_gl.enable( _gl.CULL_FACE );\r\n\r\n\t\t_gl.enable( _gl.BLEND );\r\n\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tvar resetGLState = function () {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_oldBlending = - 1;\r\n\t\t_oldDepthTest = - 1;\r\n\t\t_oldDepthWrite = - 1;\r\n\t\t_oldDoubleSided = - 1;\r\n\t\t_oldFlipSided = - 1;\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\tfor ( var i = 0; i < _enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\t_enabledAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\r\n\t// GPU capabilities\r\n\r\n\tvar _maxTextures = _gl.getParameter( _gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tvar _maxVertexTextures = _gl.getParameter( _gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tvar _maxTextureSize = _gl.getParameter( _gl.MAX_TEXTURE_SIZE );\r\n\tvar _maxCubemapSize = _gl.getParameter( _gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tvar _supportsVertexTextures = _maxVertexTextures > 0;\r\n\tvar _supportsBoneTextures = _supportsVertexTextures && extensions.get( 'OES_texture_float' );\r\n\r\n\t//\r\n\r\n\tvar _vertexShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.HIGH_FLOAT );\r\n\tvar _vertexShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.MEDIUM_FLOAT );\r\n\tvar _vertexShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.LOW_FLOAT );\r\n\r\n\tvar _fragmentShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.HIGH_FLOAT );\r\n\tvar _fragmentShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.MEDIUM_FLOAT );\r\n\tvar _fragmentShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.LOW_FLOAT );\r\n\r\n\tvar getCompressedTextureFormats = ( function () {\r\n\r\n\t\tvar array;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( array !== undefined ) {\r\n\r\n\t\t\t\treturn array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) || extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\r\n\r\n\t\t\t\tvar formats = _gl.getParameter( _gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ){\r\n\r\n\t\t\t\t\tarray.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n\t// clamp precision to maximum available\r\n\r\n\tvar highpAvailable = _vertexShaderPrecisionHighpFloat.precision > 0 && _fragmentShaderPrecisionHighpFloat.precision > 0;\r\n\tvar mediumpAvailable = _vertexShaderPrecisionMediumpFloat.precision > 0 && _fragmentShaderPrecisionMediumpFloat.precision > 0;\r\n\r\n\tif ( _precision === 'highp' && ! highpAvailable ) {\r\n\r\n\t\tif ( mediumpAvailable ) {\r\n\r\n\t\t\t_precision = 'mediump';\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp not supported, using mediump.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_precision = 'lowp';\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp and mediump not supported, using lowp.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( _precision === 'mediump' && ! mediumpAvailable ) {\r\n\r\n\t\t_precision = 'lowp';\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: mediump not supported, using lowp.' );\r\n\r\n\t}\r\n\r\n\t// Plugins\r\n\r\n\tvar shadowMapPlugin = new THREE.ShadowMapPlugin( this, lights, _webglObjects, _webglObjectsImmediate );\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.supportsVertexTextures = function () {\r\n\r\n\t\treturn _supportsVertexTextures;\r\n\r\n\t};\r\n\r\n\tthis.supportsFloatTextures = function () {\r\n\r\n\t\treturn extensions.get( 'OES_texture_float' );\r\n\r\n\t};\r\n\r\n\tthis.supportsStandardDerivatives = function () {\r\n\r\n\t\treturn extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTextureS3TC = function () {\r\n\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTexturePVRTC = function () {\r\n\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsBlendMinMax = function () {\r\n\r\n\t\treturn extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tvalue = extension !== null ? _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT ) : 0;\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t}\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn _precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tpixelRatio = value;\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_canvas.width = width * pixelRatio;\r\n\t\t_canvas.height = height * pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\t_viewportX = x * pixelRatio;\r\n\t\t_viewportY = y * pixelRatio;\r\n\r\n\t\t_viewportWidth = width * pixelRatio;\r\n\t\t_viewportHeight = height * pixelRatio;\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\t_gl.scissor(\r\n\t\t\tx * pixelRatio,\r\n\t\t\ty * pixelRatio,\r\n\t\t\twidth * pixelRatio,\r\n\t\t\theight * pixelRatio\r\n\t\t);\r\n\r\n\t};\r\n\r\n\tthis.enableScissorTest = function ( enable ) {\r\n\r\n\t\tenable ? _gl.enable( _gl.SCISSOR_TEST ) : _gl.disable( _gl.SCISSOR_TEST );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\t// Buffer allocation\r\n\r\n\tfunction createParticleBuffers ( geometry ) {\r\n\r\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\r\n\r\n\t\t_this.info.memory.geometries ++;\r\n\r\n\t};\r\n\r\n\tfunction createLineBuffers ( geometry ) {\r\n\r\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\r\n\t\tgeometry.__webglLineDistanceBuffer = _gl.createBuffer();\r\n\r\n\t\t_this.info.memory.geometries ++;\r\n\r\n\t};\r\n\r\n\tfunction createMeshBuffers ( geometryGroup ) {\r\n\r\n\t\tgeometryGroup.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglNormalBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglTangentBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglColorBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglUVBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglUV2Buffer = _gl.createBuffer();\r\n\r\n\t\tgeometryGroup.__webglSkinIndicesBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglSkinWeightsBuffer = _gl.createBuffer();\r\n\r\n\t\tgeometryGroup.__webglFaceBuffer = _gl.createBuffer();\r\n\t\tgeometryGroup.__webglLineBuffer = _gl.createBuffer();\r\n\r\n\t\tvar numMorphTargets = geometryGroup.numMorphTargets;\r\n\r\n\t\tif ( numMorphTargets ) {\r\n\r\n\t\t\tgeometryGroup.__webglMorphTargetsBuffers = [];\r\n\r\n\t\t\tfor ( var m = 0, ml = numMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__webglMorphTargetsBuffers.push( _gl.createBuffer() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar numMorphNormals = geometryGroup.numMorphNormals;\r\n\r\n\t\tif ( numMorphNormals ) {\r\n\r\n\t\t\tgeometryGroup.__webglMorphNormalsBuffers = [];\r\n\r\n\t\t\tfor ( var m = 0, ml = numMorphNormals; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__webglMorphNormalsBuffers.push( _gl.createBuffer() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_this.info.memory.geometries ++;\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tvar onObjectRemoved = function ( event ) {\r\n\r\n\t\tvar object = event.target;\r\n\r\n\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\tchild.removeEventListener( 'remove', onObjectRemoved );\r\n\r\n\t\t\tremoveObject( child );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tvar onGeometryDispose = function ( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdeallocateGeometry( geometry );\r\n\r\n\t};\r\n\r\n\tvar onTextureDispose = function ( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_this.info.memory.textures --;\r\n\r\n\r\n\t};\r\n\r\n\tvar onRenderTargetDispose = function ( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_this.info.memory.textures --;\r\n\r\n\t};\r\n\r\n\tvar onMaterialDispose = function ( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t};\r\n\r\n\t// Buffer deallocation\r\n\r\n\tvar deleteBuffers = function ( geometry ) {\r\n\r\n\t\tvar buffers = [\r\n\t\t\t'__webglVertexBuffer',\r\n\t\t\t'__webglNormalBuffer',\r\n\t\t\t'__webglTangentBuffer',\r\n\t\t\t'__webglColorBuffer',\r\n\t\t\t'__webglUVBuffer',\r\n\t\t\t'__webglUV2Buffer',\r\n\r\n\t\t\t'__webglSkinIndicesBuffer',\r\n\t\t\t'__webglSkinWeightsBuffer',\r\n\r\n\t\t\t'__webglFaceBuffer',\r\n\t\t\t'__webglLineBuffer',\r\n\r\n\t\t\t'__webglLineDistanceBuffer'\r\n\t\t];\r\n\r\n\t\tfor ( var i = 0, l = buffers.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar name = buffers[ i ];\r\n\r\n\t\t\tif ( geometry[ name ] !== undefined ) {\r\n\r\n\t\t\t\t_gl.deleteBuffer( geometry[ name ] );\r\n\r\n\t\t\t\tdelete geometry[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// custom attributes\r\n\r\n\t\tif ( geometry.__webglCustomAttributesList !== undefined ) {\r\n\r\n\t\t\tfor ( var name in geometry.__webglCustomAttributesList ) {\r\n\r\n\t\t\t\t_gl.deleteBuffer( geometry.__webglCustomAttributesList[ name ].buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete geometry.__webglCustomAttributesList;\r\n\r\n\t\t}\r\n\r\n\t\t_this.info.memory.geometries --;\r\n\r\n\t};\r\n\r\n\tvar deallocateGeometry = function ( geometry ) {\r\n\r\n\t\tdelete geometry.__webglInit;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tfor ( var name in geometry.attributes ) {\r\n\r\n\t\t\t\tvar attribute = geometry.attributes[ name ];\r\n\r\n\t\t\t\tif ( attribute.buffer !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.deleteBuffer( attribute.buffer );\r\n\r\n\t\t\t\t\tdelete attribute.buffer;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.info.memory.geometries --;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t\tif ( geometryGroupsList !== undefined ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = geometryGroupsList.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\r\n\r\n\t\t\t\t\tif ( geometryGroup.numMorphTargets !== undefined ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphTargetsBuffers[ m ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphTargetsBuffers;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( geometryGroup.numMorphNormals !== undefined ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphNormalsBuffers[ m ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphNormalsBuffers;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeleteBuffers( geometryGroup );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete geometryGroups[ geometry.id ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdeleteBuffers( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// TOFIX: Workaround for deleted geometry being currently bound\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\r\n\t};\r\n\r\n\tvar deallocateTexture = function ( texture ) {\r\n\r\n\t\tif ( texture.image && texture.image.__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( texture.image.__webglTextureCube );\r\n\r\n\t\t\tdelete texture.image.__webglTextureCube;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( texture.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( texture.__webglTexture );\r\n\r\n\t\t\tdelete texture.__webglTexture;\r\n\t\t\tdelete texture.__webglInit;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar deallocateRenderTarget = function ( renderTarget ) {\r\n\r\n\t\tif ( ! renderTarget || renderTarget.__webglTexture === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( renderTarget.__webglTexture );\r\n\r\n\t\tdelete renderTarget.__webglTexture;\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer[ i ] );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer );\r\n\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tdelete renderTarget.__webglFramebuffer;\r\n\t\tdelete renderTarget.__webglRenderbuffer;\r\n\r\n\t};\r\n\r\n\tvar deallocateMaterial = function ( material ) {\r\n\r\n\t\tvar program = material.program.program;\r\n\r\n\t\tif ( program === undefined ) return;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\t// only deallocate GL program if this was the last use of shared program\r\n\t\t// assumed there is only single copy of any program in the _programs list\r\n\t\t// (that's how it's constructed)\r\n\r\n\t\tvar i, il, programInfo;\r\n\t\tvar deleteProgram = false;\r\n\r\n\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\r\n\r\n\t\t\tprogramInfo = _programs[ i ];\r\n\r\n\t\t\tif ( programInfo.program === program ) {\r\n\r\n\t\t\t\tprogramInfo.usedTimes --;\r\n\r\n\t\t\t\tif ( programInfo.usedTimes === 0 ) {\r\n\r\n\t\t\t\t\tdeleteProgram = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( deleteProgram === true ) {\r\n\r\n\t\t\t// avoid using array.splice, this is costlier than creating new array from scratch\r\n\r\n\t\t\tvar newPrograms = [];\r\n\r\n\t\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tprogramInfo = _programs[ i ];\r\n\r\n\t\t\t\tif ( programInfo.program !== program ) {\r\n\r\n\t\t\t\t\tnewPrograms.push( programInfo );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_programs = newPrograms;\r\n\r\n\t\t\t_gl.deleteProgram( program );\r\n\r\n\t\t\t_this.info.memory.programs --;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Buffer initialization\r\n\r\n\tfunction initCustomAttributes ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar material = object.material;\r\n\r\n\t\tvar nvertices = geometry.vertices.length;\r\n\r\n\t\tif ( material.attributes ) {\r\n\r\n\t\t\tif ( geometry.__webglCustomAttributesList === undefined ) {\r\n\r\n\t\t\t\tgeometry.__webglCustomAttributesList = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\t\tvar attribute = material.attributes[ name ];\r\n\r\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\r\n\r\n\t\t\t\t\tattribute.__webglInitialized = true;\r\n\r\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\r\n\r\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\r\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\r\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\r\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\r\n\r\n\t\t\t\t\tattribute.size = size;\r\n\r\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\r\n\r\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\r\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\r\n\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.__webglCustomAttributesList.push( attribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction initParticleBuffers ( geometry, object ) {\r\n\r\n\t\tvar nvertices = geometry.vertices.length;\r\n\r\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\r\n\r\n\t\tgeometry.__sortArray = [];\r\n\r\n\t\tgeometry.__webglParticleCount = nvertices;\r\n\r\n\t\tinitCustomAttributes( object );\r\n\r\n\t};\r\n\r\n\tfunction initLineBuffers ( geometry, object ) {\r\n\r\n\t\tvar nvertices = geometry.vertices.length;\r\n\r\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometry.__lineDistanceArray = new Float32Array( nvertices * 1 );\r\n\r\n\t\tgeometry.__webglLineCount = nvertices;\r\n\r\n\t\tinitCustomAttributes( object );\r\n\r\n\t};\r\n\r\n\tfunction initMeshBuffers ( geometryGroup, object ) {\r\n\r\n\t\tvar geometry = object.geometry,\r\n\t\t\tfaces3 = geometryGroup.faces3,\r\n\r\n\t\t\tnvertices = faces3.length * 3,\r\n\t\t\tntris     = faces3.length * 1,\r\n\t\t\tnlines    = faces3.length * 3,\r\n\r\n\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\r\n\r\n\t\tgeometryGroup.__vertexArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometryGroup.__normalArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometryGroup.__colorArray = new Float32Array( nvertices * 3 );\r\n\t\tgeometryGroup.__uvArray = new Float32Array( nvertices * 2 );\r\n\r\n\t\tif ( geometry.faceVertexUvs.length > 1 ) {\r\n\r\n\t\t\tgeometryGroup.__uv2Array = new Float32Array( nvertices * 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.hasTangents ) {\r\n\r\n\t\t\tgeometryGroup.__tangentArray = new Float32Array( nvertices * 4 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.geometry.skinWeights.length && object.geometry.skinIndices.length ) {\r\n\r\n\t\t\tgeometryGroup.__skinIndexArray = new Float32Array( nvertices * 4 );\r\n\t\t\tgeometryGroup.__skinWeightArray = new Float32Array( nvertices * 4 );\r\n\r\n\t\t}\r\n\r\n\t\tvar UintArray = extensions.get( 'OES_element_index_uint' ) !== null && ntris > 21845 ? Uint32Array : Uint16Array; // 65535 / 3\r\n\r\n\t\tgeometryGroup.__typeArray = UintArray;\r\n\t\tgeometryGroup.__faceArray = new UintArray( ntris * 3 );\r\n\t\tgeometryGroup.__lineArray = new UintArray( nlines * 2 );\r\n\r\n\t\tvar numMorphTargets = geometryGroup.numMorphTargets;\r\n\r\n\t\tif ( numMorphTargets ) {\r\n\r\n\t\t\tgeometryGroup.__morphTargetsArrays = [];\r\n\r\n\t\t\tfor ( var m = 0, ml = numMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__morphTargetsArrays.push( new Float32Array( nvertices * 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar numMorphNormals = geometryGroup.numMorphNormals;\r\n\r\n\t\tif ( numMorphNormals ) {\r\n\r\n\t\t\tgeometryGroup.__morphNormalsArrays = [];\r\n\r\n\t\t\tfor ( var m = 0, ml = numMorphNormals; m < ml; m ++ ) {\r\n\r\n\t\t\t\tgeometryGroup.__morphNormalsArrays.push( new Float32Array( nvertices * 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometryGroup.__webglFaceCount = ntris * 3;\r\n\t\tgeometryGroup.__webglLineCount = nlines * 2;\r\n\r\n\r\n\t\t// custom attributes\r\n\r\n\t\tif ( material.attributes ) {\r\n\r\n\t\t\tif ( geometryGroup.__webglCustomAttributesList === undefined ) {\r\n\r\n\t\t\t\tgeometryGroup.__webglCustomAttributesList = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\t\t// Do a shallow copy of the attribute object so different geometryGroup chunks use different\r\n\t\t\t\t// attribute buffers which are correctly indexed in the setMeshBuffers function\r\n\r\n\t\t\t\tvar originalAttribute = material.attributes[ name ];\r\n\r\n\t\t\t\tvar attribute = {};\r\n\r\n\t\t\t\tfor ( var property in originalAttribute ) {\r\n\r\n\t\t\t\t\tattribute[ property ] = originalAttribute[ property ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\r\n\r\n\t\t\t\t\tattribute.__webglInitialized = true;\r\n\r\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\r\n\r\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\r\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\r\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\r\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\r\n\r\n\t\t\t\t\tattribute.size = size;\r\n\r\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\r\n\r\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\r\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\r\n\r\n\t\t\t\t\toriginalAttribute.needsUpdate = true;\r\n\t\t\t\t\tattribute.__original = originalAttribute;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometryGroup.__webglCustomAttributesList.push( attribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometryGroup.__inittedArrays = true;\r\n\r\n\t};\r\n\r\n\tfunction getBufferMaterial( object, geometryGroup ) {\r\n\r\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\r\n\t\t\t ? object.material.materials[ geometryGroup.materialIndex ]\r\n\t\t\t : object.material;\r\n\r\n\t};\r\n\r\n\tfunction materialNeedsSmoothNormals ( material ) {\r\n\r\n\t\treturn material && material.shading !== undefined && material.shading === THREE.SmoothShading;\r\n\r\n\t};\r\n\r\n\t// Buffer setting\r\n\r\n\tfunction setParticleBuffers ( geometry, hint, object ) {\r\n\r\n\t\tvar v, c, vertex, offset, index, color,\r\n\r\n\t\tvertices = geometry.vertices,\r\n\t\tvl = vertices.length,\r\n\r\n\t\tcolors = geometry.colors,\r\n\t\tcl = colors.length,\r\n\r\n\t\tvertexArray = geometry.__vertexArray,\r\n\t\tcolorArray = geometry.__colorArray,\r\n\r\n\t\tsortArray = geometry.__sortArray,\r\n\r\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\r\n\t\tdirtyElements = geometry.elementsNeedUpdate,\r\n\t\tdirtyColors = geometry.colorsNeedUpdate,\r\n\r\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\r\n\t\ti, il,\r\n\t\ta, ca, cal, value,\r\n\t\tcustomAttribute;\r\n\r\n\t\tif ( dirtyVertices ) {\r\n\r\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\r\n\r\n\t\t\t\tvertex = vertices[ v ];\r\n\r\n\t\t\t\toffset = v * 3;\r\n\r\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\r\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\r\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyColors ) {\r\n\r\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\r\n\r\n\t\t\t\tcolor = colors[ c ];\r\n\r\n\t\t\t\toffset = c * 3;\r\n\r\n\t\t\t\tcolorArray[ offset ]     = color.r;\r\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\r\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( customAttributes ) {\r\n\r\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\tif ( customAttribute.needsUpdate && ( customAttribute.boundTo === undefined ||  customAttribute.boundTo === 'vertices' ) ) {\r\n\r\n\t\t\t\t\tcal = customAttribute.value.length;\r\n\r\n\t\t\t\t\toffset = 0;\r\n\r\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\r\n\t\t\t\t\t\t\toffset += 2;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\r\n\r\n\t\t\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\r\n\r\n\t\t\t\tcustomAttribute.needsUpdate = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setLineBuffers ( geometry, hint ) {\r\n\r\n\t\tvar v, c, d, vertex, offset, color,\r\n\r\n\t\tvertices = geometry.vertices,\r\n\t\tcolors = geometry.colors,\r\n\t\tlineDistances = geometry.lineDistances,\r\n\r\n\t\tvl = vertices.length,\r\n\t\tcl = colors.length,\r\n\t\tdl = lineDistances.length,\r\n\r\n\t\tvertexArray = geometry.__vertexArray,\r\n\t\tcolorArray = geometry.__colorArray,\r\n\t\tlineDistanceArray = geometry.__lineDistanceArray,\r\n\r\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\r\n\t\tdirtyColors = geometry.colorsNeedUpdate,\r\n\t\tdirtyLineDistances = geometry.lineDistancesNeedUpdate,\r\n\r\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\r\n\r\n\t\ti, il,\r\n\t\ta, ca, cal, value,\r\n\t\tcustomAttribute;\r\n\r\n\t\tif ( dirtyVertices ) {\r\n\r\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\r\n\r\n\t\t\t\tvertex = vertices[ v ];\r\n\r\n\t\t\t\toffset = v * 3;\r\n\r\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\r\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\r\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyColors ) {\r\n\r\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\r\n\r\n\t\t\t\tcolor = colors[ c ];\r\n\r\n\t\t\t\toffset = c * 3;\r\n\r\n\t\t\t\tcolorArray[ offset ]     = color.r;\r\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\r\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyLineDistances ) {\r\n\r\n\t\t\tfor ( d = 0; d < dl; d ++ ) {\r\n\r\n\t\t\t\tlineDistanceArray[ d ] = lineDistances[ d ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglLineDistanceBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, lineDistanceArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( customAttributes ) {\r\n\r\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\tif ( customAttribute.needsUpdate && ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) ) {\r\n\r\n\t\t\t\t\toffset = 0;\r\n\r\n\t\t\t\t\tcal = customAttribute.value.length;\r\n\r\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\r\n\t\t\t\t\t\t\toffset += 2;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\r\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\r\n\r\n\t\t\t\t\t\t\t\toffset += 3;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]    = value.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\r\n\r\n\t\t\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\r\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\r\n\r\n\t\t\t\t\tcustomAttribute.needsUpdate = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setMeshBuffers( geometryGroup, object, hint, dispose, material ) {\r\n\r\n\t\tif ( ! geometryGroup.__inittedArrays ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar needsSmoothNormals = materialNeedsSmoothNormals( material );\r\n\r\n\t\tvar f, fl, fi, face,\r\n\t\tvertexNormals, faceNormal, normal,\r\n\t\tvertexColors, faceColor,\r\n\t\tvertexTangents,\r\n\t\tuv, uv2, v1, v2, v3, v4, t1, t2, t3, t4, n1, n2, n3, n4,\r\n\t\tc1, c2, c3,\r\n\t\tsw1, sw2, sw3, sw4,\r\n\t\tsi1, si2, si3, si4,\r\n\t\tsa1, sa2, sa3, sa4,\r\n\t\tsb1, sb2, sb3, sb4,\r\n\t\tm, ml, i, il,\r\n\t\tvn, uvi, uv2i,\r\n\t\tvk, vkl, vka,\r\n\t\tnka, chf, faceVertexNormals,\r\n\t\ta,\r\n\r\n\t\tvertexIndex = 0,\r\n\r\n\t\toffset = 0,\r\n\t\toffset_uv = 0,\r\n\t\toffset_uv2 = 0,\r\n\t\toffset_face = 0,\r\n\t\toffset_normal = 0,\r\n\t\toffset_tangent = 0,\r\n\t\toffset_line = 0,\r\n\t\toffset_color = 0,\r\n\t\toffset_skin = 0,\r\n\t\toffset_morphTarget = 0,\r\n\t\toffset_custom = 0,\r\n\t\toffset_customSrc = 0,\r\n\r\n\t\tvalue,\r\n\r\n\t\tvertexArray = geometryGroup.__vertexArray,\r\n\t\tuvArray = geometryGroup.__uvArray,\r\n\t\tuv2Array = geometryGroup.__uv2Array,\r\n\t\tnormalArray = geometryGroup.__normalArray,\r\n\t\ttangentArray = geometryGroup.__tangentArray,\r\n\t\tcolorArray = geometryGroup.__colorArray,\r\n\r\n\t\tskinIndexArray = geometryGroup.__skinIndexArray,\r\n\t\tskinWeightArray = geometryGroup.__skinWeightArray,\r\n\r\n\t\tmorphTargetsArrays = geometryGroup.__morphTargetsArrays,\r\n\t\tmorphNormalsArrays = geometryGroup.__morphNormalsArrays,\r\n\r\n\t\tcustomAttributes = geometryGroup.__webglCustomAttributesList,\r\n\t\tcustomAttribute,\r\n\r\n\t\tfaceArray = geometryGroup.__faceArray,\r\n\t\tlineArray = geometryGroup.__lineArray,\r\n\r\n\t\tgeometry = object.geometry, // this is shared for all chunks\r\n\r\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\r\n\t\tdirtyElements = geometry.elementsNeedUpdate,\r\n\t\tdirtyUvs = geometry.uvsNeedUpdate,\r\n\t\tdirtyNormals = geometry.normalsNeedUpdate,\r\n\t\tdirtyTangents = geometry.tangentsNeedUpdate,\r\n\t\tdirtyColors = geometry.colorsNeedUpdate,\r\n\t\tdirtyMorphTargets = geometry.morphTargetsNeedUpdate,\r\n\r\n\t\tvertices = geometry.vertices,\r\n\t\tchunk_faces3 = geometryGroup.faces3,\r\n\t\tobj_faces = geometry.faces,\r\n\r\n\t\tobj_uvs  = geometry.faceVertexUvs[ 0 ],\r\n\t\tobj_uvs2 = geometry.faceVertexUvs[ 1 ],\r\n\r\n\t\tobj_colors = geometry.colors,\r\n\r\n\t\tobj_skinIndices = geometry.skinIndices,\r\n\t\tobj_skinWeights = geometry.skinWeights,\r\n\r\n\t\tmorphTargets = geometry.morphTargets,\r\n\t\tmorphNormals = geometry.morphNormals;\r\n\r\n\t\tif ( dirtyVertices ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tv1 = vertices[ face.a ];\r\n\t\t\t\tv2 = vertices[ face.b ];\r\n\t\t\t\tv3 = vertices[ face.c ];\r\n\r\n\t\t\t\tvertexArray[ offset ]     = v1.x;\r\n\t\t\t\tvertexArray[ offset + 1 ] = v1.y;\r\n\t\t\t\tvertexArray[ offset + 2 ] = v1.z;\r\n\r\n\t\t\t\tvertexArray[ offset + 3 ] = v2.x;\r\n\t\t\t\tvertexArray[ offset + 4 ] = v2.y;\r\n\t\t\t\tvertexArray[ offset + 5 ] = v2.z;\r\n\r\n\t\t\t\tvertexArray[ offset + 6 ] = v3.x;\r\n\t\t\t\tvertexArray[ offset + 7 ] = v3.y;\r\n\t\t\t\tvertexArray[ offset + 8 ] = v3.z;\r\n\r\n\t\t\t\toffset += 9;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyMorphTargets ) {\r\n\r\n\t\t\tfor ( vk = 0, vkl = morphTargets.length; vk < vkl; vk ++ ) {\r\n\r\n\t\t\t\toffset_morphTarget = 0;\r\n\r\n\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tchf = chunk_faces3[ f ];\r\n\t\t\t\t\tface = obj_faces[ chf ];\r\n\r\n\t\t\t\t\t// morph positions\r\n\r\n\t\t\t\t\tv1 = morphTargets[ vk ].vertices[ face.a ];\r\n\t\t\t\t\tv2 = morphTargets[ vk ].vertices[ face.b ];\r\n\t\t\t\t\tv3 = morphTargets[ vk ].vertices[ face.c ];\r\n\r\n\t\t\t\t\tvka = morphTargetsArrays[ vk ];\r\n\r\n\t\t\t\t\tvka[ offset_morphTarget ]     = v1.x;\r\n\t\t\t\t\tvka[ offset_morphTarget + 1 ] = v1.y;\r\n\t\t\t\t\tvka[ offset_morphTarget + 2 ] = v1.z;\r\n\r\n\t\t\t\t\tvka[ offset_morphTarget + 3 ] = v2.x;\r\n\t\t\t\t\tvka[ offset_morphTarget + 4 ] = v2.y;\r\n\t\t\t\t\tvka[ offset_morphTarget + 5 ] = v2.z;\r\n\r\n\t\t\t\t\tvka[ offset_morphTarget + 6 ] = v3.x;\r\n\t\t\t\t\tvka[ offset_morphTarget + 7 ] = v3.y;\r\n\t\t\t\t\tvka[ offset_morphTarget + 8 ] = v3.z;\r\n\r\n\t\t\t\t\t// morph normals\r\n\r\n\t\t\t\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\t\t\t\tif ( needsSmoothNormals ) {\r\n\r\n\t\t\t\t\t\t\tfaceVertexNormals = morphNormals[ vk ].vertexNormals[ chf ];\r\n\r\n\t\t\t\t\t\t\tn1 = faceVertexNormals.a;\r\n\t\t\t\t\t\t\tn2 = faceVertexNormals.b;\r\n\t\t\t\t\t\t\tn3 = faceVertexNormals.c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tn1 = morphNormals[ vk ].faceNormals[ chf ];\r\n\t\t\t\t\t\t\tn2 = n1;\r\n\t\t\t\t\t\t\tn3 = n1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnka = morphNormalsArrays[ vk ];\r\n\r\n\t\t\t\t\t\tnka[ offset_morphTarget ]     = n1.x;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 1 ] = n1.y;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 2 ] = n1.z;\r\n\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 3 ] = n2.x;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 4 ] = n2.y;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 5 ] = n2.z;\r\n\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 6 ] = n3.x;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 7 ] = n3.y;\r\n\t\t\t\t\t\tnka[ offset_morphTarget + 8 ] = n3.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//\r\n\r\n\t\t\t\t\toffset_morphTarget += 9;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ vk ] );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphTargetsArrays[ vk ], hint );\r\n\r\n\t\t\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ vk ] );\r\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphNormalsArrays[ vk ], hint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( obj_skinWeights.length ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t// weights\r\n\r\n\t\t\t\tsw1 = obj_skinWeights[ face.a ];\r\n\t\t\t\tsw2 = obj_skinWeights[ face.b ];\r\n\t\t\t\tsw3 = obj_skinWeights[ face.c ];\r\n\r\n\t\t\t\tskinWeightArray[ offset_skin ]     = sw1.x;\r\n\t\t\t\tskinWeightArray[ offset_skin + 1 ] = sw1.y;\r\n\t\t\t\tskinWeightArray[ offset_skin + 2 ] = sw1.z;\r\n\t\t\t\tskinWeightArray[ offset_skin + 3 ] = sw1.w;\r\n\r\n\t\t\t\tskinWeightArray[ offset_skin + 4 ] = sw2.x;\r\n\t\t\t\tskinWeightArray[ offset_skin + 5 ] = sw2.y;\r\n\t\t\t\tskinWeightArray[ offset_skin + 6 ] = sw2.z;\r\n\t\t\t\tskinWeightArray[ offset_skin + 7 ] = sw2.w;\r\n\r\n\t\t\t\tskinWeightArray[ offset_skin + 8 ]  = sw3.x;\r\n\t\t\t\tskinWeightArray[ offset_skin + 9 ]  = sw3.y;\r\n\t\t\t\tskinWeightArray[ offset_skin + 10 ] = sw3.z;\r\n\t\t\t\tskinWeightArray[ offset_skin + 11 ] = sw3.w;\r\n\r\n\t\t\t\t// indices\r\n\r\n\t\t\t\tsi1 = obj_skinIndices[ face.a ];\r\n\t\t\t\tsi2 = obj_skinIndices[ face.b ];\r\n\t\t\t\tsi3 = obj_skinIndices[ face.c ];\r\n\r\n\t\t\t\tskinIndexArray[ offset_skin ]     = si1.x;\r\n\t\t\t\tskinIndexArray[ offset_skin + 1 ] = si1.y;\r\n\t\t\t\tskinIndexArray[ offset_skin + 2 ] = si1.z;\r\n\t\t\t\tskinIndexArray[ offset_skin + 3 ] = si1.w;\r\n\r\n\t\t\t\tskinIndexArray[ offset_skin + 4 ] = si2.x;\r\n\t\t\t\tskinIndexArray[ offset_skin + 5 ] = si2.y;\r\n\t\t\t\tskinIndexArray[ offset_skin + 6 ] = si2.z;\r\n\t\t\t\tskinIndexArray[ offset_skin + 7 ] = si2.w;\r\n\r\n\t\t\t\tskinIndexArray[ offset_skin + 8 ]  = si3.x;\r\n\t\t\t\tskinIndexArray[ offset_skin + 9 ]  = si3.y;\r\n\t\t\t\tskinIndexArray[ offset_skin + 10 ] = si3.z;\r\n\t\t\t\tskinIndexArray[ offset_skin + 11 ] = si3.w;\r\n\r\n\t\t\t\toffset_skin += 12;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_skin > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinIndexArray, hint );\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinWeightArray, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyColors ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tvertexColors = face.vertexColors;\r\n\t\t\t\tfaceColor = face.color;\r\n\r\n\t\t\t\tif ( vertexColors.length === 3 && material.vertexColors === THREE.VertexColors ) {\r\n\r\n\t\t\t\t\tc1 = vertexColors[ 0 ];\r\n\t\t\t\t\tc2 = vertexColors[ 1 ];\r\n\t\t\t\t\tc3 = vertexColors[ 2 ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tc1 = faceColor;\r\n\t\t\t\t\tc2 = faceColor;\r\n\t\t\t\t\tc3 = faceColor;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolorArray[ offset_color ]     = c1.r;\r\n\t\t\t\tcolorArray[ offset_color + 1 ] = c1.g;\r\n\t\t\t\tcolorArray[ offset_color + 2 ] = c1.b;\r\n\r\n\t\t\t\tcolorArray[ offset_color + 3 ] = c2.r;\r\n\t\t\t\tcolorArray[ offset_color + 4 ] = c2.g;\r\n\t\t\t\tcolorArray[ offset_color + 5 ] = c2.b;\r\n\r\n\t\t\t\tcolorArray[ offset_color + 6 ] = c3.r;\r\n\t\t\t\tcolorArray[ offset_color + 7 ] = c3.g;\r\n\t\t\t\tcolorArray[ offset_color + 8 ] = c3.b;\r\n\r\n\t\t\t\toffset_color += 9;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_color > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyTangents && geometry.hasTangents ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tvertexTangents = face.vertexTangents;\r\n\r\n\t\t\t\tt1 = vertexTangents[ 0 ];\r\n\t\t\t\tt2 = vertexTangents[ 1 ];\r\n\t\t\t\tt3 = vertexTangents[ 2 ];\r\n\r\n\t\t\t\ttangentArray[ offset_tangent ]     = t1.x;\r\n\t\t\t\ttangentArray[ offset_tangent + 1 ] = t1.y;\r\n\t\t\t\ttangentArray[ offset_tangent + 2 ] = t1.z;\r\n\t\t\t\ttangentArray[ offset_tangent + 3 ] = t1.w;\r\n\r\n\t\t\t\ttangentArray[ offset_tangent + 4 ] = t2.x;\r\n\t\t\t\ttangentArray[ offset_tangent + 5 ] = t2.y;\r\n\t\t\t\ttangentArray[ offset_tangent + 6 ] = t2.z;\r\n\t\t\t\ttangentArray[ offset_tangent + 7 ] = t2.w;\r\n\r\n\t\t\t\ttangentArray[ offset_tangent + 8 ]  = t3.x;\r\n\t\t\t\ttangentArray[ offset_tangent + 9 ]  = t3.y;\r\n\t\t\t\ttangentArray[ offset_tangent + 10 ] = t3.z;\r\n\t\t\t\ttangentArray[ offset_tangent + 11 ] = t3.w;\r\n\r\n\t\t\t\toffset_tangent += 12;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, tangentArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyNormals ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\tvertexNormals = face.vertexNormals;\r\n\t\t\t\tfaceNormal = face.normal;\r\n\r\n\t\t\t\tif ( vertexNormals.length === 3 && needsSmoothNormals ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tvn = vertexNormals[ i ];\r\n\r\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = vn.x;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = vn.y;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = vn.z;\r\n\r\n\t\t\t\t\t\toffset_normal += 3;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = faceNormal.x;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = faceNormal.y;\r\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = faceNormal.z;\r\n\r\n\t\t\t\t\t\toffset_normal += 3;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, normalArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyUvs && obj_uvs ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tfi = chunk_faces3[ f ];\r\n\r\n\t\t\t\tuv = obj_uvs[ fi ];\r\n\r\n\t\t\t\tif ( uv === undefined ) continue;\r\n\r\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tuvi = uv[ i ];\r\n\r\n\t\t\t\t\tuvArray[ offset_uv ]     = uvi.x;\r\n\t\t\t\t\tuvArray[ offset_uv + 1 ] = uvi.y;\r\n\r\n\t\t\t\t\toffset_uv += 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_uv > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uvArray, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyUvs && obj_uvs2 ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tfi = chunk_faces3[ f ];\r\n\r\n\t\t\t\tuv2 = obj_uvs2[ fi ];\r\n\r\n\t\t\t\tif ( uv2 === undefined ) continue;\r\n\r\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tuv2i = uv2[ i ];\r\n\r\n\t\t\t\t\tuv2Array[ offset_uv2 ]     = uv2i.x;\r\n\t\t\t\t\tuv2Array[ offset_uv2 + 1 ] = uv2i.y;\r\n\r\n\t\t\t\t\toffset_uv2 += 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( offset_uv2 > 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uv2Array, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dirtyElements ) {\r\n\r\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tfaceArray[ offset_face ]   = vertexIndex;\r\n\t\t\t\tfaceArray[ offset_face + 1 ] = vertexIndex + 1;\r\n\t\t\t\tfaceArray[ offset_face + 2 ] = vertexIndex + 2;\r\n\r\n\t\t\t\toffset_face += 3;\r\n\r\n\t\t\t\tlineArray[ offset_line ]     = vertexIndex;\r\n\t\t\t\tlineArray[ offset_line + 1 ] = vertexIndex + 1;\r\n\r\n\t\t\t\tlineArray[ offset_line + 2 ] = vertexIndex;\r\n\t\t\t\tlineArray[ offset_line + 3 ] = vertexIndex + 2;\r\n\r\n\t\t\t\tlineArray[ offset_line + 4 ] = vertexIndex + 1;\r\n\t\t\t\tlineArray[ offset_line + 5 ] = vertexIndex + 2;\r\n\r\n\t\t\t\toffset_line += 6;\r\n\r\n\t\t\t\tvertexIndex += 3;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\r\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, faceArray, hint );\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\r\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, lineArray, hint );\r\n\r\n\t\t}\r\n\r\n\t\tif ( customAttributes ) {\r\n\r\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tcustomAttribute = customAttributes[ i ];\r\n\r\n\t\t\t\tif ( ! customAttribute.__original.needsUpdate ) continue;\r\n\r\n\t\t\t\toffset_custom = 0;\r\n\t\t\t\toffset_customSrc = 0;\r\n\r\n\t\t\t\tif ( customAttribute.size === 1 ) {\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 3;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = value;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = value;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = value;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 3;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( customAttribute.size === 2 ) {\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 6;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value;\r\n\t\t\t\t\t\t\tv2 = value;\r\n\t\t\t\t\t\t\tv3 = value;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 6;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( customAttribute.size === 3 ) {\r\n\r\n\t\t\t\t\tvar pp;\r\n\r\n\t\t\t\t\tif ( customAttribute.type === 'c' ) {\r\n\r\n\t\t\t\t\t\tpp = [ 'r', 'g', 'b' ];\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tpp = [ 'x', 'y', 'z' ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 9;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value;\r\n\t\t\t\t\t\t\tv2 = value;\r\n\t\t\t\t\t\t\tv3 = value;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 9;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value[ 0 ];\r\n\t\t\t\t\t\t\tv2 = value[ 1 ];\r\n\t\t\t\t\t\t\tv3 = value[ 2 ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\r\n\r\n\t\t\t\t\t\t\toffset_custom += 9;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( customAttribute.size === 4 ) {\r\n\r\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\r\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\r\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 12;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value;\r\n\t\t\t\t\t\t\tv2 = value;\r\n\t\t\t\t\t\t\tv3 = value;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 12;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\r\n\r\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\r\n\r\n\t\t\t\t\t\t\tv1 = value[ 0 ];\r\n\t\t\t\t\t\t\tv2 = value[ 1 ];\r\n\t\t\t\t\t\t\tv3 = value[ 2 ];\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\r\n\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\r\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\r\n\r\n\t\t\t\t\t\t\toffset_custom += 12;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( dispose ) {\r\n\r\n\t\t\tdelete geometryGroup.__inittedArrays;\r\n\t\t\tdelete geometryGroup.__colorArray;\r\n\t\t\tdelete geometryGroup.__normalArray;\r\n\t\t\tdelete geometryGroup.__tangentArray;\r\n\t\t\tdelete geometryGroup.__uvArray;\r\n\t\t\tdelete geometryGroup.__uv2Array;\r\n\t\t\tdelete geometryGroup.__faceArray;\r\n\t\t\tdelete geometryGroup.__vertexArray;\r\n\t\t\tdelete geometryGroup.__lineArray;\r\n\t\t\tdelete geometryGroup.__skinIndexArray;\r\n\t\t\tdelete geometryGroup.__skinWeightArray;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tinitAttributes();\r\n\r\n\t\tif ( object.hasPositions && ! object.__webglVertexBuffer ) object.__webglVertexBuffer = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! object.__webglNormalBuffer ) object.__webglNormalBuffer = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! object.__webglUvBuffer ) object.__webglUvBuffer = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! object.__webglColorBuffer ) object.__webglColorBuffer = _gl.createBuffer();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglVertexBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglNormalBuffer );\r\n\r\n\t\t\tif ( material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tvar nx, ny, nz,\r\n\t\t\t\t\tnax, nbx, ncx, nay, nby, ncy, naz, nbz, ncz,\r\n\t\t\t\t\tnormalArray,\r\n\t\t\t\t\ti, il = object.count * 3;\r\n\r\n\t\t\t\tfor ( i = 0; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tnormalArray = object.normalArray;\r\n\r\n\t\t\t\t\tnax  = normalArray[ i ];\r\n\t\t\t\t\tnay  = normalArray[ i + 1 ];\r\n\t\t\t\t\tnaz  = normalArray[ i + 2 ];\r\n\r\n\t\t\t\t\tnbx  = normalArray[ i + 3 ];\r\n\t\t\t\t\tnby  = normalArray[ i + 4 ];\r\n\t\t\t\t\tnbz  = normalArray[ i + 5 ];\r\n\r\n\t\t\t\t\tncx  = normalArray[ i + 6 ];\r\n\t\t\t\t\tncy  = normalArray[ i + 7 ];\r\n\t\t\t\t\tncz  = normalArray[ i + 8 ];\r\n\r\n\t\t\t\t\tnx = ( nax + nbx + ncx ) / 3;\r\n\t\t\t\t\tny = ( nay + nby + ncy ) / 3;\r\n\t\t\t\t\tnz = ( naz + nbz + ncz ) / 3;\r\n\r\n\t\t\t\t\tnormalArray[ i ]   = nx;\r\n\t\t\t\t\tnormalArray[ i + 1 ] = ny;\r\n\t\t\t\t\tnormalArray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tnormalArray[ i + 3 ] = nx;\r\n\t\t\t\t\tnormalArray[ i + 4 ] = ny;\r\n\t\t\t\t\tnormalArray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tnormalArray[ i + 6 ] = nx;\r\n\t\t\t\t\tnormalArray[ i + 7 ] = ny;\r\n\t\t\t\t\tnormalArray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.normal );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglUvBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.uv );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglColorBuffer );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\t\t\tenableAttribute( program.attributes.color );\r\n\t\t\t_gl.vertexAttribPointer( program.attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.attributes;\r\n\t\tvar programAttributesKeys = program.attributesKeys;\r\n\r\n\t\tfor ( var i = 0, l = programAttributesKeys.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar key = programAttributesKeys[ i ];\r\n\t\t\tvar programAttribute = programAttributes[ key ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ key ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryAttribute.buffer );\r\n\r\n\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tif ( material.defaultAttributeValues[ key ].length === 2 ) {\r\n\r\n\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, material.defaultAttributeValues[ key ] );\r\n\r\n\t\t\t\t\t} else if ( material.defaultAttributeValues[ key ].length === 3 ) {\r\n\r\n\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, material.defaultAttributeValues[ key ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\tthis.renderBufferDirect = function ( camera, lights, fog, material, geometry, object ) {\r\n\r\n\t\tif ( material.visible === false ) return;\r\n\r\n\t\tupdateObject( object );\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false,\r\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\r\n\t\t\tgeometryProgram = 'direct_' + geometry.id + '_' + program.id + '_' + wireframeBit;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tinitAttributes();\r\n\r\n\t\t}\r\n\r\n\t\t// render mesh\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar mode = material.wireframe === true ? _gl.LINES : _gl.TRIANGLES;\r\n\r\n\t\t\tvar index = geometry.attributes.index;\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\t// indexed triangles\r\n\r\n\t\t\t\tvar type, size;\r\n\r\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\t\tsize = 4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\t\tsize = 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 );\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\r\n\t\t\t\t\t_this.info.render.faces += index.array.length / 3;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// if there is more than 1 chunk\r\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\r\n\t\t\t\t\t// even if geometry and materials didn't change\r\n\r\n\t\t\t\t\tupdateBuffers = true;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\r\n\r\n\t\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// render indexed triangles\r\n\r\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\r\n\t\t\t\t\t\t_this.info.render.faces += offsets[ i ].count / 3;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed triangles\r\n\r\n\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar position = geometry.attributes[ 'position' ];\r\n\r\n\t\t\t\t// render non-indexed triangles\r\n\r\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\r\n\r\n\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t_this.info.render.vertices += position.array.length / 3;\r\n\t\t\t\t_this.info.render.faces += position.array.length / 9;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t// render particles\r\n\r\n\t\t\tvar mode = _gl.POINTS;\r\n\r\n\t\t\tvar index = geometry.attributes.index;\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\t// indexed points\r\n\r\n\t\t\t\tvar type, size;\r\n\r\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\t\tsize = 4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\t\tsize = 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0);\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.points += index.array.length;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// if there is more than 1 chunk\r\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\r\n\t\t\t\t\t// even if geometry and materials didn't change\r\n\r\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\r\n\r\n\t\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// render indexed points\r\n\r\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.points += offsets[ i ].count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed points\r\n\r\n\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar position = geometry.attributes.position;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.points += position.array.length / 3;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t_gl.drawArrays( mode, offsets[ i ].index, offsets[ i ].count );\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.points += offsets[ i ].count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\r\n\r\n\t\t\tsetLineWidth( material.linewidth );\r\n\r\n\t\t\tvar index = geometry.attributes.index;\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\t// indexed lines\r\n\r\n\t\t\t\tvar type, size;\r\n\r\n\t\t\t\tif ( index.array instanceof Uint32Array ) {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\t\tsize = 4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\t\tsize = 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 ); // 2 bytes per Uint16Array\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// if there is more than 1 chunk\r\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\r\n\t\t\t\t\t// even if geometry and materials didn't change\r\n\r\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\r\n\r\n\t\t\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// render indexed lines\r\n\r\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size ); // 2 bytes per Uint16Array\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed lines\r\n\r\n\t\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar position = geometry.attributes.position;\r\n\t\t\t\tvar offsets = geometry.offsets;\r\n\r\n\t\t\t\tif ( offsets.length === 0 ) {\r\n\r\n\t\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\r\n\r\n\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t_this.info.render.vertices += position.array.length / 3;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t_gl.drawArrays( mode, offsets[ i ].index, offsets[ i ].count );\r\n\r\n\t\t\t\t\t\t_this.info.render.calls ++;\r\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.renderBuffer = function ( camera, lights, fog, material, geometryGroup, object ) {\r\n\r\n\t\tif ( material.visible === false ) return;\r\n\r\n\t\tupdateObject( object );\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\tvar attributes = program.attributes;\r\n\r\n\t\tvar updateBuffers = false,\r\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\r\n\t\t\tgeometryProgram = geometryGroup.id + '_' + program.id + '_' + wireframeBit;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tinitAttributes();\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tif ( ! material.morphTargets && attributes.position >= 0 ) {\r\n\r\n\t\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\r\n\t\t\t\tenableAttribute( attributes.position );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( object.morphTargetBase ) {\r\n\r\n\t\t\t\tsetupMorphTargets( material, geometryGroup, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\t// custom attributes\r\n\r\n\t\t\t// Use the per-geometryGroup custom attribute arrays which are setup in initMeshBuffers\r\n\r\n\t\t\tif ( geometryGroup.__webglCustomAttributesList ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = geometryGroup.__webglCustomAttributesList.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar attribute = geometryGroup.__webglCustomAttributesList[ i ];\r\n\r\n\t\t\t\t\tif ( attributes[ attribute.buffer.belongsToAttribute ] >= 0 ) {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, attribute.buffer );\r\n\t\t\t\t\t\tenableAttribute( attributes[ attribute.buffer.belongsToAttribute ] );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ attribute.buffer.belongsToAttribute ], attribute.size, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// colors\r\n\r\n\t\t\tif ( attributes.color >= 0 ) {\r\n\r\n\t\t\t\tif ( object.geometry.colors.length > 0 || object.geometry.faces.length > 0 ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\r\n\t\t\t\t\tenableAttribute( attributes.color );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\r\n\t\t\t\t\t_gl.vertexAttrib3fv( attributes.color, material.defaultAttributeValues.color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// normals\r\n\r\n\t\t\tif ( attributes.normal >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\r\n\t\t\t\tenableAttribute( attributes.normal );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// tangents\r\n\r\n\t\t\tif ( attributes.tangent >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\r\n\t\t\t\tenableAttribute( attributes.tangent );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.tangent, 4, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// uvs\r\n\r\n\t\t\tif ( attributes.uv >= 0 ) {\r\n\r\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 0 ] ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\r\n\t\t\t\t\tenableAttribute( attributes.uv );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\r\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv, material.defaultAttributeValues.uv );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attributes.uv2 >= 0 ) {\r\n\r\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 1 ] ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\r\n\t\t\t\t\tenableAttribute( attributes.uv2 );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv2, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\r\n\r\n\r\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv2, material.defaultAttributeValues.uv2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.skinning &&\r\n\t\t\t\t attributes.skinIndex >= 0 && attributes.skinWeight >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\r\n\t\t\t\tenableAttribute( attributes.skinIndex );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinIndex, 4, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\r\n\t\t\t\tenableAttribute( attributes.skinWeight );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinWeight, 4, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// line distances\r\n\r\n\t\t\tif ( attributes.lineDistance >= 0 ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglLineDistanceBuffer );\r\n\t\t\t\tenableAttribute( attributes.lineDistance );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.lineDistance, 1, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t\t// render mesh\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar type = geometryGroup.__typeArray === Uint32Array ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\r\n\r\n\t\t\t// wireframe\r\n\r\n\t\t\tif ( material.wireframe ) {\r\n\r\n\t\t\t\tsetLineWidth( material.wireframeLinewidth );\r\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\r\n\t\t\t\t_gl.drawElements( _gl.LINES, geometryGroup.__webglLineCount, type, 0 );\r\n\r\n\t\t\t// triangles\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\r\n\t\t\t\t_gl.drawElements( _gl.TRIANGLES, geometryGroup.__webglFaceCount, type, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\t\t\t_this.info.render.vertices += geometryGroup.__webglFaceCount;\r\n\t\t\t_this.info.render.faces += geometryGroup.__webglFaceCount / 3;\r\n\r\n\t\t// render lines\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\r\n\r\n\t\t\tsetLineWidth( material.linewidth );\r\n\r\n\t\t\t_gl.drawArrays( mode, 0, geometryGroup.__webglLineCount );\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\r\n\t\t// render particles\r\n\r\n\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, geometryGroup.__webglParticleCount );\r\n\r\n\t\t\t_this.info.render.calls ++;\r\n\t\t\t_this.info.render.points += geometryGroup.__webglParticleCount;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction initAttributes() {\r\n\r\n\t\tfor ( var i = 0, l = _newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\t_newAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction enableAttribute( attribute ) {\r\n\r\n\t\t_newAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( _enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\t_gl.enableVertexAttribArray( attribute );\r\n\t\t\t_enabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disableUnusedAttributes() {\r\n\r\n\t\tfor ( var i = 0, l = _enabledAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( _enabledAttributes[ i ] !== _newAttributes[ i ] ) {\r\n\r\n\t\t\t\t_gl.disableVertexAttribArray( i );\r\n\t\t\t\t_enabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupMorphTargets ( material, geometryGroup, object ) {\r\n\r\n\t\t// set base\r\n\r\n\t\tvar attributes = material.program.attributes;\r\n\r\n\t\tif ( object.morphTargetBase !== - 1 && attributes.position >= 0 ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ object.morphTargetBase ] );\r\n\t\t\tenableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t} else if ( attributes.position >= 0 ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\r\n\t\t\tenableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.morphTargetForcedOrder.length ) {\r\n\r\n\t\t\t// set forced order\r\n\r\n\t\t\tvar m = 0;\r\n\t\t\tvar order = object.morphTargetForcedOrder;\r\n\t\t\tvar influences = object.morphTargetInfluences;\r\n\r\n\t\t\tvar attribute;\r\n\r\n\t\t\twhile ( m < material.numSupportedMorphTargets && m < order.length ) {\r\n\r\n\t\t\t\tattribute = attributes[ 'morphTarget' + m ];\r\n\r\n\t\t\t\tif ( attribute >= 0 ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ order[ m ] ] );\r\n\t\t\t\t\tenableAttribute( attribute );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattribute = attributes[ 'morphNormal' + m ];\r\n\r\n\t\t\t\tif ( attribute >= 0 && material.morphNormals ) {\r\n\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ order[ m ] ] );\r\n\t\t\t\t\tenableAttribute( attribute );\r\n\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ order[ m ] ];\r\n\r\n\t\t\t\tm ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// find the most influencing\r\n\r\n\t\t\tvar activeInfluenceIndices = [];\r\n\t\t\tvar influences = object.morphTargetInfluences;\r\n\r\n\t\t\tfor ( var i = 0, il = influences.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar influence = influences[ i ];\r\n\r\n\t\t\t\tactiveInfluenceIndices.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( activeInfluenceIndices.length > material.numSupportedMorphTargets ) {\r\n\r\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\r\n\t\t\t\tactiveInfluenceIndices.length = material.numSupportedMorphTargets;\r\n\r\n\t\t\t} else if ( activeInfluenceIndices.length > material.numSupportedMorphNormals ) {\r\n\r\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\r\n\r\n\t\t\t} else if ( activeInfluenceIndices.length === 0 ) {\r\n\r\n\t\t\t\tactiveInfluenceIndices.push( [ 0, 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar attribute;\r\n\r\n\t\t\tfor ( var m = 0, ml = material.numSupportedMorphTargets; m < ml; m ++ ) {\r\n\r\n\t\t\t\tif ( activeInfluenceIndices[ m ] ) {\r\n\r\n\t\t\t\t\tvar influenceIndex = activeInfluenceIndices[ m ][ 1 ];\r\n\r\n\t\t\t\t\tattribute = attributes[ 'morphTarget' + m ];\r\n\r\n\t\t\t\t\tif ( attribute >= 0 ) {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ influenceIndex ] );\r\n\t\t\t\t\t\tenableAttribute( attribute );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tattribute = attributes[ 'morphNormal' + m ];\r\n\r\n\t\t\t\t\tif ( attribute >= 0 && material.morphNormals ) {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ influenceIndex ] );\r\n\t\t\t\t\t\tenableAttribute( attribute );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ influenceIndex ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphTarget\" + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphNormal\" + m ], 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// load updated influences uniform\r\n\r\n\t\tif ( material.program.uniforms.morphTargetInfluences !== null ) {\r\n\r\n\t\t\t_gl.uniform1fv( material.program.uniforms.morphTargetInfluences, object.__webglMorphTargetInfluences );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction numericalSort ( a, b ) {\r\n\r\n\t\treturn b[ 0 ] - a[ 0 ];\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === undefined ) camera.updateMatrixWorld();\r\n\r\n\t\t// update Skeleton objects\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\t\topaqueObjects.length = 0;\r\n\t\ttransparentObjects.length = 0;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\tprojectObject( scene );\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (pre pass)\r\n\r\n\t\tshadowMapPlugin.render( scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\t_this.info.render.calls = 0;\r\n\t\t_this.info.render.vertices = 0;\r\n\t\t_this.info.render.faces = 0;\r\n\t\t_this.info.render.points = 0;\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t// set matrices for immediate objects\r\n\r\n\t\tfor ( var i = 0, il = _webglObjectsImmediate.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar webglObject = _webglObjectsImmediate[ i ];\r\n\t\t\tvar object = webglObject.object;\r\n\r\n\t\t\tif ( object.visible ) {\r\n\r\n\t\t\t\tsetupMatrices( object, camera );\r\n\r\n\t\t\t\tunrollImmediateBufferMaterial( webglObject );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar material = scene.overrideMaterial;\r\n\r\n\t\t\tthis.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tthis.setDepthTest( material.depthTest );\r\n\t\t\tthis.setDepthWrite( material.depthWrite );\r\n\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, true, material );\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\r\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, '', camera, lights, fog, false, material );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar material = null;\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tthis.setBlending( THREE.NoBlending );\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, false, material );\r\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'opaque', camera, lights, fog, false, material );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\r\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'transparent', camera, lights, fog, true, material );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tthis.setDepthTest( true );\r\n\t\tthis.setDepthWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction projectObject( object ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object instanceof THREE.Scene || object instanceof THREE.Group ) {\r\n\r\n\t\t\t// skip\r\n\r\n\t\t} else {\r\n\r\n\t\t\tinitObject( object );\r\n\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\t\tlights.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tsprites.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\t\tlensFlares.push( object );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar webglObjects = _webglObjects[ object.id ];\r\n\r\n\t\t\t\tif ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar webglObject = webglObjects[i];\r\n\r\n\t\t\t\t\t\tunrollBufferMaterial( webglObject );\r\n\r\n\t\t\t\t\t\twebglObject.render = true;\r\n\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t\t\twebglObject.z = _vector3.z;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( object.children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, lights, fog, useBlending, overrideMaterial ) {\r\n\r\n\t\tvar material;\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar webglObject = renderList[ i ];\r\n\r\n\t\t\tvar object = webglObject.object;\r\n\t\t\tvar buffer = webglObject.buffer;\r\n\r\n\t\t\tsetupMatrices( object, camera );\r\n\r\n\t\t\tif ( overrideMaterial ) {\r\n\r\n\t\t\t\tmaterial = overrideMaterial;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial = webglObject.material;\r\n\r\n\t\t\t\tif ( ! material ) continue;\r\n\r\n\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\r\n\t\t\t\t_this.setDepthTest( material.depthTest );\r\n\t\t\t\t_this.setDepthWrite( material.depthWrite );\r\n\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.setMaterialFaces( material );\r\n\r\n\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, material, buffer, object );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.renderBuffer( camera, lights, fog, material, buffer, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjectsImmediate ( renderList, materialType, camera, lights, fog, useBlending, overrideMaterial ) {\r\n\r\n\t\tvar material;\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar webglObject = renderList[ i ];\r\n\t\t\tvar object = webglObject.object;\r\n\r\n\t\t\tif ( object.visible ) {\r\n\r\n\t\t\t\tif ( overrideMaterial ) {\r\n\r\n\t\t\t\t\tmaterial = overrideMaterial;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmaterial = webglObject[ materialType ];\r\n\r\n\t\t\t\t\tif ( ! material ) continue;\r\n\r\n\t\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\r\n\t\t\t\t\t_this.setDepthTest( material.depthTest );\r\n\t\t\t\t\t_this.setDepthWrite( material.depthWrite );\r\n\t\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_this.renderImmediateObject( camera, lights, fog, material, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.renderImmediateObject = function ( camera, lights, fog, material, object ) {\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\r\n\t\t_this.setMaterialFaces( material );\r\n\r\n\t\tif ( object.immediateRenderCallback ) {\r\n\r\n\t\t\tobject.immediateRenderCallback( program, _gl, _frustum );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tobject.render( function ( object ) { _this.renderBufferImmediate( object, program, material ); } );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction unrollImmediateBufferMaterial ( globject ) {\r\n\r\n\t\tvar object = globject.object,\r\n\t\t\tmaterial = object.material;\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tglobject.transparent = material;\r\n\t\t\tglobject.opaque = null;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tglobject.opaque = material;\r\n\t\t\tglobject.transparent = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction unrollBufferMaterial ( globject ) {\r\n\r\n\t\tvar object = globject.object;\r\n\t\tvar buffer = globject.buffer;\r\n\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar material = object.material;\r\n\r\n\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\r\n\t\t\tvar materialIndex = geometry instanceof THREE.BufferGeometry ? 0 : buffer.materialIndex;\r\n\r\n\t\t\tmaterial = material.materials[ materialIndex ];\r\n\r\n\t\t\tglobject.material = material;\r\n\r\n\t\t\tif ( material.transparent ) {\r\n\r\n\t\t\t\ttransparentObjects.push( globject );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\topaqueObjects.push( globject );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material ) {\r\n\r\n\t\t\tglobject.material = material;\r\n\r\n\t\t\tif ( material.transparent ) {\r\n\r\n\t\t\t\ttransparentObjects.push( globject );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\topaqueObjects.push( globject );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initObject( object ) {\r\n\r\n\t\tif ( object.__webglInit === undefined ) {\r\n\r\n\t\t\tobject.__webglInit = true;\r\n\t\t\tobject._modelViewMatrix = new THREE.Matrix4();\r\n\t\t\tobject._normalMatrix = new THREE.Matrix3();\r\n\r\n\t\t\tobject.addEventListener( 'removed', onObjectRemoved );\r\n\r\n\t\t}\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometry === undefined ) {\r\n\r\n\t\t\t// ImmediateRenderObject\r\n\r\n\t\t} else if ( geometry.__webglInit === undefined ) {\r\n\r\n\t\t\tgeometry.__webglInit = true;\r\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t_this.info.memory.geometries ++;\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\tinitGeometryGroups( object, geometry );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\r\n\r\n\t\t\t\t\tcreateLineBuffers( geometry );\r\n\t\t\t\t\tinitLineBuffers( geometry, object );\r\n\r\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\r\n\t\t\t\t\tgeometry.lineDistancesNeedUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\r\n\r\n\t\t\t\t\tcreateParticleBuffers( geometry );\r\n\t\t\t\t\tinitParticleBuffers( geometry, object );\r\n\r\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.__webglActive === undefined) {\r\n\r\n\t\t\tobject.__webglActive = true;\r\n\r\n\t\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t\taddBuffer( _webglObjects, geometry, object );\r\n\r\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\taddBuffer( _webglObjects, geometryGroupsList[ i ], object );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.Line || object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\t\taddBuffer( _webglObjects, geometry, object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\r\n\r\n\t\t\t\taddBufferImmediate( _webglObjectsImmediate, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Geometry splitting\r\n\r\n\tvar geometryGroups = {};\r\n\tvar geometryGroupCounter = 0;\r\n\r\n\tfunction makeGroups( geometry, usesFaceMaterial ) {\r\n\r\n\t\tvar maxVerticesInGroup = extensions.get( 'OES_element_index_uint' ) ? 4294967296 : 65535;\r\n\r\n\t\tvar groupHash, hash_map = {};\r\n\r\n\t\tvar numMorphTargets = geometry.morphTargets.length;\r\n\t\tvar numMorphNormals = geometry.morphNormals.length;\r\n\r\n\t\tvar group;\r\n\t\tvar groups = {};\r\n\t\tvar groupsList = [];\r\n\r\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = geometry.faces[ f ];\r\n\t\t\tvar materialIndex = usesFaceMaterial ? face.materialIndex : 0;\r\n\r\n\t\t\tif ( ! ( materialIndex in hash_map ) ) {\r\n\r\n\t\t\t\thash_map[ materialIndex ] = { hash: materialIndex, counter: 0 };\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\r\n\r\n\t\t\tif ( ! ( groupHash in groups ) ) {\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tid: geometryGroupCounter ++,\r\n\t\t\t\t\tfaces3: [],\r\n\t\t\t\t\tmaterialIndex: materialIndex,\r\n\t\t\t\t\tvertices: 0,\r\n\t\t\t\t\tnumMorphTargets: numMorphTargets,\r\n\t\t\t\t\tnumMorphNormals: numMorphNormals\r\n\t\t\t\t};\r\n\r\n\t\t\t\tgroups[ groupHash ] = group;\r\n\t\t\t\tgroupsList.push( group );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( groups[ groupHash ].vertices + 3 > maxVerticesInGroup ) {\r\n\r\n\t\t\t\thash_map[ materialIndex ].counter += 1;\r\n\t\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\r\n\r\n\t\t\t\tif ( ! ( groupHash in groups ) ) {\r\n\r\n\t\t\t\t\tgroup = {\r\n\t\t\t\t\t\tid: geometryGroupCounter ++,\r\n\t\t\t\t\t\tfaces3: [],\r\n\t\t\t\t\t\tmaterialIndex: materialIndex,\r\n\t\t\t\t\t\tvertices: 0,\r\n\t\t\t\t\t\tnumMorphTargets: numMorphTargets,\r\n\t\t\t\t\t\tnumMorphNormals: numMorphNormals\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tgroups[ groupHash ] = group;\r\n\t\t\t\t\tgroupsList.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroups[ groupHash ].faces3.push( f );\r\n\t\t\tgroups[ groupHash ].vertices += 3;\r\n\r\n\t\t}\r\n\r\n\t\treturn groupsList;\r\n\r\n\t}\r\n\r\n\tfunction initGeometryGroups( object, geometry ) {\r\n\r\n\t\tvar material = object.material, addBuffers = false;\r\n\r\n\t\tif ( geometryGroups[ geometry.id ] === undefined || geometry.groupsNeedUpdate === true ) {\r\n\r\n\t\t\tdelete _webglObjects[ object.id ];\r\n\r\n\t\t\tgeometryGroups[ geometry.id ] = makeGroups( geometry, material instanceof THREE.MeshFaceMaterial );\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t// create separate VBOs per geometry chunk\r\n\r\n\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar geometryGroup = geometryGroupsList[ i ];\r\n\r\n\t\t\t// initialise VBO on the first access\r\n\r\n\t\t\tif ( geometryGroup.__webglVertexBuffer === undefined ) {\r\n\r\n\t\t\t\tcreateMeshBuffers( geometryGroup );\r\n\t\t\t\tinitMeshBuffers( geometryGroup, object );\r\n\r\n\t\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\t\t\tgeometry.morphTargetsNeedUpdate = true;\r\n\t\t\t\tgeometry.elementsNeedUpdate = true;\r\n\t\t\t\tgeometry.uvsNeedUpdate = true;\r\n\t\t\t\tgeometry.normalsNeedUpdate = true;\r\n\t\t\t\tgeometry.tangentsNeedUpdate = true;\r\n\t\t\t\tgeometry.colorsNeedUpdate = true;\r\n\r\n\t\t\t\taddBuffers = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\taddBuffers = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( addBuffers || object.__webglActive === undefined ) {\r\n\r\n\t\t\t\taddBuffer( _webglObjects, geometryGroup, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tobject.__webglActive = true;\r\n\r\n\t}\r\n\r\n\tfunction addBuffer( objlist, buffer, object ) {\r\n\r\n\t\tvar id = object.id;\r\n\t\tobjlist[id] = objlist[id] || [];\r\n\t\tobjlist[id].push(\r\n\t\t\t{\r\n\t\t\t\tid: id,\r\n\t\t\t\tbuffer: buffer,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tmaterial: null,\r\n\t\t\t\tz: 0\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t};\r\n\r\n\tfunction addBufferImmediate( objlist, object ) {\r\n\r\n\t\tobjlist.push(\r\n\t\t\t{\r\n\t\t\t\tid: null,\r\n\t\t\t\tobject: object,\r\n\t\t\t\topaque: null,\r\n\t\t\t\ttransparent: null,\r\n\t\t\t\tz: 0\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t};\r\n\r\n\t// Objects updates\r\n\r\n\tfunction updateObject( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar attributesKeys = geometry.attributesKeys;\r\n\r\n\t\t\tfor ( var i = 0, l = attributesKeys.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar key = attributesKeys[ i ];\r\n\t\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\t\tif ( attribute.buffer === undefined ) {\r\n\r\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( attribute.needsUpdate === true ) {\r\n\r\n\t\t\t\t\tvar bufferType = ( key === 'index' ) ? _gl.ELEMENT_ARRAY_BUFFER : _gl.ARRAY_BUFFER;\r\n\r\n\t\t\t\t\t_gl.bindBuffer( bufferType, attribute.buffer );\r\n\t\t\t\t\t_gl.bufferData( bufferType, attribute.array, _gl.STATIC_DRAW );\r\n\r\n\t\t\t\t\tattribute.needsUpdate = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\t// check all geometry groups\r\n\r\n\t\t\tif ( geometry.groupsNeedUpdate === true ) {\r\n\r\n\t\t\t\tinitGeometryGroups( object, geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\r\n\r\n\t\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\r\n\t\t\t\tvar material = getBufferMaterial( object, geometryGroup );\r\n\r\n\t\t\t\tif ( geometry.groupsNeedUpdate === true ) {\r\n\r\n\t\t\t\t\tinitMeshBuffers( geometryGroup, object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\r\n\r\n\t\t\t\tif ( geometry.verticesNeedUpdate || geometry.morphTargetsNeedUpdate || geometry.elementsNeedUpdate ||\r\n\t\t\t\t\t geometry.uvsNeedUpdate || geometry.normalsNeedUpdate ||\r\n\t\t\t\t\t geometry.colorsNeedUpdate || geometry.tangentsNeedUpdate || customAttributesDirty ) {\r\n\r\n\t\t\t\t\tsetMeshBuffers( geometryGroup, object, _gl.DYNAMIC_DRAW, ! geometry.dynamic, material );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.morphTargetsNeedUpdate = false;\r\n\t\t\tgeometry.elementsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.tangentsNeedUpdate = false;\r\n\r\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar material = getBufferMaterial( object, geometry );\r\n\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\r\n\r\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || geometry.lineDistancesNeedUpdate || customAttributesDirty ) {\r\n\r\n\t\t\t\tsetLineBuffers( geometry, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\r\n\r\n\t\t} else if ( object instanceof THREE.PointCloud ) {\r\n\r\n\t\t\tvar material = getBufferMaterial( object, geometry );\r\n\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\r\n\r\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || customAttributesDirty ) {\r\n\r\n\t\t\t\tsetParticleBuffers( geometry, _gl.DYNAMIC_DRAW, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Objects updates - custom attributes check\r\n\r\n\tfunction areCustomAttributesDirty( material ) {\r\n\r\n\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\tif ( material.attributes[ name ].needsUpdate ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction clearCustomAttributes( material ) {\r\n\r\n\t\tfor ( var name in material.attributes ) {\r\n\r\n\t\t\tmaterial.attributes[ name ].needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Objects removal\r\n\r\n\tfunction removeObject( object ) {\r\n\r\n\t\tif ( object instanceof THREE.Mesh  ||\r\n\t\t\t object instanceof THREE.PointCloud ||\r\n\t\t\t object instanceof THREE.Line ) {\r\n\r\n\t\t\tdelete _webglObjects[ object.id ];\r\n\r\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\r\n\r\n\t\t\tremoveInstances( _webglObjectsImmediate, object );\r\n\r\n\t\t}\r\n\r\n\t\tdelete object.__webglInit;\r\n\t\tdelete object._modelViewMatrix;\r\n\t\tdelete object._normalMatrix;\r\n\r\n\t\tdelete object.__webglActive;\r\n\r\n\t}\r\n\r\n\tfunction removeInstances( objlist, object ) {\r\n\r\n\t\tfor ( var o = objlist.length - 1; o >= 0; o -- ) {\r\n\r\n\t\t\tif ( objlist[ o ].object === object ) {\r\n\r\n\t\t\t\tobjlist.splice( o, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Materials\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointCloudMaterial: 'particle_basic'\r\n\t};\r\n\r\n\tfunction initMaterial( material, lights, fog, object ) {\r\n\r\n\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tvar shader = THREE.ShaderLib[ shaderID ];\r\n\r\n\t\t\tmaterial.__webglShader = {\r\n\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterial.__webglShader = {\r\n\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxLightCount = allocateLights( lights );\r\n\t\tvar maxShadows = allocateShadows( lights );\r\n\t\tvar maxBones = allocateBones( object );\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tprecision: _precision,\r\n\t\t\tsupportsVertexTextures: _supportsVertexTextures,\r\n\r\n\t\t\tmap: !! material.map,\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: _logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: _this.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: _this.maxMorphNormals,\r\n\r\n\t\t\tmaxDirLights: maxLightCount.directional,\r\n\t\t\tmaxPointLights: maxLightCount.point,\r\n\t\t\tmaxSpotLights: maxLightCount.spot,\r\n\t\t\tmaxHemiLights: maxLightCount.hemi,\r\n\r\n\t\t\tmaxShadows: maxShadows,\r\n\t\t\tshadowMapEnabled: _this.shadowMapEnabled && object.receiveShadow && maxShadows > 0,\r\n\t\t\tshadowMapType: _this.shadowMapType,\r\n\t\t\tshadowMapDebug: _this.shadowMapDebug,\r\n\t\t\tshadowMapCascade: _this.shadowMapCascade,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tmetal: material.metal,\r\n\t\t\twrapAround: material.wrapAround,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide\r\n\r\n\t\t};\r\n\r\n\t\t// Generate code\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tchunks.push( shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\tchunks.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tchunks.push( name );\r\n\t\t\t\tchunks.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in parameters ) {\r\n\r\n\t\t\tchunks.push( name );\r\n\t\t\tchunks.push( parameters[ name ] );\r\n\r\n\t\t}\r\n\r\n\t\tvar code = chunks.join();\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\r\n\t\tfor ( var p = 0, pl = _programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = _programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\tprogram.usedTimes ++;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( _this, code, material, parameters );\r\n\t\t\t_programs.push( program );\r\n\r\n\t\t\t_this.info.memory.programs = _programs.length;\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.program = program;\r\n\r\n\t\tvar attributes = program.attributes;\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tvar id, base = 'morphTarget';\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tid = base + i;\r\n\r\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tvar id, base = 'morphNormal';\r\n\r\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tid = base + i;\r\n\r\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.uniformsList = [];\r\n\r\n\t\tfor ( var u in material.__webglShader.uniforms ) {\r\n\r\n\t\t\tvar location = material.program.uniforms[ u ];\r\n\r\n\t\t\tif ( location ) {\r\n\t\t\t\tmaterial.uniformsList.push( [ material.__webglShader.uniforms[ u ], location ] );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, lights, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tif ( material.needsUpdate ) {\r\n\r\n\t\t\tif ( material.program ) deallocateMaterial( material );\r\n\r\n\t\t\tinitMaterial( material, lights, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tif ( ! object.__webglMorphTargetInfluences ) {\r\n\r\n\t\t\t\tobject.__webglMorphTargetInfluences = new Float32Array( _this.maxMorphTargets );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = material.program,\r\n\t\t\tp_uniforms = program.uniforms,\r\n\t\t\tm_uniforms = material.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\tif ( _currentMaterialId === -1 ) refreshLights = true;\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\t\tif ( _logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tif ( p_uniforms.cameraPosition !== null ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tif ( p_uniforms.viewMatrix !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== null ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== null ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _supportsBoneTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneTexture !== null ) {\r\n\r\n\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== null ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material.lights ) {\r\n\r\n\t\t\t\tif ( _lightsNeedUpdate ) {\r\n\r\n\t\t\t\t\trefreshLights = true;\r\n\t\t\t\t\tsetupLights( lights );\r\n\t\t\t\t\t_lightsNeedUpdate = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( refreshLights ) {\r\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\r\n\r\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load common uniforms\r\n\r\n\t\t\tloadUniformsGeneric( material.uniformsList );\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsMatrices( p_uniforms, object );\r\n\r\n\t\tif ( p_uniforms.modelMatrix !== null ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\tuniforms.diffuse.value.copyGammaToLinear( material.color );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t//  1. color map\r\n\t\t//  2. specular map\r\n\t\t//  3. normal map\r\n\t\t//  4. bump map\r\n\t\t//  5. alpha map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t//uniforms.reflectivity.value = material.reflectivity * material.reflectivity;\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsParticle ( uniforms, material ) {\r\n\r\n\t\tuniforms.psColor.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size;\r\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.shininess.value = material.shininess;\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\r\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\r\n\t\t\tuniforms.specular.value.copyGammaToLinear( material.specular );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.ambient.value = material.ambient;\r\n\t\t\tuniforms.emissive.value = material.emissive;\r\n\t\t\tuniforms.specular.value = material.specular;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.wrapAround ) {\r\n\r\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert ( uniforms, material ) {\r\n\r\n\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\r\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms.ambient.value = material.ambient;\r\n\t\t\tuniforms.emissive.value = material.emissive;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.wrapAround ) {\r\n\r\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLights ( uniforms, lights ) {\r\n\r\n\t\tuniforms.ambientLightColor.value = lights.ambient;\r\n\r\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\r\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\r\n\r\n\t\tuniforms.pointLightColor.value = lights.point.colors;\r\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\r\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\r\n\r\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\r\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\r\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\r\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\r\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\r\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\r\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\r\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, boolean ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = boolean;\r\n\r\n\t\tuniforms.directionalLightColor.needsUpdate = boolean;\r\n\t\tuniforms.directionalLightDirection.needsUpdate = boolean;\r\n\r\n\t\tuniforms.pointLightColor.needsUpdate = boolean;\r\n\t\tuniforms.pointLightPosition.needsUpdate = boolean;\r\n\t\tuniforms.pointLightDistance.needsUpdate = boolean;\r\n\r\n\t\tuniforms.spotLightColor.needsUpdate = boolean;\r\n\t\tuniforms.spotLightPosition.needsUpdate = boolean;\r\n\t\tuniforms.spotLightDistance.needsUpdate = boolean;\r\n\t\tuniforms.spotLightDirection.needsUpdate = boolean;\r\n\t\tuniforms.spotLightAngleCos.needsUpdate = boolean;\r\n\t\tuniforms.spotLightExponent.needsUpdate = boolean;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = boolean;\r\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = boolean;\r\n\t\tuniforms.hemisphereLightDirection.needsUpdate = boolean;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\r\n\r\n\t\tif ( uniforms.shadowMatrix ) {\r\n\r\n\t\t\tvar j = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar light = lights[ i ];\r\n\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) ) {\r\n\r\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\r\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\r\n\r\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\r\n\r\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\r\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\r\n\r\n\t\t\t\t\tj ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Uniforms (load to GPU)\r\n\r\n\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\r\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object._modelViewMatrix.elements );\r\n\r\n\t\tif ( uniforms.normalMatrix ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object._normalMatrix.elements );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= _maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + _maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction loadUniformsGeneric ( uniforms ) {\r\n\r\n\t\tvar texture, textureUnit, offset;\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\r\n\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\r\n\t\t\tvar type = uniform.type;\r\n\t\t\tvar value = uniform.value;\r\n\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase '1i':\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1f':\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2f':\r\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3f':\r\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4f':\r\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1iv':\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3iv':\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1fv':\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2fv':\r\n\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3fv':\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4fv':\r\n\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tcase 'i':\r\n\r\n\t\t\t\t\t// single integer\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'f':\r\n\r\n\t\t\t\t\t// single float\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2':\r\n\r\n\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3':\r\n\r\n\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4':\r\n\r\n\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'c':\r\n\r\n\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv1':\r\n\r\n\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv':\r\n\r\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv1':\r\n\r\n\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv':\r\n\r\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector2\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\toffset = i * 2;\r\n\r\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\toffset = i * 3;\r\n\r\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\toffset = i * 4;\r\n\r\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\tuniform._array[ offset + 3 ] = value[ i ].w;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3':\r\n\r\n\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4':\r\n\r\n\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 't':\r\n\r\n\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\r\n\t\t\t\t\ttexture = value;\r\n\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\r\n\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t   ( texture.image instanceof Array && texture.image.length === 6 ) ) { // CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tv':\r\n\r\n\t\t\t\t\t// array of THREE.Texture (2d)\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = [];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupMatrices ( object, camera ) {\r\n\r\n\t\tobject._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\tobject._normalMatrix.getNormalMatrix( object._modelViewMatrix );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setColorGamma( array, offset, color, intensitySq ) {\r\n\r\n\t\tarray[ offset ]     = color.r * color.r * intensitySq;\r\n\t\tarray[ offset + 1 ] = color.g * color.g * intensitySq;\r\n\t\tarray[ offset + 2 ] = color.b * color.b * intensitySq;\r\n\r\n\t}\r\n\r\n\tfunction setColorLinear( array, offset, color, intensity ) {\r\n\r\n\t\tarray[ offset ]     = color.r * intensity;\r\n\t\tarray[ offset + 1 ] = color.g * intensity;\r\n\t\tarray[ offset + 2 ] = color.b * intensity;\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights ) {\r\n\r\n\t\tvar l, ll, light, n,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor, skyColor, groundColor,\r\n\t\tintensity,  intensitySq,\r\n\t\tposition,\r\n\t\tdistance,\r\n\r\n\t\tzlights = _lights,\r\n\r\n\t\tdirColors = zlights.directional.colors,\r\n\t\tdirPositions = zlights.directional.positions,\r\n\r\n\t\tpointColors = zlights.point.colors,\r\n\t\tpointPositions = zlights.point.positions,\r\n\t\tpointDistances = zlights.point.distances,\r\n\r\n\t\tspotColors = zlights.spot.colors,\r\n\t\tspotPositions = zlights.spot.positions,\r\n\t\tspotDistances = zlights.spot.distances,\r\n\t\tspotDirections = zlights.spot.directions,\r\n\t\tspotAnglesCos = zlights.spot.anglesCos,\r\n\t\tspotExponents = zlights.spot.exponents,\r\n\r\n\t\themiSkyColors = zlights.hemi.skyColors,\r\n\t\themiGroundColors = zlights.hemi.groundColors,\r\n\t\themiPositions = zlights.hemi.positions,\r\n\r\n\t\tdirLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0,\r\n\r\n\t\tdirCount = 0,\r\n\t\tpointCount = 0,\r\n\t\tspotCount = 0,\r\n\t\themiCount = 0,\r\n\r\n\t\tdirOffset = 0,\r\n\t\tpointOffset = 0,\r\n\t\tspotOffset = 0,\r\n\t\themiOffset = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow ) continue;\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tr += color.r * color.r;\r\n\t\t\t\t\tg += color.g * color.g;\r\n\t\t\t\t\tb += color.b * color.b;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tr += color.r;\r\n\t\t\t\t\tg += color.g;\r\n\t\t\t\t\tb += color.b;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tdirCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.normalize();\r\n\r\n\t\t\t\tdirOffset = dirLength * 3;\r\n\r\n\t\t\t\tdirPositions[ dirOffset ]     = _direction.x;\r\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\r\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tsetColorGamma( dirColors, dirOffset, color, intensity * intensity );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdirLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tpointCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tpointOffset = pointLength * 3;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tsetColorGamma( pointColors, pointOffset, color, intensity * intensity );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\r\n\r\n\t\t\t\tpointPositions[ pointOffset ]     = _vector3.x;\r\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\r\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\r\n\r\n\t\t\t\tpointDistances[ pointLength ] = distance;\r\n\r\n\t\t\t\tpointLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tspotCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tspotOffset = spotLength * 3;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tsetColorGamma( spotColors, spotOffset, color, intensity * intensity );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\r\n\t\t\t\tspotPositions[ spotOffset ]     = _direction.x;\r\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tspotDistances[ spotLength ] = distance;\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.normalize();\r\n\r\n\t\t\t\tspotDirections[ spotOffset ]     = _direction.x;\r\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\r\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\r\n\r\n\t\t\t\tspotLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\themiCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_direction.normalize();\r\n\r\n\t\t\t\themiOffset = hemiLength * 3;\r\n\r\n\t\t\t\themiPositions[ hemiOffset ]     = _direction.x;\r\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\r\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tskyColor = light.color;\r\n\t\t\t\tgroundColor = light.groundColor;\r\n\r\n\t\t\t\tif ( _this.gammaInput ) {\r\n\r\n\t\t\t\t\tintensitySq = intensity * intensity;\r\n\r\n\t\t\t\t\tsetColorGamma( hemiSkyColors, hemiOffset, skyColor, intensitySq );\r\n\t\t\t\t\tsetColorGamma( hemiGroundColors, hemiOffset, groundColor, intensitySq );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\r\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\themiLength += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// null eventual remains from removed lights\r\n\t\t// (this is to avoid if in shader)\r\n\r\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\r\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\r\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\r\n\r\n\t\tzlights.directional.length = dirLength;\r\n\t\tzlights.point.length = pointLength;\r\n\t\tzlights.spot.length = spotLength;\r\n\t\tzlights.hemi.length = hemiLength;\r\n\r\n\t\tzlights.ambient[ 0 ] = r;\r\n\t\tzlights.ambient[ 1 ] = g;\r\n\t\tzlights.ambient[ 2 ] = b;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\r\n\t\t\t_gl.disable( _gl.CULL_FACE );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.enable( _gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setMaterialFaces = function ( material ) {\r\n\r\n\t\tvar doubleSided = material.side === THREE.DoubleSide;\r\n\t\tvar flipSided = material.side === THREE.BackSide;\r\n\r\n\t\tif ( _oldDoubleSided !== doubleSided ) {\r\n\r\n\t\t\tif ( doubleSided ) {\r\n\r\n\t\t\t\t_gl.disable( _gl.CULL_FACE );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.enable( _gl.CULL_FACE );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldDoubleSided = doubleSided;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _oldFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tif ( _oldDepthTest !== depthTest ) {\r\n\r\n\t\t\tif ( depthTest ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.DEPTH_TEST );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.disable( _gl.DEPTH_TEST );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldDepthTest = depthTest;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\tif ( _oldDepthWrite !== depthWrite ) {\r\n\r\n\t\t\t_gl.depthMask( depthWrite );\r\n\t\t\t_oldDepthWrite = depthWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setLineWidth ( width ) {\r\n\r\n\t\twidth *= pixelRatio;\r\n\r\n\t\tif ( width !== _oldLineWidth ) {\r\n\r\n\t\t\t_gl.lineWidth( width );\r\n\r\n\t\t\t_oldLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setPolygonOffset ( polygonoffset, factor, units ) {\r\n\r\n\t\tif ( _oldPolygonOffset !== polygonoffset ) {\r\n\r\n\t\t\tif ( polygonoffset ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.disable( _gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldPolygonOffset = polygonoffset;\r\n\r\n\t\t}\r\n\r\n\t\tif ( polygonoffset && ( _oldPolygonOffsetFactor !== factor || _oldPolygonOffsetUnits !== units ) ) {\r\n\r\n\t\t\t_gl.polygonOffset( factor, units );\r\n\r\n\t\t\t_oldPolygonOffsetFactor = factor;\r\n\t\t\t_oldPolygonOffsetUnits = units;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst ) {\r\n\r\n\t\tif ( blending !== _oldBlending ) {\r\n\r\n\t\t\tif ( blending === THREE.NoBlending ) {\r\n\r\n\t\t\t\t_gl.disable( _gl.BLEND );\r\n\r\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE );\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.enable( _gl.BLEND );\r\n\t\t\t\t_gl.blendEquationSeparate( _gl.FUNC_ADD, _gl.FUNC_ADD );\r\n\t\t\t\t_gl.blendFuncSeparate( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_oldBlending = blending;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tif ( blendEquation !== _oldBlendEquation ) {\r\n\r\n\t\t\t\t_gl.blendEquation( paramThreeToGL( blendEquation ) );\r\n\r\n\t\t\t\t_oldBlendEquation = blendEquation;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== _oldBlendSrc || blendDst !== _oldBlendDst ) {\r\n\r\n\t\t\t\t_gl.blendFunc( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ) );\r\n\r\n\t\t\t\t_oldBlendSrc = blendSrc;\r\n\t\t\t\t_oldBlendDst = blendDst;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_oldBlendEquation = null;\r\n\t\t\t_oldBlendSrc = null;\r\n\t\t\t_oldBlendDst = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isImagePowerOfTwo ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( ' + texture.sourceFile + ' )' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension && texture.type !== THREE.FloatType ) {\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || texture.__oldAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\ttexture.__oldAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.uploadTexture = function ( texture ) {\r\n\r\n\t\tif ( texture.__webglInit === undefined ) {\r\n\r\n\t\t\ttexture.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttexture.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_this.info.memory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\ttexture.image = clampToMaxSize( texture.image, _maxTextureSize );\r\n\r\n\t\tvar image = texture.image,\r\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\r\n\r\n\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttexture.needsUpdate = false;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate();\r\n\r\n\t};\r\n\r\n\tthis.setTexture = function ( texture, slot ) {\r\n\r\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\r\n\t\tif ( texture.needsUpdate ) {\r\n\r\n\t\t\t_this.uploadTexture( texture );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.log( 'THREE.WebGLRenderer:', image, 'is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height + '.' );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setCubeTexture ( texture, slot ) {\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.needsUpdate ) {\r\n\r\n\t\t\t\tif ( ! texture.image.__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttexture.image.__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_this.info.memory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], _maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.needsUpdate = false;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\r\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.__webglTexture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, renderTarget.__webglTexture, 0 );\r\n\r\n\t}\r\n\r\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget  ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\r\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\t*/\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( renderTarget && renderTarget.__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\r\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\r\n\r\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\t\trenderTarget.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_this.info.memory.textures ++;\r\n\r\n\t\t\t// Setup texture, create render and frame buffers\r\n\r\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\r\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTarget.__webglFramebuffer = [];\r\n\t\t\t\trenderTarget.__webglRenderbuffer = [];\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\trenderTarget.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTarget.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer[ i ], renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderTarget.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\trenderTarget.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\trenderTarget.__webglRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer, renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Release everything\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer, width, height, vx, vy;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\twidth = renderTarget.width;\r\n\t\t\theight = renderTarget.height;\r\n\r\n\t\t\tvx = 0;\r\n\t\t\tvy = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\twidth = _viewportWidth;\r\n\t\t\theight = _viewportHeight;\r\n\r\n\t\t\tvx = _viewportX;\r\n\t\t\tvy = _viewportY;\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_gl.viewport( vx, vy, width, height );\r\n\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\t_currentWidth = width;\r\n\t\t_currentHeight = height;\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n\t// Allocations\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader\r\n\t\t\t//   to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = _gl.getParameter( _gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction allocateLights( lights ) {\r\n\r\n\t\tvar dirLights = 0;\r\n\t\tvar pointLights = 0;\r\n\t\tvar spotLights = 0;\r\n\t\tvar hemiLights = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\r\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\r\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\r\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\r\n\r\n\t}\r\n\r\n\tfunction allocateShadows( lights ) {\r\n\r\n\t\tvar maxShadows = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\r\n\t\t\tif ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) maxShadows ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxShadows;\r\n\r\n\t}\r\n\r\n\t// DEPRECATED\r\n\r\n\tthis.initMaterial = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPrePlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPostPlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.updateShadowMap = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\r\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\r\n\tthis.generateMipmaps = true;\r\n\r\n\tthis.shareDepthFrom = null;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTarget.prototype = {\r\n\r\n\tconstructor: THREE.WebGLRenderTarget,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar tmp = new THREE.WebGLRenderTarget( this.width, this.height );\r\n\r\n\t\ttmp.wrapS = this.wrapS;\r\n\t\ttmp.wrapT = this.wrapT;\r\n\r\n\t\ttmp.magFilter = this.magFilter;\r\n\t\ttmp.minFilter = this.minFilter;\r\n\r\n\t\ttmp.anisotropy = this.anisotropy;\r\n\r\n\t\ttmp.offset.copy( this.offset );\r\n\t\ttmp.repeat.copy( this.repeat );\r\n\r\n\t\ttmp.format = this.format;\r\n\t\ttmp.type = this.type;\r\n\r\n\t\ttmp.depthBuffer = this.depthBuffer;\r\n\t\ttmp.stencilBuffer = this.stencilBuffer;\r\n\r\n\t\ttmp.generateMipmaps = this.generateMipmaps;\r\n\r\n\t\ttmp.shareDepthFrom = this.shareDepthFrom;\r\n\r\n\t\treturn tmp;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.log( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\tvar generateDefines = function ( defines ) {\r\n\r\n\t\tvar value, chunk, chunks = [];\r\n\r\n\t\tfor ( var d in defines ) {\r\n\r\n\t\t\tvalue = defines[ d ];\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunk = '#define ' + d + ' ' + value;\r\n\t\t\tchunks.push( chunk );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t};\r\n\r\n\tvar cacheUniformLocations = function ( gl, program, identifiers ) {\r\n\r\n\t\tvar uniforms = {};\r\n\r\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar id = identifiers[ i ];\r\n\t\t\tuniforms[ id ] = gl.getUniformLocation( program, id );\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t};\r\n\r\n\tvar cacheAttributeLocations = function ( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar id = identifiers[ i ];\r\n\t\t\tattributes[ id ] = gl.getAttribLocation( program, id );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t};\r\n\r\n\treturn function ( renderer, code, material, parameters ) {\r\n\r\n\t\tvar _this = renderer;\r\n\t\tvar _gl = _this.context;\r\n\r\n\t\tvar defines = material.defines;\r\n\t\tvar uniforms = material.__webglShader.uniforms;\r\n\t\tvar attributes = material.attributes;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar index0AttributeName = material.index0AttributeName;\r\n\r\n\t\tif ( index0AttributeName === undefined && parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\r\n\t\t\tindex0AttributeName = 'position';\r\n\r\n\t\t}\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = _gl.createProgram();\r\n\r\n\t\tvar prefix_vertex, prefix_fragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefix_vertex = '';\r\n\t\t\tprefix_fragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefix_vertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\t_this.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\t_this.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\r\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\r\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.wrapAround ? '#define WRAP_AROUND' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\t\t\t\tparameters.shadowMapCascade ? '#define SHADOWMAP_CASCADE' : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\t//_this._glExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\t\t\t\t'attribute vec2 uv2;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t''\r\n\r\n\t\t\t].join( '\\n' );\r\n\r\n\t\t\tprefix_fragment = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t( parameters.bumpMap || parameters.normalMap ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\r\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest: '',\r\n\r\n\t\t\t\t_this.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\t_this.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.metal ? '#define METAL' : '',\r\n\t\t\t\tparameters.wrapAround ? '#define WRAP_AROUND' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\t\t\t\tparameters.shadowMapCascade ? '#define SHADOWMAP_CASCADE' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\t//_this._glExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t\t''\r\n\r\n\t\t\t].join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvar glVertexShader = new THREE.WebGLShader( _gl, _gl.VERTEX_SHADER, prefix_vertex + vertexShader );\r\n\t\tvar glFragmentShader = new THREE.WebGLShader( _gl, _gl.FRAGMENT_SHADER, prefix_fragment + fragmentShader );\r\n\r\n\t\t_gl.attachShader( program, glVertexShader );\r\n\t\t_gl.attachShader( program, glFragmentShader );\r\n\r\n\t\tif ( index0AttributeName !== undefined ) {\r\n\r\n\t\t\t// Force a particular attribute to index 0.\r\n\t\t\t// because potentially expensive emulation is done by browser if attribute 0 is disabled.\r\n\t\t\t// And, color, for example is often automatically bound to index 0 so disabling it\r\n\r\n\t\t\t_gl.bindAttribLocation( program, 0, index0AttributeName );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.linkProgram( program );\r\n\r\n\t\tif ( _gl.getProgramParameter( program, _gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: Could not initialise shader.' );\r\n\t\t\tconsole.error( 'gl.VALIDATE_STATUS', _gl.getProgramParameter( program, _gl.VALIDATE_STATUS ) );\r\n\t\t\tconsole.error( 'gl.getError()', _gl.getError() );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _gl.getProgramInfoLog( program ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', _gl.getProgramInfoLog( program ) );\r\n\t\t\t// console.warn( _gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n\t\t\t// console.warn( _gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\t_gl.deleteShader( glVertexShader );\r\n\t\t_gl.deleteShader( glFragmentShader );\r\n\r\n\t\t// cache uniform locations\r\n\r\n\t\tvar identifiers = [\r\n\r\n\t\t\t'viewMatrix',\r\n\t\t\t'modelViewMatrix',\r\n\t\t\t'projectionMatrix',\r\n\t\t\t'normalMatrix',\r\n\t\t\t'modelMatrix',\r\n\t\t\t'cameraPosition',\r\n\t\t\t'morphTargetInfluences',\r\n\t\t\t'bindMatrix',\r\n\t\t\t'bindMatrixInverse'\r\n\r\n\t\t];\r\n\r\n\t\tif ( parameters.useVertexTexture ) {\r\n\r\n\t\t\tidentifiers.push( 'boneTexture' );\r\n\t\t\tidentifiers.push( 'boneTextureWidth' );\r\n\t\t\tidentifiers.push( 'boneTextureHeight' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tidentifiers.push( 'boneGlobalMatrices' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.logarithmicDepthBuffer ) {\r\n\r\n\t\t\tidentifiers.push('logDepthBufFC');\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfor ( var u in uniforms ) {\r\n\r\n\t\t\tidentifiers.push( u );\r\n\r\n\t\t}\r\n\r\n\t\tthis.uniforms = cacheUniformLocations( _gl, program, identifiers );\r\n\r\n\t\t// cache attributes locations\r\n\r\n\t\tidentifiers = [\r\n\r\n\t\t\t'position',\r\n\t\t\t'normal',\r\n\t\t\t'uv',\r\n\t\t\t'uv2',\r\n\t\t\t'tangent',\r\n\t\t\t'color',\r\n\t\t\t'skinIndex',\r\n\t\t\t'skinWeight',\r\n\t\t\t'lineDistance'\r\n\r\n\t\t];\r\n\r\n\t\tfor ( var i = 0; i < parameters.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\tidentifiers.push( 'morphTarget' + i );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameters.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\tidentifiers.push( 'morphNormal' + i );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var a in attributes ) {\r\n\r\n\t\t\tidentifiers.push( a );\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes = cacheAttributeLocations( _gl, program, identifiers );\r\n\t\tthis.attributesKeys = Object.keys( this.attributes );\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tvar addLineNumbers = function ( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t};\r\n\r\n\treturn function ( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type ); \r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', gl.getShaderInfoLog( shader ) );\r\n\t\t\tconsole.warn( addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\tvar hasVertexTexture;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t-1, -1,  0, 0,\r\n\t\t\t 1, -1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t-1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\r\n\t\tvar shader;\r\n\r\n\t\tif ( hasVertexTexture ) {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"precision mediump float;\",\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t}\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewportHeight / viewportWidth,\r\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\r\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\r\n\r\n\t\tvar size = 16 / viewportHeight,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tgl.enableVertexAttribArray( attributes.vertex );\r\n\t\tgl.enableVertexAttribArray( attributes.uv );\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/unforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.disable( gl.CULL_FACE );\r\n\t\tgl.depthMask( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewportHeight;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\t\t\t\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[12], flare.matrixWorld.elements[13], flare.matrixWorld.elements[14] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition )\r\n\r\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\r\n\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tgl.disable( gl.BLEND );\r\n\t\t\t\tgl.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tgl.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tgl.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition )\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tgl.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\trenderer.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tgl.enable( gl.CULL_FACE );\r\n\t\tgl.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthMask( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/ShadowMapPlugin.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ShadowMapPlugin = function ( _renderer, _lights, _webglObjects, _webglObjectsImmediate ) {\r\n\r\n\tvar _gl = _renderer.context;\r\n\r\n\tvar _depthMaterial, _depthMaterialMorph, _depthMaterialSkin, _depthMaterialMorphSkin,\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_min = new THREE.Vector3(),\r\n\t_max = new THREE.Vector3(),\r\n\r\n\t_matrixPosition = new THREE.Vector3(),\r\n\t\r\n\t_renderList = [];\r\n\r\n\t// init\r\n\r\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\r\n\t_depthMaterial = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader\r\n\t } );\r\n\r\n\t_depthMaterialMorph = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true\r\n\t} );\r\n\r\n\t_depthMaterialSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\t_depthMaterialMorphSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\t_depthMaterial._shadowPass = true;\r\n\t_depthMaterialMorph._shadowPass = true;\r\n\t_depthMaterialSkin._shadowPass = true;\r\n\t_depthMaterialMorphSkin._shadowPass = true;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( _renderer.shadowMapEnabled === false ) return;\r\n\r\n\t\tvar i, il, j, jl, n,\r\n\r\n\t\tshadowMap, shadowMatrix, shadowCamera,\r\n\t\tprogram, buffer, material,\r\n\t\twebglObject, object, light,\r\n\r\n\t\tlights = [],\r\n\t\tk = 0,\r\n\r\n\t\tfog = null;\r\n\r\n\t\t// set GL state for depth map\r\n\r\n\t\t_gl.clearColor( 1, 1, 1, 1 );\r\n\t\t_gl.disable( _gl.BLEND );\r\n\r\n\t\t_gl.enable( _gl.CULL_FACE );\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.setDepthTest( true );\r\n\r\n\t\t// preprocess lights\r\n\t\t// \t- skip lights that are not casting shadows\r\n\t\t//\t- create virtual lights for cascaded shadow maps\r\n\r\n\t\tfor ( i = 0, il = _lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tlight = _lights[ i ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( ( light instanceof THREE.DirectionalLight ) && light.shadowCascade ) {\r\n\r\n\t\t\t\tfor ( n = 0; n < light.shadowCascadeCount; n ++ ) {\r\n\r\n\t\t\t\t\tvar virtualLight;\r\n\r\n\t\t\t\t\tif ( ! light.shadowCascadeArray[ n ] ) {\r\n\r\n\t\t\t\t\t\tvirtualLight = createVirtualLight( light, n );\r\n\t\t\t\t\t\tvirtualLight.originalCamera = camera;\r\n\r\n\t\t\t\t\t\tvar gyro = new THREE.Gyroscope();\r\n\t\t\t\t\t\tgyro.position.copy( light.shadowCascadeOffset );\r\n\r\n\t\t\t\t\t\tgyro.add( virtualLight );\r\n\t\t\t\t\t\tgyro.add( virtualLight.target );\r\n\r\n\t\t\t\t\t\tcamera.add( gyro );\r\n\r\n\t\t\t\t\t\tlight.shadowCascadeArray[ n ] = virtualLight;\r\n\r\n\t\t\t\t\t\tconsole.log( \"Created virtualLight\", virtualLight );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvirtualLight = light.shadowCascadeArray[ n ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tupdateVirtualLight( light, n );\r\n\r\n\t\t\t\t\tlights[ k ] = virtualLight;\r\n\t\t\t\t\tk ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlights[ k ] = light;\r\n\t\t\t\tk ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tlight = lights[ i ];\r\n\r\n\t\t\tif ( ! light.shadowMap ) {\r\n\r\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\tif ( _renderer.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\r\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\r\n\r\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! light.shadowCamera ) {\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( \"Unsupported light type for shadow\" );\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscene.add( light.shadowCamera );\r\n\r\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\r\n\r\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\r\n\t\t\t\tscene.add( light.cameraHelper );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( light.isVirtual && virtualLight.originalCamera == camera ) {\r\n\r\n\t\t\t\tupdateShadowCamera( camera, light );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tshadowMap = light.shadowMap;\r\n\t\t\tshadowMatrix = light.shadowMatrix;\r\n\t\t\tshadowCamera = light.shadowCamera;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\tshadowCamera.lookAt( _matrixPosition );\r\n\t\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\r\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\r\n\r\n\t\t\t// compute shadow matrix\r\n\r\n\t\t\tshadowMatrix.set(\r\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t);\r\n\r\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t// render shadow map\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t_renderList.length = 0;\r\n\r\n\t\t\tprojectObject( scene, scene, shadowCamera );\r\n\r\n\r\n\t\t\t// render regular objects\r\n\r\n\t\t\tvar objectMaterial, useMorphing, useSkinning;\r\n\r\n\t\t\tfor ( j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\twebglObject = _renderList[ j ];\r\n\r\n\t\t\t\tobject = webglObject.object;\r\n\t\t\t\tbuffer = webglObject.buffer;\r\n\r\n\t\t\t\t// culling is overriden globally for all objects\r\n\t\t\t\t// while rendering depth map\r\n\r\n\t\t\t\t// need to deal with MeshFaceMaterial somehow\r\n\t\t\t\t// in that case just use the first of material.materials for now\r\n\t\t\t\t// (proper solution would require to break objects by materials\r\n\t\t\t\t//  similarly to regular rendering and then set corresponding\r\n\t\t\t\t//  depth materials per each chunk instead of just once per object)\r\n\r\n\t\t\t\tobjectMaterial = getObjectMaterial( object );\r\n\r\n\t\t\t\tuseMorphing = object.geometry.morphTargets !== undefined && object.geometry.morphTargets.length > 0 && objectMaterial.morphTargets;\r\n\t\t\t\tuseSkinning = object instanceof THREE.SkinnedMesh && objectMaterial.skinning;\r\n\r\n\t\t\t\tif ( object.customDepthMaterial ) {\r\n\r\n\t\t\t\t\tmaterial = object.customDepthMaterial;\r\n\r\n\t\t\t\t} else if ( useSkinning ) {\r\n\r\n\t\t\t\t\tmaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\r\n\r\n\t\t\t\t} else if ( useMorphing ) {\r\n\r\n\t\t\t\t\tmaterial = _depthMaterialMorph;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmaterial = _depthMaterial;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_renderer.setMaterialFaces( objectMaterial );\r\n\r\n\t\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, fog, material, buffer, object );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_renderer.renderBuffer( shadowCamera, _lights, fog, material, buffer, object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// set matrices and render immediate objects\r\n\r\n\t\t\tfor ( j = 0, jl = _webglObjectsImmediate.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\twebglObject = _webglObjectsImmediate[ j ];\r\n\t\t\t\tobject = webglObject.object;\r\n\r\n\t\t\t\tif ( object.visible && object.castShadow ) {\r\n\r\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n\t\t\t\t\t_renderer.renderImmediateObject( shadowCamera, _lights, fog, _depthMaterial, object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore GL state\r\n\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\r\n\t\t_gl.clearColor( clearColor.r, clearColor.g, clearColor.b, clearAlpha );\r\n\t\t_gl.enable( _gl.BLEND );\r\n\r\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction projectObject( scene, object, shadowCamera ){\r\n\r\n\t\tif ( object.visible ) {\r\n\r\n\t\t\tvar webglObjects = _webglObjects[ object.id ];\r\n\r\n\t\t\tif ( webglObjects && object.castShadow && (object.frustumCulled === false || _frustum.intersectsObject( object ) === true) ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvar webglObject = webglObjects[ i ];\r\n\r\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( webglObject );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tprojectObject( scene, object.children[ i ], shadowCamera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createVirtualLight( light, cascade ) {\r\n\r\n\t\tvar virtualLight = new THREE.DirectionalLight();\r\n\r\n\t\tvirtualLight.isVirtual = true;\r\n\r\n\t\tvirtualLight.onlyShadow = true;\r\n\t\tvirtualLight.castShadow = true;\r\n\r\n\t\tvirtualLight.shadowCameraNear = light.shadowCameraNear;\r\n\t\tvirtualLight.shadowCameraFar = light.shadowCameraFar;\r\n\r\n\t\tvirtualLight.shadowCameraLeft = light.shadowCameraLeft;\r\n\t\tvirtualLight.shadowCameraRight = light.shadowCameraRight;\r\n\t\tvirtualLight.shadowCameraBottom = light.shadowCameraBottom;\r\n\t\tvirtualLight.shadowCameraTop = light.shadowCameraTop;\r\n\r\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\r\n\r\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\r\n\r\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\r\n\t\tvirtualLight.shadowMapWidth = light.shadowCascadeWidth[ cascade ];\r\n\t\tvirtualLight.shadowMapHeight = light.shadowCascadeHeight[ cascade ];\r\n\r\n\t\tvirtualLight.pointsWorld = [];\r\n\t\tvirtualLight.pointsFrustum = [];\r\n\r\n\t\tvar pointsWorld = virtualLight.pointsWorld,\r\n\t\t\tpointsFrustum = virtualLight.pointsFrustum;\r\n\r\n\t\tfor ( var i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tpointsWorld[ i ] = new THREE.Vector3();\r\n\t\t\tpointsFrustum[ i ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\r\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\r\n\r\n\t\tpointsFrustum[ 0 ].set( - 1, - 1, nearZ );\r\n\t\tpointsFrustum[ 1 ].set(  1, - 1, nearZ );\r\n\t\tpointsFrustum[ 2 ].set( - 1,  1, nearZ );\r\n\t\tpointsFrustum[ 3 ].set(  1,  1, nearZ );\r\n\r\n\t\tpointsFrustum[ 4 ].set( - 1, - 1, farZ );\r\n\t\tpointsFrustum[ 5 ].set(  1, - 1, farZ );\r\n\t\tpointsFrustum[ 6 ].set( - 1,  1, farZ );\r\n\t\tpointsFrustum[ 7 ].set(  1,  1, farZ );\r\n\r\n\t\treturn virtualLight;\r\n\r\n\t}\r\n\r\n\t// Synchronize virtual light with the original light\r\n\r\n\tfunction updateVirtualLight( light, cascade ) {\r\n\r\n\t\tvar virtualLight = light.shadowCascadeArray[ cascade ];\r\n\r\n\t\tvirtualLight.position.copy( light.position );\r\n\t\tvirtualLight.target.position.copy( light.target.position );\r\n\t\tvirtualLight.lookAt( virtualLight.target );\r\n\r\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\r\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\r\n\r\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\r\n\r\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\r\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\r\n\r\n\t\tvar pointsFrustum = virtualLight.pointsFrustum;\r\n\r\n\t\tpointsFrustum[ 0 ].z = nearZ;\r\n\t\tpointsFrustum[ 1 ].z = nearZ;\r\n\t\tpointsFrustum[ 2 ].z = nearZ;\r\n\t\tpointsFrustum[ 3 ].z = nearZ;\r\n\r\n\t\tpointsFrustum[ 4 ].z = farZ;\r\n\t\tpointsFrustum[ 5 ].z = farZ;\r\n\t\tpointsFrustum[ 6 ].z = farZ;\r\n\t\tpointsFrustum[ 7 ].z = farZ;\r\n\r\n\t}\r\n\r\n\t// Fit shadow camera's ortho frustum to camera frustum\r\n\r\n\tfunction updateShadowCamera( camera, light ) {\r\n\r\n\t\tvar shadowCamera = light.shadowCamera,\r\n\t\t\tpointsFrustum = light.pointsFrustum,\r\n\t\t\tpointsWorld = light.pointsWorld;\r\n\r\n\t\t_min.set( Infinity, Infinity, Infinity );\r\n\t\t_max.set( - Infinity, - Infinity, - Infinity );\r\n\r\n\t\tfor ( var i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tvar p = pointsWorld[ i ];\r\n\r\n\t\t\tp.copy( pointsFrustum[ i ] );\r\n\t\t\tp.unproject( camera );\r\n\r\n\t\t\tp.applyMatrix4( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\tif ( p.x < _min.x ) _min.x = p.x;\r\n\t\t\tif ( p.x > _max.x ) _max.x = p.x;\r\n\r\n\t\t\tif ( p.y < _min.y ) _min.y = p.y;\r\n\t\t\tif ( p.y > _max.y ) _max.y = p.y;\r\n\r\n\t\t\tif ( p.z < _min.z ) _min.z = p.z;\r\n\t\t\tif ( p.z > _max.z ) _max.z = p.z;\r\n\r\n\t\t}\r\n\r\n\t\tshadowCamera.left = _min.x;\r\n\t\tshadowCamera.right = _max.x;\r\n\t\tshadowCamera.top = _max.y;\r\n\t\tshadowCamera.bottom = _min.y;\r\n\r\n\t\t// can't really fit near/far\r\n\t\t//shadowCamera.near = _min.z;\r\n\t\t//shadowCamera.far = _max.z;\r\n\r\n\t\tshadowCamera.updateProjectionMatrix();\r\n\r\n\t}\r\n\r\n\t// For the moment just ignore objects that have multiple materials with different animation methods\r\n\t// Only the first material will be taken into account for deciding which depth material to use for shadow maps\r\n\r\n\tfunction getObjectMaterial( object ) {\r\n\r\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\r\n\t\t\t? object.material.materials[ 0 ]\r\n\t\t\t: object.material;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tgl.enableVertexAttribArray( attributes.position );\r\n\t\tgl.enableVertexAttribArray( attributes.uv );\r\n\r\n\t\tgl.disable( gl.CULL_FACE );\r\n\t\tgl.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tgl.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite._modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite._modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\trenderer.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\trenderer.setDepthTest( material.depthTest );\r\n\t\t\trenderer.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\r\n\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tgl.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/extras/GeometryUtils.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ImageUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n */\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.Texture( undefined, mapping );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t}, undefined, function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t} );\r\n\r\n\t\ttexture.sourceFile = url;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\r\n\r\n\t\t// no flipping needed for cube textures\r\n\r\n\t\ttexture.flipY = false;\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\tloader.load( array[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tgetNormalMap: function ( image, depth ) {\r\n\r\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\r\n\r\n\t\tvar cross = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\r\n\r\n\t\t}\r\n\r\n\t\tvar subtract = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\r\n\r\n\t\t}\r\n\r\n\t\tvar normalize = function ( a ) {\r\n\r\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\r\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\r\n\r\n\t\t}\r\n\r\n\t\tdepth = depth | 1;\r\n\r\n\t\tvar width = image.width;\r\n\t\tvar height = image.height;\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.drawImage( image, 0, 0 );\r\n\r\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\r\n\t\tvar imageData = context.createImageData( width, height );\r\n\t\tvar output = imageData.data;\r\n\r\n\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\r\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\r\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\r\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\r\n\r\n\t\t\t\tvar points = [];\r\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\r\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [  1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\r\n\r\n\t\t\t\tvar normals = [];\r\n\t\t\t\tvar num_points = points.length;\r\n\r\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\r\n\r\n\t\t\t\t\tvar v1 = points[ i ];\r\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\r\n\t\t\t\t\tv1 = subtract( v1, origin );\r\n\t\t\t\t\tv2 = subtract( v2, origin );\r\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar normal = [ 0, 0, 0 ];\r\n\r\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\r\n\r\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\r\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\r\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal[ 0 ] /= normals.length;\r\n\t\t\t\tnormal[ 1 ] /= normals.length;\r\n\t\t\t\tnormal[ 2 ] /= normals.length;\r\n\r\n\t\t\t\tvar idx = ( y * width + x ) * 4;\r\n\r\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 3 ] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcontext.putImageData( imageData, 0, 0 );\r\n\r\n\t\treturn canvas;\r\n\r\n\t},\r\n\r\n\tgenerateDataTexture: function ( width, height, color ) {\r\n\r\n\t\tvar size = width * height;\r\n\t\tvar data = new Uint8Array( 3 * size );\r\n\r\n\t\tvar r = Math.floor( color.r * 255 );\r\n\t\tvar g = Math.floor( color.g * 255 );\r\n\t\tvar b = Math.floor( color.b * 255 );\r\n\r\n\t\tfor ( var i = 0; i < size; i ++ ) {\r\n\r\n\t\t\tdata[ i * 3 ] \t   = r;\r\n\t\t\tdata[ i * 3 + 1 ] = g;\r\n\t\t\tdata[ i * 3 + 2 ] = b;\r\n\r\n\t\t}\r\n\r\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Object3D();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/FontUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For Text operations in three.js (See TextGeometry)\r\n *\r\n * It uses techniques used in:\r\n *\r\n * \ttypeface.js and canvastext\r\n * \t\tFor converting fonts and rendering with javascript\r\n *\t\thttp://typeface.neocracy.org\r\n *\r\n *\tTriangulation ported from AS3\r\n *\t\tSimple Polygon Triangulation\r\n *\t\thttp://actionsnippet.com/?p=1462\r\n *\r\n * \tA Method to triangulate shapes with holes\r\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\r\n *\r\n */\r\n\r\nTHREE.FontUtils = {\r\n\r\n\tfaces: {},\r\n\r\n\t// Just for now. face[weight][style]\r\n\r\n\tface: 'helvetiker',\r\n\tweight: 'normal',\r\n\tstyle: 'normal',\r\n\tsize: 150,\r\n\tdivisions: 10,\r\n\r\n\tgetFace: function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\treturn this.faces[ this.face ][ this.weight ][ this.style ];\r\n\r\n\t\t} catch (e) {\r\n\r\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tloadFace: function ( data ) {\r\n\r\n\t\tvar family = data.familyName.toLowerCase();\r\n\r\n\t\tvar ThreeFont = this;\r\n\r\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\r\n\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\tvar face = ThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdrawText: function ( text ) {\r\n\r\n\t\tvar characterPts = [], allPts = [];\r\n\r\n\t\t// RenderText\r\n\r\n\t\tvar i, p,\r\n\t\t\tface = this.getFace(),\r\n\t\t\tscale = this.size / face.resolution,\r\n\t\t\toffset = 0,\r\n\t\t\tchars = String( text ).split( '' ),\r\n\t\t\tlength = chars.length;\r\n\r\n\t\tvar fontPaths = [];\r\n\r\n\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\r\n\t\t\toffset += ret.offset;\r\n\r\n\t\t\tfontPaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t\t// get the width\r\n\r\n\t\tvar width = offset / 2;\r\n\t\t//\r\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\r\n\t\t//\r\n\t\t// \tallPts[ p ].x -= width;\r\n\t\t//\r\n\t\t// }\r\n\r\n\t\t//var extract = this.extractPoints( allPts, characterPts );\r\n\t\t//extract.contour = allPts;\r\n\r\n\t\t//extract.paths = fontPaths;\r\n\t\t//extract.offset = width;\r\n\r\n\t\treturn { paths: fontPaths, offset: width };\r\n\r\n\t},\r\n\r\n\r\n\r\n\r\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\r\n\r\n\t\tvar pts = [];\r\n\r\n\t\tvar i, i2, divisions,\r\n\t\t\toutline, action, length,\r\n\t\t\tscaleX, scaleY,\r\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\r\n\t\t\tlaste,\r\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\r\n\r\n\t\tif ( ! glyph ) return;\r\n\r\n\t\tif ( glyph.o ) {\r\n\r\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\t\t\tlength = outline.length;\r\n\r\n\t\t\tscaleX = scale;\r\n\t\t\tscaleY = scale;\r\n\r\n\t\t\tfor ( i = 0; i < length; ) {\r\n\r\n\t\t\t\taction = outline[ i ++ ];\r\n\r\n\t\t\t\t//console.log( action );\r\n\r\n\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm':\r\n\r\n\t\t\t\t\t// Move To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l':\r\n\r\n\t\t\t\t\t// Line To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tpath.lineTo( x,y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q':\r\n\r\n\t\t\t\t\t// QuadraticCurveTo\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\t\t\t\t\t  }\r\n\r\n\t\t\t\t  }\r\n\r\n\t\t\t\t  break;\r\n\r\n\t\t\t\tcase 'b':\r\n\r\n\t\t\t\t\t// Cubic Bezier Curve\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn { offset: glyph.ha * scale, path:path };\r\n\t}\r\n\r\n};\r\n\r\n\r\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\r\n\r\n\t// Parameters \r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\r\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\r\n\r\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\r\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\r\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\r\n\r\n\tTHREE.FontUtils.size = size;\r\n\tTHREE.FontUtils.divisions = curveSegments;\r\n\r\n\tTHREE.FontUtils.face = font;\r\n\tTHREE.FontUtils.weight = weight;\r\n\tTHREE.FontUtils.style = style;\r\n\r\n\t// Get a Font data json object\r\n\r\n\tvar data = THREE.FontUtils.drawText( text );\r\n\r\n\tvar paths = data.paths;\r\n\tvar shapes = [];\r\n\r\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t}\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n\r\n/**\r\n * This code is a quick port of code written in C++ which was submitted to\r\n * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n * See original code and more information here:\r\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n *\r\n * ported to actionscript by Zevan Rosser\r\n * www.actionsnippet.com\r\n *\r\n * ported to javascript by Joshua Koo\r\n * http://www.lab4games.net/zz85/blog\r\n *\r\n */\r\n\r\n\r\n( function ( namespace ) {\r\n\r\n\tvar EPSILON = 0.0000000001;\r\n\r\n\t// takes in an contour array and returns\r\n\r\n\tvar process = function ( contour, indices ) {\r\n\r\n\t\tvar n = contour.length;\r\n\r\n\t\tif ( n < 3 ) return null;\r\n\r\n\t\tvar result = [],\r\n\t\t\tverts = [],\r\n\t\t\tvertIndices = [];\r\n\r\n\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\tvar u, v, w;\r\n\r\n\t\tif ( area( contour ) > 0.0 ) {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t}\r\n\r\n\t\tvar nv = n;\r\n\r\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t//return null;\r\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\tconsole.log( 'Warning, unable to triangulate polygon!' );\r\n\r\n\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\treturn result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\ta = verts[ u ];\r\n\t\t\t\tb = verts[ v ];\r\n\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s++, t++ ) {\r\n\r\n\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnv --;\r\n\r\n\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices ) return vertIndices;\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tvar area = function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t};\r\n\r\n\tvar snip = function ( contour, u, v, w, n, verts ) {\r\n\r\n\t\tvar p;\r\n\t\tvar ax, ay, bx, by;\r\n\t\tvar cx, cy, px, py;\r\n\r\n\t\tax = contour[ verts[ u ] ].x;\r\n\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\tbx = contour[ verts[ v ] ].x;\r\n\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\tcx = contour[ verts[ w ] ].x;\r\n\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\taX = cx - bx;  aY = cy - by;\r\n\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\tpx = contour[ verts[ p ] ].x\r\n\t\t\tpy = contour[ verts[ p ] ].y\r\n\r\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n\r\n\tnamespace.Triangulate = process;\r\n\tnamespace.Triangulate.area = area;\r\n\r\n\treturn namespace;\r\n\r\n} )( THREE.FontUtils );\r\n\r\n// To use the typeface.js face files, hook up the API\r\nself._typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\r\nTHREE.typeface_js = self._typeface_js;\r\n\r\n// File:src/extras/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\r\nTHREE.Audio.prototype.load = function ( file ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open( 'GET', file, true );\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function ( e ) {\r\n\r\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\r\n\t\t\tscope.source.buffer = buffer;\r\n\t\t\tscope.source.connect( scope.panner );\r\n\t\t\tscope.source.start( 0 );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\trequest.send();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\r\n\tthis.source.loop = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\r\n\r\n\tthis.panner.refDistance = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\r\n\r\n\tthis.panner.rolloffFactor = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\r\n\treturn function ( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\r\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3();\r\n\r\n\tvar orientation = new THREE.Vector3();\r\n\tvar velocity = new THREE.Vector3();\r\n\r\n\tvar positionPrev = new THREE.Vector3();\r\n\r\n\treturn function ( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tvar listener = this.context.listener;\r\n\t\tvar up = this.up;\r\n\r\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\torientation.set( 0, 0, -1 ).applyQuaternion( quaternion );\r\n\t\tvelocity.subVectors( position, positionPrev );\r\n\r\n\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\t\tlistener.setVelocity( velocity.x, velocity.y, velocity.z );\r\n\r\n\t\tpositionPrev.copy( position );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n * THREE.ClosedSplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\n// Virtual base class method to overwrite and implement in subclasses\r\n//\t- t [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPoint = function ( t ) {\r\n\r\n\tconsole.log( \"Warning, getPoint() not implemented!\" );\r\n\treturn null;\r\n\r\n};\r\n\r\n// Get point at relative position in curve according to arc length\r\n// - u [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPointAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getPoint( t );\r\n\r\n};\r\n\r\n// Get sequence of points using getPoint( t )\r\n\r\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get sequence of points using getPointAt( u )\r\n\r\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get total curve arc length\r\n\r\nTHREE.Curve.prototype.getLength = function () {\r\n\r\n\tvar lengths = this.getLengths();\r\n\treturn lengths[ lengths.length - 1 ];\r\n\r\n};\r\n\r\n// Get list of cumulative segment lengths\r\n\r\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = (this.__arcLengthDivisions) ? (this.__arcLengthDivisions): 200;\r\n\r\n\tif ( this.cacheArcLengths\r\n\t\t&& ( this.cacheArcLengths.length == divisions + 1 )\r\n\t\t&& ! this.needsUpdate) {\r\n\r\n\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\treturn this.cacheArcLengths;\r\n\r\n\t}\r\n\r\n\tthis.needsUpdate = false;\r\n\r\n\tvar cache = [];\r\n\tvar current, last = this.getPoint( 0 );\r\n\tvar p, sum = 0;\r\n\r\n\tcache.push( 0 );\r\n\r\n\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\tsum += current.distanceTo( last );\r\n\t\tcache.push( sum );\r\n\t\tlast = current;\r\n\r\n\t}\r\n\r\n\tthis.cacheArcLengths = cache;\r\n\r\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.updateArcLengths = function() {\r\n\tthis.needsUpdate = true;\r\n\tthis.getLengths();\r\n};\r\n\r\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equi distance\r\n\r\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\r\n\r\n\tvar arcLengths = this.getLengths();\r\n\r\n\tvar i = 0, il = arcLengths.length;\r\n\r\n\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\tif ( distance ) {\r\n\r\n\t\ttargetArcLength = distance;\r\n\r\n\t} else {\r\n\r\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t}\r\n\r\n\t//var time = Date.now();\r\n\r\n\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\tvar low = 0, high = il - 1, comparison;\r\n\r\n\twhile ( low <= high ) {\r\n\r\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\r\n\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\thigh = i - 1;\r\n\t\t\tcontinue;\r\n\r\n\t\t} else {\r\n\r\n\t\t\thigh = i;\r\n\t\t\tbreak;\r\n\r\n\t\t\t// DONE\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ti = high;\r\n\r\n\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\tif ( arcLengths[ i ] == targetArcLength ) {\r\n\r\n\t\tvar t = i / ( il - 1 );\r\n\t\treturn t;\r\n\r\n\t}\r\n\r\n\t// we could get finer grain at lengths, or use simple interpolatation between two points\r\n\r\n\tvar lengthBefore = arcLengths[ i ];\r\n    var lengthAfter = arcLengths[ i + 1 ];\r\n\r\n    var segmentLength = lengthAfter - lengthBefore;\r\n\r\n    // determine where we are between the 'before' and 'after' points\r\n\r\n    var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n    // add that fractional amount to t\r\n\r\n    var t = ( i + segmentFraction ) / ( il -1 );\r\n\r\n\treturn t;\r\n\r\n};\r\n\r\n// Returns a unit vector tangent at t\r\n// In case any sub curve does not implement its tangent derivation,\r\n// 2 points a small delta apart will be used to find its gradient\r\n// which seems to give a reasonable approximation\r\n\r\nTHREE.Curve.prototype.getTangent = function( t ) {\r\n\r\n\tvar delta = 0.0001;\r\n\tvar t1 = t - delta;\r\n\tvar t2 = t + delta;\r\n\r\n\t// Capping in case of danger\r\n\r\n\tif ( t1 < 0 ) t1 = 0;\r\n\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\tvar pt1 = this.getPoint( t1 );\r\n\tvar pt2 = this.getPoint( t2 );\r\n\r\n\tvar vec = pt2.clone().sub(pt1);\r\n\treturn vec.normalize();\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getTangent( t );\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Curve.Utils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function (t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * (1 - t) * (1 - t)  +\r\n\t\t\t3 * p1 * (1 - t) * (1-t) - 6 *t *p1 * (1-t) +\r\n\t\t\t6 * t *  p2 * (1-t) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\tthis.bends = [];\r\n\t\r\n\tthis.autoClose = false; // Automatically closes the path\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\r\nTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\r\n\tthis.curves.push( curve );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t// TODO\r\n\t// If the ending of curve is not connected to the starting\r\n\t// or the next curve, then, this is not a real path\r\n};\r\n\r\nTHREE.CurvePath.prototype.closePath = function() {\r\n\t// TODO Test\r\n\t// and verify for vector3 (needs to implement equals)\r\n\t// Add a line curve if start and end of lines are not connected\r\n\tvar startPoint = this.curves[0].getPoint(0);\r\n\tvar endPoint = this.curves[this.curves.length-1].getPoint(1);\r\n\t\r\n\tif (! startPoint.equals(endPoint)) {\r\n\t\tthis.curves.push( new THREE.LineCurve(endPoint, startPoint) );\r\n\t}\r\n\t\r\n};\r\n\r\n// To get accurate point with reference to\r\n// entire path distance at time t,\r\n// following has to be done:\r\n\r\n// 1. Length of each sub path have to be known\r\n// 2. Locate and identify type of curve\r\n// 3. Get t for the curve\r\n// 4. Return curve.getPointAt(t')\r\n\r\nTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\r\n\tvar d = t * this.getLength();\r\n\tvar curveLengths = this.getCurveLengths();\r\n\tvar i = 0, diff, curve;\r\n\r\n\t// To think about boundaries points.\r\n\r\n\twhile ( i < curveLengths.length ) {\r\n\r\n\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\tdiff = curveLengths[ i ] - d;\r\n\t\t\tcurve = this.curves[ i ];\r\n\r\n\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\ti ++;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n};*/\r\n\r\n\r\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n// getPoint() depends on getLength\r\n\r\nTHREE.CurvePath.prototype.getLength = function() {\r\n\r\n\tvar lens = this.getCurveLengths();\r\n\treturn lens[ lens.length - 1 ];\r\n\r\n};\r\n\r\n// Compute lengths and cache them\r\n// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\nTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\r\n\t// We use cache values if curves and cache array are same length\r\n\r\n\tif ( this.cacheLengths && this.cacheLengths.length == this.curves.length ) {\r\n\r\n\t\treturn this.cacheLengths;\r\n\r\n\t};\r\n\r\n\t// Get length of subsurve\r\n\t// Push sums into cached array\r\n\r\n\tvar lengths = [], sums = 0;\r\n\tvar i, il = this.curves.length;\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tsums += this.curves[ i ].getLength();\r\n\t\tlengths.push( sums );\r\n\r\n\t}\r\n\r\n\tthis.cacheLengths = lengths;\r\n\r\n\treturn lengths;\r\n\r\n};\r\n\r\n\r\n\r\n// Returns min and max coordinates\r\n\r\nTHREE.CurvePath.prototype.getBoundingBox = function () {\r\n\r\n\tvar points = this.getPoints();\r\n\r\n\tvar maxX, maxY, maxZ;\r\n\tvar minX, minY, minZ;\r\n\r\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\r\n\tminX = minY = Number.POSITIVE_INFINITY;\r\n\r\n\tvar p, i, il, sum;\r\n\r\n\tvar v3 = points[0] instanceof THREE.Vector3;\r\n\r\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\r\n\r\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\tp = points[ i ];\r\n\r\n\t\tif ( p.x > maxX ) maxX = p.x;\r\n\t\telse if ( p.x < minX ) minX = p.x;\r\n\r\n\t\tif ( p.y > maxY ) maxY = p.y;\r\n\t\telse if ( p.y < minY ) minY = p.y;\r\n\r\n\t\tif ( v3 ) {\r\n\r\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\r\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\r\n\r\n\t\t}\r\n\r\n\t\tsum.add( p );\r\n\r\n\t}\r\n\r\n\tvar ret = {\r\n\r\n\t\tminX: minX,\r\n\t\tminY: minY,\r\n\t\tmaxX: maxX,\r\n\t\tmaxY: maxY\r\n\r\n\t};\r\n\r\n\tif ( v3 ) {\r\n\r\n\t\tret.maxZ = maxZ;\r\n\t\tret.minZ = minZ;\r\n\r\n\t}\r\n\r\n\treturn ret;\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tCreate Geometries Helpers\r\n **************************************************************/\r\n\r\n/// Generate geometry from path points (for Line or Points objects)\r\n\r\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\n// Generate geometry from equidistance sampling along the path\r\n\r\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getSpacedPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < points.length; i ++ ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0) );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n\r\n/**************************************************************\r\n *\tBend / Wrap Helper Methods\r\n **************************************************************/\r\n\r\n// Wrap path / Bend modifiers?\r\n\r\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\r\n\r\n\tthis.bends.push( bendpath );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getSpacedPoints( segments );\r\n\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n// This returns getPoints() bend/wrapped around the contour of a path.\r\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\r\n\r\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\r\n\r\n\tvar bounds = this.getBoundingBox();\r\n\r\n\tvar i, il, p, oldX, oldY, xNorm;\r\n\r\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\r\n\r\n\t\tp = oldPts[ i ];\r\n\r\n\t\toldX = p.x;\r\n\t\toldY = p.y;\r\n\r\n\t\txNorm = oldX / bounds.maxX;\r\n\r\n\t\t// If using actual distance, for length > path, requires line extrusions\r\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\r\n\r\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\r\n\r\n\t\t// check for out of bounds?\r\n\r\n\t\tvar pathPt = path.getPoint( xNorm );\r\n\t\tvar normal = path.getTangent( xNorm );\r\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\r\n\r\n\t\tp.x = pathPt.x + normal.x;\r\n\t\tp.y = pathPt.y + normal.y;\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n\r\n// File:src/extras/core/Gyroscope.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Gyroscope = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n};\r\n\r\nTHREE.Gyroscope.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Gyroscope.prototype.constructor = THREE.Gyroscope;\r\n\r\nTHREE.Gyroscope.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar translationObject = new THREE.Vector3();\r\n\tvar quaternionObject = new THREE.Quaternion();\r\n\tvar scaleObject = new THREE.Vector3();\r\n\r\n\tvar translationWorld = new THREE.Vector3();\r\n\tvar quaternionWorld = new THREE.Quaternion();\r\n\tvar scaleWorld = new THREE.Vector3();\r\n\r\n\treturn function ( force ) {\r\n\r\n\t\tthis.matrixAutoUpdate && this.updateMatrix();\r\n\r\n\t\t// update matrixWorld\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n\t\t\tif ( this.parent ) {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t\tthis.matrixWorld.decompose( translationWorld, quaternionWorld, scaleWorld );\r\n\t\t\t\tthis.matrix.decompose( translationObject, quaternionObject, scaleObject );\r\n\r\n\t\t\t\tthis.matrixWorld.compose( translationWorld, quaternionObject, scaleWorld );\r\n\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\t\r\n}() );\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call(this);\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\nTHREE.Path.prototype.constructor = THREE.Path;\r\n\r\nTHREE.PathActions = {\r\n\r\n\tMOVE_TO: 'moveTo',\r\n\tLINE_TO: 'lineTo',\r\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\r\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\r\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-rom spline\r\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\r\n\tELLIPSE: 'ellipse'\r\n};\r\n\r\n// TODO Clean up PATH API\r\n\r\n// Create path using straight lines to connect all points\r\n// - vectors: array of Vector2\r\n\r\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\r\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\r\n\r\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\r\n\r\n\t};\r\n\r\n};\r\n\r\n// startPath() endPath()?\r\n\r\nTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n//---\r\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\tArray.prototype.push.apply( npts, pts );\r\n\r\n\tvar curve = new THREE.SplineCurve( npts );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\r\n\r\n};\r\n\r\n// FUTURE: Change the API or follow canvas API?\r\n\r\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absarc(aX + x0, aY + y0, aRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\tthis.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\r\n };\r\n\r\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absellipse(aX + x0, aY + y0, xRadius, yRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n\r\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\tthis.curves.push( curve );\r\n\r\n\tvar lastPoint = curve.getPoint(1);\r\n\targs.push(lastPoint.x);\r\n\targs.push(lastPoint.y);\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\r\n\r\n\tif ( ! divisions ) divisions = 40;\r\n\r\n\tvar points = [];\r\n\r\n\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t}\r\n\r\n\t// if ( closedPath ) {\r\n\t//\r\n\t// \tpoints.push( points[ 0 ] );\r\n\t//\r\n\t// }\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n/* Return an array of vectors based on contour of the path */\r\n\r\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\r\n\r\n\tif (this.useSpacedPoints) {\r\n\t\tconsole.log('tata');\r\n\t\treturn this.getSpacedPoints( divisions, closedPath );\r\n\t}\r\n\r\n\tdivisions = divisions || 12;\r\n\r\n\tvar points = [];\r\n\r\n\tvar i, il, item, action, args;\r\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\tlaste, j,\r\n\t\tt, tx, ty;\r\n\r\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\r\n\r\n\t\titem = this.actions[ i ];\r\n\r\n\t\taction = item.action;\r\n\t\targs = item.args;\r\n\r\n\t\tswitch( action ) {\r\n\r\n\t\tcase THREE.PathActions.MOVE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.LINE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 2 ];\r\n\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 4 ];\r\n\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tcpx2 = args[ 2 ];\r\n\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.CSPLINE_THRU:\r\n\r\n\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\tvar spts = [ last ];\r\n\r\n\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) ) ;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.ARC:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t  break;\r\n\t\t  \r\n\t\tcase THREE.PathActions.ELLIPSE:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\taClockwise = !! args[ 6 ];\r\n\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t  break;\r\n\r\n\t\t} // end switch\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Normalize to remove the closing point by default.\r\n\tvar lastPoint = points[ points.length - 1];\r\n\tvar EPSILON = 0.0000000001;\r\n\tif ( Math.abs(lastPoint.x - points[ 0 ].x) < EPSILON &&\r\n\t\t\t Math.abs(lastPoint.y - points[ 0 ].y) < EPSILON)\r\n\t\tpoints.splice( points.length - 1, 1);\r\n\tif ( closedPath ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n//\r\n// Breaks path into shapes\r\n//\r\n//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n//\t- solid shapes are defined clockwise (CW)\r\n//\t- holes are defined counterclockwise (CCW)\r\n//\r\n//\tIf parameter noHoles==true:\r\n//  - all subPaths are regarded as solid shapes\r\n//  - definition order CW/CCW has no relevance\r\n//\r\n\r\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\r\n\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\tvar i, il, item, action, args;\r\n\r\n\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\r\n\r\n\t\t\titem = inActions[ i ];\r\n\r\n\t\t\targs = item.args;\r\n\t\t\taction = item.action;\r\n\r\n\t\t\tif ( action == THREE.PathActions.MOVE_TO ) {\r\n\r\n\t\t\t\tif ( lastPath.actions.length != 0 ) {\r\n\r\n\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t}\r\n\r\n\t\tif ( lastPath.actions.length != 0 ) {\r\n\r\n\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log(subPaths);\r\n\r\n\t\treturn\tsubPaths;\r\n\t}\r\n\r\n\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\t};\r\n\r\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t// inPt on polygon contour => immediate success    or\r\n\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\tvar inside = false;\r\n\t\tfor( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\tif ( Math.abs(edgeDy) > EPSILON ) {\t\t\t// not parallel\r\n\t\t\t\tif ( edgeDy < 0 ) {\r\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\t\t\t\t}\r\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\tif ( inPt.y == edgeLowPt.y ) {\r\n\t\t\t\t\tif ( inPt.x == edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\r\n\t\t\t\t\tif ( perpEdge == 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t// parallel or colinear\r\n\t\t\t\tif ( inPt.y != edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t// egde lies on the same horizontal line as inPt\r\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t// continue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn\tinside;\r\n\t}\r\n\r\n\r\n\tvar subPaths = extractSubpaths( this.actions );\r\n\tif ( subPaths.length == 0 ) return [];\r\n\r\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\tif ( subPaths.length == 1) {\r\n\r\n\t\ttmpPath = subPaths[0];\r\n\t\ttmpShape = new THREE.Shape();\r\n\t\ttmpShape.actions = tmpPath.actions;\r\n\t\ttmpShape.curves = tmpPath.curves;\r\n\t\tshapes.push( tmpShape );\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\r\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t// console.log(\"Holes first\", holesFirst);\r\n\t\r\n\tvar betterShapeHoles = [];\r\n\tvar newShapes = [];\r\n\tvar newShapeHoles = [];\r\n\tvar mainIdx = 0;\r\n\tvar tmpPoints;\r\n\r\n\tnewShapes[mainIdx] = undefined;\r\n\tnewShapeHoles[mainIdx] = [];\r\n\r\n\tvar i, il;\r\n\r\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\r\n\r\n\t\ttmpPath = subPaths[ i ];\r\n\t\ttmpPoints = tmpPath.getPoints();\r\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\r\n\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\tif ( solid ) {\r\n\r\n\t\t\tif ( (! holesFirst ) && ( newShapes[mainIdx] ) )\tmainIdx ++;\r\n\r\n\t\t\tnewShapes[mainIdx] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\tnewShapes[mainIdx].s.actions = tmpPath.actions;\r\n\t\t\tnewShapes[mainIdx].s.curves = tmpPath.curves;\r\n\t\t\t\r\n\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\tnewShapeHoles[mainIdx] = [];\r\n\r\n\t\t\t//console.log('cw', i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewShapeHoles[mainIdx].push( { h: tmpPath, p: tmpPoints[0] } );\r\n\r\n\t\t\t//console.log('ccw', i);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// only Holes? -> probably all Shapes with wrong orientation\r\n\tif ( ! newShapes[0] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tif ( newShapes.length > 1 ) {\r\n\t\tvar ambigious = false;\r\n\t\tvar toChange = [];\r\n\r\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\t\tbetterShapeHoles[sIdx] = [];\r\n\t\t}\r\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\t\tvar sh = newShapes[sIdx];\r\n\t\t\tvar sho = newShapeHoles[sIdx];\r\n\t\t\tfor (var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\t\t\t\tvar ho = sho[hIdx];\r\n\t\t\t\tvar hole_unassigned = true;\r\n\t\t\t\tfor (var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[s2Idx].p ) ) {\r\n\t\t\t\t\t\tif ( sIdx != s2Idx )\t\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\tbetterShapeHoles[s2Idx].push( ho );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tambigious = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ( hole_unassigned ) { betterShapeHoles[sIdx].push( ho ); }\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log(\"ambigious: \", ambigious);\r\n\t\tif ( toChange.length > 0 ) {\r\n\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\tif (! ambigious)\tnewShapeHoles = betterShapeHoles;\r\n\t\t}\r\n\t}\r\n\r\n\tvar tmpHoles, j, jl;\r\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\t\ttmpShape = newShapes[i].s;\r\n\t\tshapes.push( tmpShape );\r\n\t\ttmpHoles = newShapeHoles[i];\r\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\t\t\ttmpShape.holes.push( tmpHoles[j].h );\r\n\t\t}\r\n\t}\r\n\r\n\t//console.log(\"shape\", shapes);\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\nTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\r\n// Convenience method to return ExtrudeGeometry\r\n\r\nTHREE.Shape.prototype.extrude = function ( options ) {\r\n\r\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\r\n\treturn extruded;\r\n\r\n};\r\n\r\n// Convenience method to return ShapeGeometry\r\n\r\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\r\n\tvar geometry = new THREE.ShapeGeometry( this, options );\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// Get points of holes\r\n\r\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n// Get points of holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n\r\n// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedPoints( divisions ),\r\n\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\r\n\tif (this.useSpacedPoints) {\r\n\t\treturn this.extractAllSpacedPoints(divisions);\r\n\t}\r\n\r\n\treturn this.extractAllPoints(divisions);\r\n\r\n};\r\n\r\n//\r\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\r\n//\r\n// \treturn {\r\n//\r\n// \t\tshape: this.transform( bend, divisions ),\r\n// \t\tholes: this.getPointsHoles( divisions, bend )\r\n//\r\n// \t};\r\n//\r\n// };\r\n\r\n// Get points of shape and holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\r\n\t\tholes: this.getSpacedPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Shape.Utils = {\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\t\t\t// inOtherPt needs to be colinear to the inSegment\r\n\t\t\tif ( inSegPt1.x != inSegPt2.x ) {\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs(limit) > EPSILON ) {\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 == 0 ) {\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 == limit ) {\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn  [ inSeg1Pt2 ];\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 == 0 )\t\treturn  [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 == limit )\treturn  [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\t\t// parallel or colinear\r\n\t\t\t\tif ( ( perpSeg1 != 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx != seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( (seg1dx == 0) && (seg1dy == 0) );\t// segment1 ist just a point?\r\n\t\t\t\tvar seg2Pt = ( (seg2dx == 0) && (seg2dy == 0) );\t// segment2 ist just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\t\t\t\t\tif ( (inSeg1Pt1.x != inSeg2Pt1.x) ||\r\n\t\t\t\t\t\t (inSeg1Pt1.y != inSeg2Pt1.y) )\t\treturn [];   \t// they are distinct  points\r\n\t\t\t\t\treturn  [ inSeg1Pt1 ];                 \t\t\t\t\t// they are the same point\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn  [ inSeg2Pt1 ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif (seg1dx != 0) {\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal == seg2minVal )\t{\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal == seg2maxVal )\t{\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs(from2toAngle) > EPSILON ) {\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\t\t\t\t} else {\t\t\t\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[inShapeIdx], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[inHoleIdx] );\r\n\t\t\t\tif (! insideAngle ) {\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[inHoleIdx], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[inShapeIdx] );\r\n\t\t\t\tif (! insideAngle ) {\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\t\t\t\t\tnextIdx = sIdx+1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[sIdx], shape[nextIdx], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\t\t\t\t\tchkHole = holes[indepHoles[ihIdx]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\t\t\t\t\t\tnextIdx = hIdx+1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[hIdx], chkHole[nextIdx], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\t\t\t\t\t\tholeIdx = indepHoles[h];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[cutKey] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[holeIdx];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif (! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice(h,1);\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex+1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex+1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[cutKey] = true;\t\t\t// remember failure\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[h] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.log( \"Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * p;\r\n\r\n\t},\r\n\r\n\tb2p1: function ( t, p ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t},\r\n\r\n\tb2p2: function ( t, p ) {\r\n\r\n\t\treturn t * t * p;\r\n\r\n\t},\r\n\r\n\tb2: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\r\n\r\n\t},\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * k * p;\r\n\r\n\t},\r\n\r\n\tb3p1: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * k * t * p;\r\n\r\n\t},\r\n\r\n\tb3p2: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3p3: function ( t, p ) {\r\n\r\n\t\treturn t * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub(this.v1);\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub(this.v1);\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\t// returns unit vector\r\n\r\n\treturn vector.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\treturn new THREE.Vector2( tx, ty );\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\tvar tangent = new THREE.Vector2( tx, ty );\r\n\ttangent.normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ]\r\n\tvar point1 = points[ intPoint ]\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length -1 : intPoint + 1 ]\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length -1 : intPoint + 2 ]\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvector.y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */) {\r\n\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */) {\r\n\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\r\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\r\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\r\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/animation/AnimationHandler.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\nTHREE.AnimationHandler = {\r\n\r\n\tLINEAR: 0,\r\n\tCATMULLROM: 1,\r\n\tCATMULLROM_FORWARD: 2,\r\n\r\n\t//\r\n\r\n\tadd: function () { console.warn( 'THREE.AnimationHandler.add() has been deprecated.' ); },\r\n\tget: function () { console.warn( 'THREE.AnimationHandler.get() has been deprecated.' ); },\r\n\tremove: function () { console.warn( 'THREE.AnimationHandler.remove() has been deprecated.' ); },\r\n\r\n\t//\r\n\r\n\tanimations: [],\r\n\r\n\tinit: function ( data ) {\r\n\r\n\t\tif ( data.initialized === true ) return data;\r\n\r\n\t\t// loop through all keys\r\n\r\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t// remove minus times\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\r\n\r\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create quaternions\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\r\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\r\n\r\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// prepare morph target keys\r\n\r\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\r\n\r\n\t\t\t\t// get all used\r\n\r\n\t\t\t\tvar usedMorphTargets = {};\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\r\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\r\n\r\n\r\n\t\t\t\t// set all used on all frames\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tvar influences = {};\r\n\r\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\r\n\r\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\r\n\r\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// remove all keys that are on the same time\r\n\r\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\r\n\t\t\t\t\tk --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// set index\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdata.initialized = true;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tparse: function ( root ) {\r\n\r\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\r\n\r\n\t\t\thierarchy.push( root );\r\n\r\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\r\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\r\n\r\n\t\t};\r\n\r\n\t\t// setup hierarchy\r\n\r\n\t\tvar hierarchy = [];\r\n\r\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\r\n\r\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tparseRecurseHierarchy( root, hierarchy );\r\n\r\n\t\t}\r\n\r\n\t\treturn hierarchy;\r\n\r\n\t},\r\n\r\n\tplay: function ( animation ) {\r\n\r\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\r\n\r\n\t\t\tthis.animations.push( animation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstop: function ( animation ) {\r\n\r\n\t\tvar index = this.animations.indexOf( animation );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tthis.animations.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( deltaTimeMS ) {\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].resetBlendWeights( );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/Animation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Animation = function ( root, data ) {\r\n\r\n\tthis.root = root;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\r\n\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 1;\r\n\r\n\tthis.isPlaying = false;\r\n\tthis.loop = true;\r\n\tthis.weight = 0;\r\n\r\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\r\n\r\n};\r\n\r\n\r\nTHREE.Animation.prototype.keyTypes = [ \"pos\", \"rot\", \"scl\" ];\r\n\r\n\r\nTHREE.Animation.prototype.play = function ( startTime, weight ) {\r\n\r\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\tthis.weight = weight !== undefined ? weight: 1;\r\n\r\n\tthis.isPlaying = true;\r\n\r\n\tthis.reset();\r\n\r\n\tTHREE.AnimationHandler.play( this );\r\n\r\n};\r\n\r\n\r\nTHREE.Animation.prototype.stop = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\r\n\tTHREE.AnimationHandler.stop( this );\r\n\r\n};\r\n\r\nTHREE.Animation.prototype.reset = function () {\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar object = this.hierarchy[ h ];\r\n\r\n\t\tif ( object.animationCache === undefined ) {\r\n\r\n\t\t\tobject.animationCache = {\r\n\t\t\t\tanimations: {},\r\n\t\t\t\tblending: {\r\n\t\t\t\t\tpositionWeight: 0.0,\r\n\t\t\t\t\tquaternionWeight: 0.0,\r\n\t\t\t\t\tscaleWeight: 0.0\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif ( object.animationCache.animations[this.data.name] === undefined ) {\r\n\r\n\t\t\tobject.animationCache.animations[this.data.name] = {};\r\n\t\t\tobject.animationCache.animations[this.data.name].prevKey = { pos: 0, rot: 0, scl: 0 };\r\n\t\t\tobject.animationCache.animations[this.data.name].nextKey = { pos: 0, rot: 0, scl: 0 };\r\n\t\t\tobject.animationCache.animations[this.data.name].originalMatrix = object.matrix;\r\n\r\n\t\t}\r\n\r\n\t\tvar animationCache = object.animationCache.animations[this.data.name];\r\n\r\n\t\t// Get keys to match our current time\r\n\r\n\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\tvar type = this.keyTypes[ t ];\r\n\r\n\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\tprevKey = nextKey;\r\n\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Animation.prototype.resetBlendWeights = function () {\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar object = this.hierarchy[ h ];\r\n\r\n\t\tif ( object.animationCache !== undefined ) {\r\n\r\n\t\t\tobject.animationCache.blending.positionWeight = 0.0;\r\n\t\t\tobject.animationCache.blending.quaternionWeight = 0.0;\r\n\t\t\tobject.animationCache.blending.scaleWeight = 0.0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Animation.prototype.update = (function(){\r\n\r\n\tvar points = [];\r\n\tvar target = new THREE.Vector3();\r\n\tvar newVector = new THREE.Vector3();\r\n\tvar newQuat = new THREE.Quaternion();\r\n\r\n\t// Catmull-Rom spline\r\n\r\n\tvar interpolateCatmullRom = function ( points, scale ) {\r\n\r\n\t\tvar c = [], v3 = [],\r\n\t\tpoint, intPoint, weight, w2, w3,\r\n\t\tpa, pb, pc, pd;\r\n\r\n\t\tpoint = ( points.length - 1 ) * scale;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\r\n\r\n\t\tpa = points[ c[ 0 ] ];\r\n\t\tpb = points[ c[ 1 ] ];\r\n\t\tpc = points[ c[ 2 ] ];\r\n\t\tpd = points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\r\n\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\r\n\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t};\r\n\r\n\treturn function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t\tif ( this.weight === 0 )\r\n\t\t\treturn;\r\n\r\n\t\t//\r\n\r\n\t\tvar duration = this.data.length;\r\n\r\n\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\r\n\r\n\t\t\tif ( this.loop ) {\r\n\r\n\t\t\t\tthis.currentTime %= duration;\r\n\r\n\t\t\t\tif ( this.currentTime < 0 )\r\n\t\t\t\t\tthis.currentTime += duration;\r\n\r\n\t\t\t\tthis.reset();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.stop();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\tvar animationCache = object.animationCache.animations[this.data.name];\r\n\t\t\tvar blending = object.animationCache.blending;\r\n\r\n\t\t\t// loop through pos/rot/scl\r\n\r\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\t\t// get keys\r\n\r\n\t\t\t\tvar type    = this.keyTypes[ t ];\r\n\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\r\n\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\r\n\r\n\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\r\n\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\r\n\r\n\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\r\n\r\n\t\t\t\tvar prevXYZ = prevKey[ type ];\r\n\t\t\t\tvar nextXYZ = nextKey[ type ];\r\n\r\n\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\r\n\t\t\t\t// interpolate\r\n\r\n\t\t\t\tif ( type === \"pos\" ) {\r\n\r\n\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\r\n\r\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\t\t// blend\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\r\n\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\r\n\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\r\n\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\r\n\r\n\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\r\n\r\n\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t// blend\r\n\r\n\t\t\t\t\t\tvar vector = object.position;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\r\n\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\r\n\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\r\n\r\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\r\n\r\n\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\r\n\t\t\t\t\t\t\ttarget.sub( vector );\r\n\t\t\t\t\t\t\ttarget.y = 0;\r\n\t\t\t\t\t\t\ttarget.normalize();\r\n\r\n\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\r\n\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( type === \"rot\" ) {\r\n\r\n\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\r\n\r\n\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\r\n\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\r\n\r\n\t\t\t\t\t\tobject.quaternion.copy(newQuat);\r\n\t\t\t\t\t\tblending.quaternionWeight = this.weight;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\r\n\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\r\n\t\t\t\t\t\tblending.quaternionWeight += this.weight;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( type === \"scl\" ) {\r\n\r\n\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\r\n\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\tblending.scaleWeight += this.weight;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n})();\r\n\r\n\r\n\r\n\r\n\r\n// Get next key with\r\n\r\nTHREE.Animation.prototype.getNextKeyWith = function ( type, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\r\n\r\n\t} else {\r\n\r\n\t\tkey = key % keys.length;\r\n\r\n\t}\r\n\r\n\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn this.data.hierarchy[ h ].keys[ 0 ];\r\n\r\n};\r\n\r\n// Get previous key with\r\n\r\nTHREE.Animation.prototype.getPrevKeyWith = function ( type, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\tkey = key > 0 ? key : 0;\r\n\r\n\t} else {\r\n\r\n\t\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\t}\r\n\r\n\r\n\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\r\n\r\n};\r\n\r\n// File:src/extras/animation/KeyFrameAnimation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author khang duong\r\n * @author erik kitson\r\n */\r\n\r\nTHREE.KeyFrameAnimation = function ( data ) {\r\n\r\n\tthis.root = data.node;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 0.001;\r\n\tthis.isPlaying = false;\r\n\tthis.isPaused = true;\r\n\tthis.loop = true;\r\n\r\n\t// initialize to first keyframes\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[h].keys,\r\n\t\t\tsids = this.data.hierarchy[h].sids,\r\n\t\t\tobj = this.hierarchy[h];\r\n\r\n\t\tif ( keys.length && sids ) {\r\n\r\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\r\n\r\n\t\t\t\tvar sid = sids[ s ],\r\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\r\n\r\n\t\t\t\tif ( next ) {\r\n\r\n\t\t\t\t\tnext.apply( sid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobj.matrixAutoUpdate = false;\r\n\t\t\tthis.data.hierarchy[h].node.updateMatrix();\r\n\t\t\tobj.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\nTHREE.KeyFrameAnimation.prototype.play = function ( startTime ) {\r\n\r\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\r\n\tif ( this.isPlaying === false ) {\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\t// reset key cache\r\n\r\n\t\tvar h, hl = this.hierarchy.length,\r\n\t\t\tobject,\r\n\t\t\tnode;\r\n\r\n\t\tfor ( h = 0; h < hl; h ++ ) {\r\n\r\n\t\t\tobject = this.hierarchy[ h ];\r\n\t\t\tnode = this.data.hierarchy[ h ];\r\n\r\n\t\t\tif ( node.animationCache === undefined ) {\r\n\r\n\t\t\t\tnode.animationCache = {};\r\n\t\t\t\tnode.animationCache.prevKey = null;\r\n\t\t\t\tnode.animationCache.nextKey = null;\r\n\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar keys = this.data.hierarchy[h].keys;\r\n\r\n\t\t\tif (keys.length) {\r\n\r\n\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\r\n\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\r\n\r\n\t\t\t\tthis.startTime = Math.min( keys[0].time, this.startTime );\r\n\t\t\t\tthis.endTime = Math.max( keys[keys.length - 1].time, this.endTime );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.update( 0 );\r\n\r\n\t}\r\n\r\n\tthis.isPaused = false;\r\n\r\n\tTHREE.AnimationHandler.play( this );\r\n\r\n};\r\n\r\n\r\nTHREE.KeyFrameAnimation.prototype.stop = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\tthis.isPaused  = false;\r\n\r\n\tTHREE.AnimationHandler.stop( this );\r\n\r\n\t// reset JIT matrix and remove cache\r\n\r\n\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\r\n\t\t\r\n\t\tvar obj = this.hierarchy[ h ];\r\n\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\tif ( node.animationCache !== undefined ) {\r\n\r\n\t\t\tvar original = node.animationCache.originalMatrix;\r\n\r\n\t\t\toriginal.copy( obj.matrix );\r\n\t\t\tobj.matrix = original;\r\n\r\n\t\t\tdelete node.animationCache;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Update\r\n\r\nTHREE.KeyFrameAnimation.prototype.update = function ( delta ) {\r\n\r\n\tif ( this.isPlaying === false ) return;\r\n\r\n\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t//\r\n\r\n\tvar duration = this.data.length;\r\n\r\n\tif ( this.loop === true && this.currentTime > duration ) {\r\n\r\n\t\tthis.currentTime %= duration;\r\n\r\n\t}\r\n\r\n\tthis.currentTime = Math.min( this.currentTime, duration );\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar object = this.hierarchy[ h ];\r\n\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\tvar keys = node.keys,\r\n\t\t\tanimationCache = node.animationCache;\r\n\r\n\r\n\t\tif ( keys.length ) {\r\n\r\n\t\t\tvar prevKey = animationCache.prevKey;\r\n\t\t\tvar nextKey = animationCache.nextKey;\r\n\r\n\t\t\tif ( nextKey.time <= this.currentTime ) {\r\n\r\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationCache.prevKey = prevKey;\r\n\t\t\t\tanimationCache.nextKey = nextKey;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nextKey.time >= this.currentTime ) {\r\n\r\n\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Get next key with\r\n\r\nTHREE.KeyFrameAnimation.prototype.getNextKeyWith = function( sid, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\tkey = key % keys.length;\r\n\r\n\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn keys[ 0 ];\r\n\r\n};\r\n\r\n// Get previous key with\r\n\r\nTHREE.KeyFrameAnimation.prototype.getPrevKeyWith = function( sid, h, key ) {\r\n\r\n\tvar keys = this.data.hierarchy[ h ].keys;\r\n\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\treturn keys[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn keys[ keys.length - 1 ];\r\n\r\n};\r\n\r\n// File:src/extras/animation/MorphAnimation.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com\r\n * @author willy-vvu / http://willy-vvu.github.io\r\n */\r\n\r\nTHREE.MorphAnimation = function ( mesh ) {\r\n\r\n\tthis.mesh = mesh;\r\n\tthis.frames = mesh.morphTargetInfluences.length;\r\n\tthis.currentTime = 0;\r\n\tthis.duration = 1000;\r\n\tthis.loop = true;\r\n\tthis.lastFrame = 0;\r\n\tthis.currentFrame = 0;\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimation.prototype = {\r\n\r\n\tconstructor: THREE.MorphAnimation,\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tupdate: function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta;\r\n\r\n\t\tif ( this.loop === true && this.currentTime > this.duration ) {\r\n\r\n\t\t\tthis.currentTime %= this.duration;\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\r\n\r\n\t\tvar interpolation = this.duration / this.frames;\r\n\t\tvar frame = Math.floor( this.currentTime / interpolation );\r\n\r\n\t\tif ( frame != this.currentFrame ) {\r\n\r\n\t\t\tthis.mesh.morphTargetInfluences[ this.lastFrame ] = 0;\r\n\t\t\tthis.mesh.morphTargetInfluences[ this.currentFrame ] = 1;\r\n\t\t\tthis.mesh.morphTargetInfluences[ frame ] = 0;\r\n\r\n\t\t\tthis.lastFrame = this.currentFrame;\r\n\t\t\tthis.currentFrame = frame;\r\n\r\n\t\t}\r\n\r\n\t\tthis.mesh.morphTargetInfluences[ frame ] = ( this.currentTime % interpolation ) / interpolation;\r\n\t\tthis.mesh.morphTargetInfluences[ this.lastFrame ] = 1 - this.mesh.morphTargetInfluences[ frame ];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.widthSegments = widthSegments || 1;\r\n\tthis.heightSegments = heightSegments || 1;\r\n\tthis.depthSegments = depthSegments || 1;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\tvar depth_half = depth / 2;\r\n\r\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\r\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\r\n\t\tvar w, ix, iy,\r\n\t\tgridX = scope.widthSegments,\r\n\t\tgridY = scope.heightSegments,\r\n\t\twidth_half = width / 2,\r\n\t\theight_half = height / 2,\r\n\t\toffset = scope.vertices.length;\r\n\r\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'z';\r\n\r\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'y';\r\n\t\t\tgridY = scope.depthSegments;\r\n\r\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\r\n\t\t\tw = 'x';\r\n\t\t\tgridX = scope.depthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tvar gridX1 = gridX + 1,\r\n\t\tgridY1 = gridY + 1,\r\n\t\tsegment_width = width / gridX,\r\n\t\tsegment_height = height / gridY,\r\n\t\tnormal = new THREE.Vector3();\r\n\r\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\tvector[ w ] = depth;\r\n\r\n\t\t\t\tscope.vertices.push( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\r\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar i, uvs = [],\r\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\r\n\r\n\tthis.vertices.push(center);\r\n\tuvs.push( centerUV );\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar vertex = new THREE.Vector3();\r\n\t\tvar segment = thetaStart + i / segments * thetaLength;\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tthis.vertices.push( vertex );\r\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\n// File:src/extras/geometries/CubeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\nTHREE.CubeGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tconsole.warn( 'THREE.CubeGeometry has been renamed to THREE.BoxGeometry.' );\r\n\treturn new THREE.BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments );\r\n\r\n };\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = radialSegments || 8;\r\n\theightSegments = heightSegments || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\r\n\tvar heightHalf = height / 2;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\tvar na, nb;\r\n\r\n\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\tif ( radiusTop !== 0 ) {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\r\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = na.clone();\r\n\t\t\tvar n2 = na.clone();\r\n\t\t\tvar n3 = nb.clone();\r\n\t\t\tvar n4 = nb.clone();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// top cap\r\n\r\n\tif ( openEnded === false && radiusTop > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// bottom cap\r\n\r\n\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ heightSegments ][ x ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segements of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  material: <int> // material index for front and back faces\r\n *  extrudeMaterial: <int> // material index for extrusion and beveled faces\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = shapes instanceof Array ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\t}\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\tvar material = options.material;\r\n\tvar extrudeMaterial = options.extrudeMaterial;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames(extrudePath, steps, false);\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initalization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\tvar bevelPoints = [];\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices ) ;\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.log( \"die\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length,\r\n\t\tcont, clen = contour.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\tvar RAD_TO_DEGREES = 180 / Math.PI;\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\tvar EPSILON = 0.0000000001;\r\n\t\t\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shiftet by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\t\t\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\t\t\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\t\t\r\n\t\t// check for colinear edges\r\n\t\tvar colinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\t\r\n\t\tif ( Math.abs( colinear0 ) > EPSILON ) {\t\t// not colinear\r\n\t\t\t\r\n\t\t\t// length of vectors for normalizing\r\n\t\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\t\t\t\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\t\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\t\t\t\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\t\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\t\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\r\n\t\t\t// vector from inPt to intersection point\r\n\t\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\t\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y )\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\t\t\t} else {\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\t\t// handle special case of colinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > EPSILON ) {\r\n\t\t\t\tif ( v_next_x > EPSILON ) { direction_eq = true; }\r\n\t\t\t} else {\r\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\r\n\t\t\t\t\tif ( v_next_x < - EPSILON ) { direction_eq = true; }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( Math.sign(v_prev_y) == Math.sign(v_next_y) ) { direction_eq = true; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tvar pt_i = contour[ i ];\r\n\t\tvar pt_j = contour[ j ];\r\n\t\tvar pt_k = contour[ k ];\r\n\r\n\t\tcontourMovements[ i ]= getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ]= getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI/2 ) ) ; // curved\r\n\t\t//bs = bevelSize * t ; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[0] ).multiplyScalar(vert.x);\r\n\t\t\tbinormal.copy( splineTube.binormals[0] ).multiplyScalar(vert.y);\r\n\r\n\t\t\tposition2.copy( extrudePts[0] ).add(normal).add(binormal);\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[s] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[s] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[s] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI/2 ) ;\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0 ; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ]+ offset, face[ 1 ]+ offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( --i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\t// normal, color, material\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n \t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n \t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, extrudeMaterial ) );\r\n \t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, extrudeMaterial ) );\r\n\r\n \t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( shapes instanceof Array === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole, s;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tvar contour = vertices;\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\tvar cont, clen = contour.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points \r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = segments || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || 2 * Math.PI;\r\n\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\r\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar c = Math.cos( phi ),\r\n\t\t\ts = Math.sin( phi );\r\n\r\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar pt = points[ j ];\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = c * pt.x - s * pt.y;\r\n\t\t\tvertex.y = s * pt.x + c * pt.y;\r\n\t\t\tvertex.z = pt.z;\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar np = points.length;\r\n\r\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\r\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\r\n\t\t\tvar base = j + np * i;\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + np;\r\n\t\t\tvar c = base + 1 + np;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\tvar v1 = v0 + inversePointLength;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tconsole.info( 'THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint.' );\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = widthSegments || 1;\r\n\tvar gridY = heightSegments || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset     ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2     ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset     ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\r\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\r\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) { // concentric circles inside ring\r\n\r\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) { // number of segments per circle\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\t\t}\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 0; i < phiSegments; i ++ ) { // concentric circles inside ring\r\n\r\n\t\tvar thetaSegment = i * (thetaSegments + 1);\r\n\r\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) { // number of segments per circle\r\n\r\n\t\t\tvar segment = o + thetaSegment;\r\n\r\n\t\t\tvar v1 = segment;\r\n\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\r\n\r\n\t\t\tv1 = segment;\r\n\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\tv3 = segment + 1;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength \r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tfor ( x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\t\t\tvar v = y / heightSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = this.vertices[ v1 ].clone().normalize();\r\n\t\t\tvar n2 = this.vertices[ v2 ].clone().normalize();\r\n\t\t\tvar n3 = this.vertices[ v3 ].clone().normalize();\r\n\t\t\tvar n4 = this.vertices[ v4 ].clone().normalize();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv4 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\r\n\t\t\tif ( Math.abs( this.vertices[ v1 ].y ) === radius ) {\r\n\r\n\t\t\t\tuv1.x = ( uv1.x + uv2.x ) / 2;\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v3, v4, [ n1, n3, n4 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv3, uv4 ] );\r\n\r\n\t\t\t} else if ( Math.abs( this.vertices[ v3 ].y ) === radius ) {\r\n\r\n\t\t\t\tuv3.x = ( uv3.x + uv4.x ) / 2;\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For creating 3D text geometry in three.js\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  size: \t\t\t<float>, \t// size of the text\r\n *  height: \t\t<float>, \t// thickness to extrude text\r\n *  curveSegments: \t<int>,\t\t// number of points on the curves\r\n *\r\n *  font: \t\t\t<string>,\t\t// font name\r\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\r\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\r\n *\r\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\r\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\r\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\r\n *  }\r\n *\r\n */\r\n\r\n/*\tUsage Examples\r\n\r\n\t// TextGeometry wrapper\r\n\r\n\tvar text3d = new TextGeometry( text, options );\r\n\r\n\t// Complete manner\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\r\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\r\n\r\n*/\r\n\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 8;\r\n\ttubularSegments = tubularSegments || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\r\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tp: p,\r\n\t\tq: q,\r\n\t\theightScale: heightScale\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 64;\r\n\ttubularSegments = tubularSegments || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\theightScale = heightScale || 1;\r\n\t\r\n\tvar grid = new Array( radialSegments );\r\n\tvar tang = new THREE.Vector3();\r\n\tvar n = new THREE.Vector3();\r\n\tvar bitan = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\ttang.subVectors( p2, p1 );\r\n\t\tn.addVectors( p2, p1 );\r\n\r\n\t\tbitan.crossVectors( tang, n );\r\n\t\tn.crossVectors( bitan, tang );\r\n\t\tbitan.normalize();\r\n\t\tn.normalize();\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\r\n\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\tvar d = grid[ i ][ jp ];\r\n\r\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = in_q / in_p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tx, y, z,\r\n\t\ttx, ty, tz,\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// consruct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? (i + 1) % segments : i + 1;\r\n\t\t\tjp = (j + 1) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\ttangent = new THREE.Vector3(),\r\n\t\tnormal = new THREE.Vector3(),\r\n\t\tbinormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tepsilon = 0.0001,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u, v;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\t\t// select an initial normal vector perpenicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i-1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i-1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i-1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > epsilon ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i-1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints-1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints-1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar midpoints = [], p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i     ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\r\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3 ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow(2, detail);\r\n\t\tvar cells = Math.pow(4, detail);\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++) {\r\n\r\n\t\t\t\tif ( j == 0 && i == cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 == 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1][ k + 1],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t-1, -1, -1,    -1, -1,  1,\r\n\t\t-1,  1, -1,    -1,  1,  1,\r\n\t\t 1, -1, -1,     1, -1,  1,\r\n\t\t 1,  1, -1,     1,  1,  1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, -r, -t,     0, -r,  t,\r\n\t\t 0,  r, -t,     0,  r,  t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t-r, -t,  0,    -r,  t,  0,\r\n\t\t r, -t,  0,     r,  t,  0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t-t,  0, -r,     t,  0, -r,\r\n\t\t-t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, il, j, p;\r\n\tvar u, v;\r\n\r\n\tvar stackCount = stacks + 1;\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = (i + 1) * sliceCount + j + 1;\r\n\t\t\td = (i + 1) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.Geometry();\r\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\r\n\r\n\treturn function ( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\r\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\tthis.line.matrixAutoUpdate = false;\r\n\t\tthis.add( this.line );\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t}\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function ( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, length - headLength, 1 );\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( 72 ), 3 ) );\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ), THREE.LinePieces );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = function ( object ) {\r\n\r\n\tvar geometry = object.geometry;\r\n\r\n\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\tgeometry.computeBoundingBox();\r\n\r\n\t}\r\n\r\n\tvar min = geometry.boundingBox.min;\r\n\tvar max = geometry.boundingBox.max;\r\n\r\n\t/*\r\n\t  5____4\r\n\t1/___0/|\r\n\t| 6__|_7\r\n\t2/___3/\r\n\r\n\t0: max.x, max.y, max.z\r\n\t1: min.x, max.y, max.z\r\n\t2: min.x, min.y, max.z\r\n\t3: max.x, min.y, max.z\r\n\t4: max.x, max.y, min.z\r\n\t5: min.x, max.y, min.z\r\n\t6: min.x, min.y, min.z\r\n\t7: max.x, min.y, min.z\r\n\t*/\r\n\r\n\tvar vertices = this.geometry.attributes.position.array;\r\n\r\n\tvertices[  0 ] = max.x; vertices[  1 ] = max.y; vertices[  2 ] = max.z;\r\n\tvertices[  3 ] = min.x; vertices[  4 ] = max.y; vertices[  5 ] = max.z;\r\n\r\n\tvertices[  6 ] = min.x; vertices[  7 ] = max.y; vertices[  8 ] = max.z;\r\n\tvertices[  9 ] = min.x; vertices[ 10 ] = min.y; vertices[ 11 ] = max.z;\r\n\r\n\tvertices[ 12 ] = min.x; vertices[ 13 ] = min.y; vertices[ 14 ] = max.z;\r\n\tvertices[ 15 ] = max.x; vertices[ 16 ] = min.y; vertices[ 17 ] = max.z;\r\n\r\n\tvertices[ 18 ] = max.x; vertices[ 19 ] = min.y; vertices[ 20 ] = max.z;\r\n\tvertices[ 21 ] = max.x; vertices[ 22 ] = max.y; vertices[ 23 ] = max.z;\r\n\r\n\t//\r\n\r\n\tvertices[ 24 ] = max.x; vertices[ 25 ] = max.y; vertices[ 26 ] = min.z;\r\n\tvertices[ 27 ] = min.x; vertices[ 28 ] = max.y; vertices[ 29 ] = min.z;\r\n\r\n\tvertices[ 30 ] = min.x; vertices[ 31 ] = max.y; vertices[ 32 ] = min.z;\r\n\tvertices[ 33 ] = min.x; vertices[ 34 ] = min.y; vertices[ 35 ] = min.z;\r\n\r\n\tvertices[ 36 ] = min.x; vertices[ 37 ] = min.y; vertices[ 38 ] = min.z;\r\n\tvertices[ 39 ] = max.x; vertices[ 40 ] = min.y; vertices[ 41 ] = min.z;\r\n\r\n\tvertices[ 42 ] = max.x; vertices[ 43 ] = min.y; vertices[ 44 ] = min.z;\r\n\tvertices[ 45 ] = max.x; vertices[ 46 ] = max.y; vertices[ 47 ] = min.z;\r\n\r\n\t//\r\n\r\n\tvertices[ 48 ] = max.x; vertices[ 49 ] = max.y; vertices[ 50 ] = max.z;\r\n\tvertices[ 51 ] = max.x; vertices[ 52 ] = max.y; vertices[ 53 ] = min.z;\r\n\r\n\tvertices[ 54 ] = min.x; vertices[ 55 ] = max.y; vertices[ 56 ] = max.z;\r\n\tvertices[ 57 ] = min.x; vertices[ 58 ] = max.y; vertices[ 59 ] = min.z;\r\n\r\n\tvertices[ 60 ] = min.x; vertices[ 61 ] = min.y; vertices[ 62 ] = max.z;\r\n\tvertices[ 63 ] = min.x; vertices[ 64 ] = min.y; vertices[ 65 ] = min.z;\r\n\r\n\tvertices[ 66 ] = max.x; vertices[ 67 ] = min.y; vertices[ 68 ] = max.z;\r\n\tvertices[ 69 ] = max.x; vertices[ 70 ] = min.y; vertices[ 71 ] = min.z;\r\n\r\n\tthis.geometry.attributes.position.needsUpdate = true;\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n\tthis.camera = camera;\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\t\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tvar setPoint = function ( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t);\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3(),\r\n\t\tnew THREE.Vector3()\r\n\t);\r\n\r\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.targetLine = new THREE.Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tthis.lightPlane.lookAt( v3 );\r\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) { return a - b };\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar geometry2 = object.geometry.clone();\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\tvar numEdges = 0;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\tvar index = 0;\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) < 0.9999 ) { // hardwired const OK\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords[ index ++ ] = vertex.x;\r\n\t\t\tcoords[ index ++ ] = vertex.y;\r\n\t\t\tcoords[ index ++ ] = vertex.z;\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords[ index ++ ] = vertex.x;\r\n\t\t\tcoords[ index ++ ] = vertex.y;\r\n\t\t\tcoords[ index ++ ] = vertex.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tvar faces = this.object.geometry.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.normalMatrix = new THREE.Matrix3();\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = function () {\r\n\r\n\tvar vertices = this.geometry.vertices;\r\n\r\n\tvar object = this.object;\r\n\tvar objectVertices = object.geometry.vertices;\r\n\tvar objectFaces = object.geometry.faces;\r\n\tvar objectWorldMatrix = object.matrixWorld;\r\n\r\n\tobject.updateMatrixWorld( true );\r\n\r\n\tthis.normalMatrix.getNormalMatrix( objectWorldMatrix );\r\n\r\n\tfor ( var i = 0, i2 = 0, l = objectFaces.length; i < l; i ++, i2 += 2 ) {\r\n\r\n\t\tvar face = objectFaces[ i ];\r\n\r\n\t\tvertices[ i2 ].copy( objectVertices[ face.a ] )\r\n\t\t\t.add( objectVertices[ face.b ] )\r\n\t\t\t.add( objectVertices[ face.c ] )\r\n\t\t\t.divideScalar( 3 )\r\n\t\t\t.applyMatrix4( objectWorldMatrix );\r\n\r\n\t\tvertices[ i2 + 1 ].copy( face.normal )\r\n\t\t\t.applyMatrix3( this.normalMatrix )\r\n\t\t\t.normalize()\r\n\t\t\t.multiplyScalar( this.size )\r\n\t\t\t.add( vertices[ i2 ] );\r\n\r\n\t}\r\n\r\n\tthis.geometry.verticesNeedUpdate = true;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tthis.color1 = new THREE.Color( 0x444444 );\r\n\tthis.color2 = new THREE.Color( 0x888888 );\r\n\r\n\tfor ( var i = - size; i <= size; i += step ) {\r\n\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t);\r\n\r\n\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\r\n\t\tgeometry.colors.push( color, color, color, color );\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\r\n\tthis.color1.set( colorCenterLine );\r\n\tthis.color2.set( colorGrid );\r\n\r\n\tthis.geometry.colorsNeedUpdate = true;\r\n\r\n}\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize, arrowLength, domeSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t}\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\r\n\tgeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\r\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n\tthis.cone = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tvar vertices = object.geometry.vertices;\r\n\r\n\tvar faces = object.geometry.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.normalMatrix = new THREE.Matrix3();\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function ( object ) {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function( object ) {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tthis.normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar vertices = this.geometry.vertices;\r\n\r\n\t\tvar verts = this.object.geometry.vertices;\r\n\r\n\t\tvar faces = this.object.geometry.faces;\r\n\r\n\t\tvar worldMatrix = this.object.matrixWorld;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\r\n\t\t\t\tvar vertex = verts[ vertexId ];\r\n\r\n\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\r\n\r\n\t\t\t\tv1.copy( normal ).applyMatrix3( this.normalMatrix ).normalize().multiplyScalar( this.size );\r\n\r\n\t\t\t\tv1.add( vertices[ idx ] );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tvertices[ idx ].copy( v1 );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometry.verticesNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}());\r\n\r\n// File:src/extras/helpers/VertexTangentsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexTangentsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x0000ff;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tvar vertices = object.geometry.vertices;\r\n\r\n\tvar faces = object.geometry.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexTangentsHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.VertexTangentsHelper.prototype.constructor = THREE.VertexTangentsHelper;\r\n\r\nTHREE.VertexTangentsHelper.prototype.update = ( function ( object ) {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function( object ) {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tvar vertices = this.geometry.vertices;\r\n\r\n\t\tvar verts = this.object.geometry.vertices;\r\n\r\n\t\tvar faces = this.object.geometry.faces;\r\n\r\n\t\tvar worldMatrix = this.object.matrixWorld;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\r\n\t\t\t\tvar vertex = verts[ vertexId ];\r\n\r\n\t\t\t\tvar tangent = face.vertexTangents[ j ];\r\n\r\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\r\n\r\n\t\t\t\tv1.copy( tangent ).transformDirection( worldMatrix ).multiplyScalar( this.size );\r\n\r\n\t\t\t\tv1.add( vertices[ idx ] );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tvertices[ idx ].copy( v1 );\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometry.verticesNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}());\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) { return a - b };\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = object.geometry.vertices;\r\n\t\tvar faces = object.geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( object.geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( object.geometry.attributes.index !== undefined ) { // Indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = object.geometry.attributes.position.array;\r\n\t\t\tvar indices = object.geometry.attributes.index.array;\r\n\t\t\tvar drawcalls = object.geometry.drawcalls;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( drawcalls.length === 0 ) {\r\n\r\n\t\t\t\tdrawcalls = [ { count : indices.length, index : 0, start : 0 } ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar start = drawcalls[ o ].start;\r\n\t\t\t\tvar count = drawcalls[ o ].count;\r\n\t\t\t\tvar index = drawcalls[ o ].index;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = index + indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = index + indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = 3 * edges[ 2 * i + j];\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else { // non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = object.geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstartFrame: start,\r\n\t\tendFrame: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\t\t\tvar num = chunks[ 2 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"animation[\" + name + \"] undefined\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.startFrame + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  this['THREE'] = THREE;\r\n}\r\n","var THREE = require('three');\nTHREE.ImageUtils.crossOrigin = '';\nrequire('./MirrorLoader.js')(THREE);\nrequire('./WaterLoader.js')(THREE);\n\nvar App = function(){\n   this.container = document.body;\n   \n   this.scene = new THREE.Scene();\n\n   this.height = window.innerHeight;\n   this.width = window.innerWidth;\n\n   window.camera = this.camera = new THREE.PerspectiveCamera( 45, this.width / this.height, 1, 3000000 );\n   this.camera.up = new THREE.Vector3(0, 0, 1);\n   this.camera.position.set( 10, 100, 0 );\n   this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n   this.renderer = new THREE.WebGLRenderer({ antialias: true });\n   this.renderer.shadowMapType = THREE.PCFSoftShadowMap;\n   this.renderer.setSize( this.width, this.height);\n   this.container.appendChild( this.renderer.domElement );\n\n   // pointLight is just holding a position for the camera\n   this.pointLight = new THREE.PointLight( 0xffffff, 1, 100 );\n   this.pointLight.position.set( 50, 50, 50 );\n\n   window.THREE = THREE;\n\n   this.loader = new THREE.ImageLoader();\n\n   this.makeWater();\n   this.makeEnvironment();\n \n   this.init();\n};\n\nApp.prototype.makeWater = function(){\n\n   var waterNormals = new THREE.ImageUtils.loadTexture( '/textures/bground.jpg' );\n       waterNormals.wrapS = waterNormals.wrapT = THREE.RepeatWrapping; \n\n   this.water = new THREE.Water( this.renderer, this.camera, this.scene, {\n\t\ttextureWidth: 1024, \n\t\ttextureHeight: 1024,\n\t\twaterNormals: waterNormals,\n\t\talpha: 0.5,\n\t\tsunDirection: this.pointLight.position.normalize(),\n\t\tsunColor: 0xFF0000,\n\t\twaterColor: 0x029ABA,\n\t\tdistortionScale: 50,\n\t});\n   \n   this.water.sunDirection.x = 0;\n   this.water.sunDirection.y = 5.0;\n   this.water.sunDirection.z = 2.0;\n\n\n   this.waterPlane = new THREE.Mesh(\n\tnew THREE.PlaneBufferGeometry( 20000, 20000 ),\n\tthis.water.material\n\t);\n\n   this.mirrorMesh = new THREE.Mesh(\n\t\tnew THREE.PlaneBufferGeometry( 20000, 20000 ),\n\t\tthis.water.material\n\t);\n\n   this.mirrorMesh.add( this.water );\n   this.mirrorMesh.rotation.x = - Math.PI * 0.5;\n   this.scene.add( this.mirrorMesh );\n};\n\nApp.prototype.makeEnvironment = function(){\n\tthis.cubeMap = new THREE.CubeTexture( [] );\n    this.cubeMap.format = THREE.RGBFormat;\n\n\n    this.loader.load( 'textures/whitepapers.png', (function ( image ) {\n      \t\tvar getSide = function ( x, y ) {\n\t   \t\t\tvar size = 1024;\n\t   \t\t\tvar canvas = document.createElement( 'canvas' );\n\t   \t\t\tcanvas.width = size;\n\t   \t\t\tcanvas.height = size;\n\t   \t\t\tvar context = canvas.getContext( '2d' );\n\t   \t\t\tcontext.drawImage( image, - x * size, - y * size );\n\t   \t\t\treturn canvas;\n\t   \t\t};\n\t   \n   \t\tthis.cubeMap.images[ 0 ] = getSide( 2, 1 ); // px\n   \t\tthis.cubeMap.images[ 1 ] = getSide( 0, 1 ); // nx\n   \t\tthis.cubeMap.images[ 2 ] = getSide( 1, 0 ); // py\n   \t\tthis.cubeMap.images[ 3 ] = getSide( 1, 2 ); // ny\n   \t\tthis.cubeMap.images[ 4 ] = getSide( 1, 1 ); // pz\n   \t\tthis.cubeMap.images[ 5 ] = getSide( 3, 1 ); // nz\n   \t\tthis.cubeMap.needsUpdate = true;\n   \t}).bind(this));\n\n    this.cubeShader = THREE.ShaderLib.cube;\n    this.cubeShader.uniforms.tCube.value = this.cubeMap;\n\n\tthis.skyBoxMaterial = new THREE.ShaderMaterial( {\n\t\tfragmentShader: this.cubeShader.fragmentShader,\n\t\tvertexShader: this.cubeShader.vertexShader,\n\t\tuniforms: this.cubeShader.uniforms,\n\t\tdepthWrite: false,\n\t\tside: THREE.BackSide\n\t});\n\n   this.skyBox = new THREE.Mesh(\n\t\tnew THREE.BoxGeometry( 1000000, 1000000, 1000000 ),\n\t\tthis.skyBoxMaterial\n\t);\n\n   this.scene.add( this.skyBox );\n\n};\n\n// App.prototype.addLyrics = function(){\n// \tthis.lyrics = [];\n// \tvar audio = document.getElementsByTagName('audio')[0];\n// \tvar audioLoaded = audio.readyState === 4;\n// \taudioLoaded ? playAudio : audio.addEventListener('canplaythrough', startKaraoke);\n// \tvar imagesLoaded = false;\n// \tvar started = false;\n\t\n// \tfunction startKaraoke(){\n// \t\tif(started) return;\n// \t\tif(!imagesLoaded) return window.setTimeout(startKaraoke, 500);\n// \t\tconsole.log(started, imagesLoaded, audioLoaded)\n// \t\tstarted = true;\n// \t\tslideshow();\n// \t}\n\n// \tfunction slideshow(){\n// \t\timages.forEach(setImageTimer);\n// \t\treturn audio.play();\n// \t}\n\n// \tfunction setImageTimer(img){\n// \t\tsetTimeout(playImage.bind(this, img), img.startTime);\n// \t}\n\n// \tfunction playImage(img){\n// \t\tdocument.body.appendChild(img.obj);\n// \t\twindow.setTimeout(stopImage.bind(this, img), img.duration);\n// \t}\n\n// \tfunction stopImage(img){\n// \t\tdocument.body.removeChild(img.obj);\n// \t}\n\n// \tvar images = [\n// \t\t\t{imagePath: \"/textures/lyrics/1.gif\", duration: 4530, startTime: 32927},\n// \t\t\t{imagePath: \"/textures/lyrics/2.gif\", duration: 4530, startTime: 37837},\n// \t\t\t{imagePath: \"/textures/lyrics/3.gif\", duration: 4530, startTime: 43760},\n// \t\t\t{imagePath: \"/textures/lyrics/4.gif\", duration: 4530, startTime: 48695},\n// \t\t\t{imagePath: \"/textures/lyrics/5.gif\", duration: 4530, startTime: 54618},\n\n// \t\t\t{imagePath: \"/textures/lyrics/6.gif\", duration: 4530, startTime: 60540},\n// \t\t\t{imagePath: \"/textures/lyrics/7.gif\", duration: 4530, startTime: 67010},\n// \t\t\t{imagePath: \"/textures/lyrics/8.gif\", duration: 4530, startTime: 72020},\n\n// \t\t\t{imagePath: \"/textures/lyrics/9.gif\", duration: 4530, startTime: 97029},\n// \t\t\t{imagePath: \"/textures/lyrics/10.gif\", duration: 4530, startTime: 102028},\n// \t\t\t{imagePath: \"/textures/lyrics/11.gif\", duration: 4530, startTime: 108025},\n// \t\t\t{imagePath: \"/textures/lyrics/12.gif\", duration: 4530, startTime: 114023},\n// \t\t\t{imagePath: \"/textures/lyrics/13.gif\", duration: 4530, startTime: 119029},\n\n// \t\t\t{imagePath: \"/textures/lyrics/14.gif\", duration: 4530, startTime: 126000},\n// \t\t\t{imagePath: \"/textures/lyrics/15.gif\", duration: 4530, startTime: 131280},\n// \t\t\t{imagePath: \"/textures/lyrics/16.gif\", duration: 4530, startTime: 136280},\n\n// \t\t\t{imagePath: \"/textures/lyrics/17.gif\", duration: 4530, startTime: 152170},\n// \t\t\t{imagePath: \"/textures/lyrics/18.gif\", duration: 4530, startTime: 158190},\n// \t\t\t{imagePath: \"/textures/lyrics/19.gif\", duration: 4530, startTime: 164080},\n// \t\t\t{imagePath: \"/textures/lyrics/20.gif\", duration: 4530, startTime: 169150},\n// \t\t\t{imagePath: \"/textures/lyrics/21.gif\", duration: 4530, startTime: 179080},\n\n// \t\t\t{imagePath: \"/textures/lyrics/22.gif\", duration: 4530, startTime: 184160},\n// \t\t\t{imagePath: \"/textures/lyrics/23.gif\", duration: 4530, startTime: 189170},\n// \t\t\t{imagePath: \"/textures/lyrics/24.gif\", duration: 4530, startTime: 195110},\n\n// \t\t\t{imagePath: \"/textures/lyrics/25.gif\", duration: 4530, startTime: 201120},\n// \t\t\t{imagePath: \"/textures/lyrics/26.gif\", duration: 4530, startTime: 207090},\n// \t\t\t{imagePath: \"/textures/lyrics/27.gif\", duration: 4530, startTime: 213100},\n// \t\t\t{imagePath: \"/textures/lyrics/28.gif\", duration: 4530, startTime: 218090}\n// \t];\n// \tvar counter = images.length;\n// \timages.forEach(function(image){\n// \t\tconsole.log(image);\n// \t\tvar self = this;\n\t\t\n// \t\tvar loader = new Image();\n\t\t\n// \t\tloader.addEventListener('load', function(){\n// \t\t\tcounter--;\n// \t\t\tconsole.log(counter);\n// \t\t\timage.obj = loader;\n// \t\t\tif(counter === 0) imagesLoaded = true;\n// \t\t});\n\n// \t\tloader.src = image.imagePath;\n\n\t\t\n// \t}, this);\n// };\n\nApp.prototype.init = function(){\n\tvar self=this;\n\twindow.addEventListener('resize', function(){\n\t\tif(window.innerWidth < 840) self.camera.position.set( 10, 120, 0 );\n\t\tif(window.innerWidth < 530) self.camera.position.set( 20, 140, 0 );\n\t\tif(window.innerWidth >= 840) self.camera.position.set( 10, 65, 0 );\n\t\tself.camera.aspect = window.innerWidth / window.innerHeight;\n\t\tself.camera.updateProjectionMatrix();\n\t\tself.renderer.setSize( window.innerWidth, window.innerHeight );\n\t});\n\t// var logo = document.querySelector(\"#logo-close\");\n\t// var cover = document.querySelector('#cover');\n\n\t// logo.addEventListener('click', function(){\n\t// \tself.container.removeChild(self.renderer.domElement);\n\t// \tlogo.parentNode.removeChild(logo);\n\t// \tcover.parentNode.removeChild(cover);\n\t// \tself.stopRender();\n\t// })\n\tthis.render();\n};\n\nApp.prototype.render = function(){\n\tif(this.noRender) return;\n\n\tthis.water.material.uniforms.time.value += 1.0 / 400.0;\n\ttry{\n\t\tthis.water.render();\n\t} catch(e){\n\n\t}\n\tthis.renderer.render( this.scene, this.camera );\n\tvar self = this;\n\twindow.setTimeout(function(){window.requestAnimationFrame(self.render.bind(self));}, 60);\n};\n\nApp.prototype.stopRender = function(){\n\tthis.noRender = true;\n};\n\n\n\nmodule.exports = App;\n","function MirrorLoader(THREE){\n\t/**\n\t * @author Slayvin / http://slayvin.net\n\t */\n\n\tTHREE.ShaderLib['mirror'] = {\n\n\t\tuniforms: { \"mirrorColor\": { type: \"c\", value: new THREE.Color(0x7F7F7F) },\n\t\t\t\t\t\"mirrorSampler\": { type: \"t\", value: null },\n\t\t\t\t\t\"textureMatrix\" : { type: \"m4\", value: new THREE.Matrix4() }\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform mat4 textureMatrix;\",\n\n\t\t\t\"varying vec4 mirrorCoord;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t\"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\t\t\"vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\t\"mirrorCoord = textureMatrix * worldPosition;\",\n\n\t\t\t\t\"gl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 mirrorColor;\",\n\t\t\t\"uniform sampler2D mirrorSampler;\",\n\n\t\t\t\"varying vec4 mirrorCoord;\",\n\n\t\t\t\"float blendOverlay(float base, float blend) {\",\n\t\t\t\t\"return( base < 0.5 ? ( 2.0 * base * blend ) : (1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\",\n\t\t\t\"}\",\n\t\t\t\n\t\t\t\"void main() {\",\n\n\t\t\t\t\"vec4 color = texture2DProj(mirrorSampler, mirrorCoord);\",\n\t\t\t\t\"color = vec4(blendOverlay(mirrorColor.r, color.r), blendOverlay(mirrorColor.g, color.g), blendOverlay(mirrorColor.b, color.b), 1.0);\",\n\n\t\t\t\t\"gl_FragColor = color;\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t};\n\n\tTHREE.Mirror = function ( renderer, camera, options ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.name = 'mirror_' + this.id;\n\n\t\toptions = options || {};\n\n\t\tthis.matrixNeedsUpdate = true;\n\n\t\tvar width = options.textureWidth !== undefined ? options.textureWidth : 512;\n\t\tvar height = options.textureHeight !== undefined ? options.textureHeight : 512;\n\n\t\tthis.clipBias = options.clipBias !== undefined ? options.clipBias : 0.0;\n\n\t\tvar mirrorColor = options.color !== undefined ? new THREE.Color(options.color) : new THREE.Color(0x7F7F7F);\n\n\t\tthis.renderer = renderer;\n\t\tthis.mirrorPlane = new THREE.Plane();\n\t\tthis.normal = new THREE.Vector3( 0, 0, 1 );\n\t\tthis.mirrorWorldPosition = new THREE.Vector3();\n\t\tthis.cameraWorldPosition = new THREE.Vector3();\n\t\tthis.rotationMatrix = new THREE.Matrix4();\n\t\tthis.lookAtPosition = new THREE.Vector3(0, 0, -1);\n\t\tthis.clipPlane = new THREE.Vector4();\n\t\t\n\t\t// For debug only, show the normal and plane of the mirror\n\t\tvar debugMode = options.debugMode !== undefined ? options.debugMode : false;\n\n\t\tif ( debugMode ) {\n\n\t\t\tvar arrow = new THREE.ArrowHelper(new THREE.Vector3( 0, 0, 1 ), new THREE.Vector3( 0, 0, 0 ), 10, 0xffff80 );\n\t\t\tvar planeGeometry = new THREE.Geometry();\n\t\t\tplaneGeometry.vertices.push( new THREE.Vector3( -10, -10, 0 ) );\n\t\t\tplaneGeometry.vertices.push( new THREE.Vector3( 10, -10, 0 ) );\n\t\t\tplaneGeometry.vertices.push( new THREE.Vector3( 10, 10, 0 ) );\n\t\t\tplaneGeometry.vertices.push( new THREE.Vector3( -10, 10, 0 ) );\n\t\t\tplaneGeometry.vertices.push( planeGeometry.vertices[0] );\n\t\t\tvar plane = new THREE.Line( planeGeometry, new THREE.LineBasicMaterial( { color: 0xffff80 } ) );\n\n\t\t\tthis.add(arrow);\n\t\t\tthis.add(plane);\n\n\t\t}\n\n\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tthis.camera = new THREE.PerspectiveCamera();\n\t\t\tconsole.log( this.name + ': camera is not a Perspective Camera!' );\n\n\t\t}\n\n\t\tthis.textureMatrix = new THREE.Matrix4();\n\n\t\tthis.mirrorCamera = this.camera.clone();\n\n\t\tthis.texture = new THREE.WebGLRenderTarget( width, height );\n\t\tthis.tempTexture = new THREE.WebGLRenderTarget( width, height );\n\n\t\tvar mirrorShader = THREE.ShaderLib[ \"mirror\" ];\n\t\tvar mirrorUniforms = THREE.UniformsUtils.clone( mirrorShader.uniforms );\n\n\t\tthis.material = new THREE.ShaderMaterial( {\n\n\t\t\tfragmentShader: mirrorShader.fragmentShader,\n\t\t\tvertexShader: mirrorShader.vertexShader,\n\t\t\tuniforms: mirrorUniforms\n\n\t\t} );\n\n\t\tthis.material.uniforms.mirrorSampler.value = this.texture;\n\t\tthis.material.uniforms.mirrorColor.value = mirrorColor;\n\t\tthis.material.uniforms.textureMatrix.value = this.textureMatrix;\n\n\t\tif ( !THREE.Math.isPowerOfTwo(width) || !THREE.Math.isPowerOfTwo( height ) ) {\n\n\t\t\tthis.texture.generateMipmaps = false;\n\t\t\tthis.tempTexture.generateMipmaps = false;\n\n\t\t}\n\n\t\tthis.updateTextureMatrix();\n\t\tthis.render();\n\n\t};\n\n\tTHREE.Mirror.prototype = Object.create( THREE.Object3D.prototype );\n\n\tTHREE.Mirror.prototype.renderWithMirror = function ( otherMirror ) {\n\n\t\t// update the mirror matrix to mirror the current view\n\t\tthis.updateTextureMatrix();\n\t\tthis.matrixNeedsUpdate = false;\n\n\t\t// set the camera of the other mirror so the mirrored view is the reference view\n\t\tvar tempCamera = otherMirror.camera;\n\t\totherMirror.camera = this.mirrorCamera;\n\n\t\t// render the other mirror in temp texture\n\t\totherMirror.renderTemp();\n\t\totherMirror.material.uniforms.mirrorSampler.value = otherMirror.tempTexture;\n\n\t\t// render the current mirror\n\t\tthis.render();\n\t\tthis.matrixNeedsUpdate = true;\n\n\t\t// restore material and camera of other mirror\n\t\totherMirror.material.uniforms.mirrorSampler.value = otherMirror.texture;\n\t\totherMirror.camera = tempCamera;\n\n\t\t// restore texture matrix of other mirror\n\t\totherMirror.updateTextureMatrix();\n\t};\n\n\tTHREE.Mirror.prototype.updateTextureMatrix = function () {\n\n\t\tvar sign = THREE.Math.sign;\n\n\t\tthis.updateMatrixWorld();\n\t\tthis.camera.updateMatrixWorld();\n\n\t\tthis.mirrorWorldPosition.setFromMatrixPosition( this.matrixWorld );\n\t\tthis.cameraWorldPosition.setFromMatrixPosition( this.camera.matrixWorld );\n\n\t\tthis.rotationMatrix.extractRotation( this.matrixWorld );\n\n\t\tthis.normal.set( 0, 0, 1 );\n\t\tthis.normal.applyMatrix4( this.rotationMatrix );\n\n\t\tvar view = this.mirrorWorldPosition.clone().sub( this.cameraWorldPosition );\n\t\tview.reflect( this.normal ).negate();\n\t\tview.add( this.mirrorWorldPosition );\n\n\t\tthis.rotationMatrix.extractRotation( this.camera.matrixWorld );\n\n\t\tthis.lookAtPosition.set(0, 0, -1);\n\t\tthis.lookAtPosition.applyMatrix4( this.rotationMatrix );\n\t\tthis.lookAtPosition.add( this.cameraWorldPosition );\n\n\t\tvar target = this.mirrorWorldPosition.clone().sub( this.lookAtPosition );\n\t\ttarget.reflect( this.normal ).negate();\n\t\ttarget.add( this.mirrorWorldPosition );\n\n\t\tthis.up.set( 0, -1, 0 );\n\t\tthis.up.applyMatrix4( this.rotationMatrix );\n\t\tthis.up.reflect( this.normal ).negate();\n\n\t\tthis.mirrorCamera.position.copy( view );\n\t\tthis.mirrorCamera.up = this.up;\n\t\tthis.mirrorCamera.lookAt( target );\n\n\t\tthis.mirrorCamera.updateProjectionMatrix();\n\t\tthis.mirrorCamera.updateMatrixWorld();\n\t\tthis.mirrorCamera.matrixWorldInverse.getInverse( this.mirrorCamera.matrixWorld );\n\n\t\t// Update the texture matrix\n\t\tthis.textureMatrix.set( 0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.0, 0.0, 1.0 );\n\t\tthis.textureMatrix.multiply( this.mirrorCamera.projectionMatrix );\n\t\tthis.textureMatrix.multiply( this.mirrorCamera.matrixWorldInverse );\n\n\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\tthis.mirrorPlane.setFromNormalAndCoplanarPoint( this.normal, this.mirrorWorldPosition );\n\t\tthis.mirrorPlane.applyMatrix4( this.mirrorCamera.matrixWorldInverse );\n\n\t\tthis.clipPlane.set( this.mirrorPlane.normal.x, this.mirrorPlane.normal.y, this.mirrorPlane.normal.z, this.mirrorPlane.constant );\n\n\t\tvar q = new THREE.Vector4();\n\t\tvar projectionMatrix = this.mirrorCamera.projectionMatrix;\n\n\t\tq.x = ( sign(this.clipPlane.x) + projectionMatrix.elements[8] ) / projectionMatrix.elements[0];\n\t\tq.y = ( sign(this.clipPlane.y) + projectionMatrix.elements[9] ) / projectionMatrix.elements[5];\n\t\tq.z = - 1.0;\n\t\tq.w = ( 1.0 + projectionMatrix.elements[10] ) / projectionMatrix.elements[14];\n\n\t\t// Calculate the scaled plane vector\n\t\tvar c = new THREE.Vector4();\n\t\tc = this.clipPlane.multiplyScalar( 2.0 / this.clipPlane.dot(q) );\n\n\t\t// Replacing the third row of the projection matrix\n\t\tprojectionMatrix.elements[2] = c.x;\n\t\tprojectionMatrix.elements[6] = c.y;\n\t\tprojectionMatrix.elements[10] = c.z + 1.0 - this.clipBias;\n\t\tprojectionMatrix.elements[14] = c.w;\n\n\t};\n\n\tTHREE.Mirror.prototype.render = function () {\n\n\t\tif ( this.matrixNeedsUpdate ) this.updateTextureMatrix();\n\n\t\tthis.matrixNeedsUpdate = true;\n\n\t\t// Render the mirrored view of the current scene into the target texture\n\t\tvar scene = this;\n\n\t\twhile ( scene.parent !== undefined ) {\n\n\t\t\tscene = scene.parent;\n\n\t\t}\n\n\t\tif ( scene !== undefined && scene instanceof THREE.Scene) {\n\t\t\tthis.renderer.render( scene, this.mirrorCamera, this.texture, true );\n\n\t\t}\n\n\t};\n\n\tTHREE.Mirror.prototype.renderTemp = function () {\n\n\t\tif ( this.matrixNeedsUpdate ) this.updateTextureMatrix();\n\n\t\tthis.matrixNeedsUpdate = true;\n\n\t\t// Render the mirrored view of the current scene into the target texture\n\t\tvar scene = this;\n\n\t\twhile ( scene.parent !== undefined ) {\n\n\t\t\tscene = scene.parent;\n\n\t\t}\n\n\t\tif ( scene !== undefined && scene instanceof THREE.Scene) {\n\n\t\t\tthis.renderer.render( scene, this.mirrorCamera, this.tempTexture, true );\n\n\t\t}\n\n\t};\n\n};\n\nmodule.exports = MirrorLoader;","/**\n * \n *@author Mr&Mrs / http://webgl.no/index.html\n * Work based on :\n *@author jbouny / https://github.com/jbouny\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction WaterLoader(THREE){\n\n\tTHREE.ShaderLib['water'] = {\n\n\t\tuniforms: { \"normalSampler\":\t{ type: \"t\", value: null },\n\t\t\t\t\t\"mirrorSampler\":\t{ type: \"t\", value: null },\n\t\t\t\t\t\"alpha\":\t\t\t{ type: \"f\", value: 1.0 },\n\t\t\t\t\t\"time\":\t\t\t\t{ type: \"f\", value: 0.0 },\n\t\t\t\t\t\"distortionScale\":\t{ type: \"f\", value: 20.0 },\n\t\t\t\t\t\"textureMatrix\" :\t{ type: \"m4\", value: new THREE.Matrix4() },\n\t\t\t\t\t\"sunColor\":\t\t\t{ type: \"c\", value: new THREE.Color( 0xff7F7F ) },\n\t\t\t\t\t\"sunDirection\":\t\t{ type: \"v3\", value: new THREE.Vector3( 0.70707, 0.70707, 0 ) },\n\t\t\t\t\t\"eye\":\t\t\t\t{ type: \"v3\", value: new THREE.Vector3( 0, 0, 0 ) },\n\t\t\t\t\t\"waterColor\":\t\t{ type: \"c\", value: new THREE.Color( 0xff5555 ) }\n\t\t},\n\n\t\tvertexShader: [\n\t\t\t'uniform mat4 textureMatrix;',\n\t\t\t'uniform float time;',\n\t\t\t'varying vec4 mirrorCoord;',\n\t\t\t'varying vec3 worldPosition;',\n\t\t\t'uniform vec3 eye;',\n\t\t\t'varying vec3 height;',\n\t\t\t'void main()',\n\t\t\t'{',\n\t\t\t'\tmirrorCoord = modelMatrix * vec4( position, 1.0 );',\n\t\t\t'\tworldPosition = mirrorCoord.xyz;',\n\t\t\t'\tmirrorCoord = textureMatrix * mirrorCoord;',\n\t\t\t'   vec3 newposition = position;',\n\t\t\t'  vec3 dist = worldPosition-eye;',\n\n\t\t\t '\tfloat divident= 100.0,amplitude= 8.0, timex = -2.1*time, timez = -1.6*time;',\n\t\t\t\t\"    float wave = ( ( sin(( timez)+(worldPosition.z/divident))+ sin((timex)+(worldPosition.x/divident)) )+(sin(( timez)+(worldPosition.z/divident))+ sin((timex)+(worldPosition.x/divident)) ) *amplitude);\",\n\t\t\t ' if(dist.x > 4000.0 || dist.z > 4000.0 )newposition.z = newposition.z*0.8;',\n\t\t\t ' else if(dist.x < -4000.0 || dist.z < -4000.0)newposition.z =newposition.z*0.8;',\t\t\n\t\t\t ' else newposition.z = ((newposition.z )*sin(wave)) +wave;',\n\t\t\n\t\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( newposition, 1.0 );',\n\t\t\t'}'\n\t\t].join('\\n'),\n\n\t\tfragmentShader: [\n\t\t\t'precision highp float;',\n\t\t\t\n\t\t\t'uniform sampler2D mirrorSampler;',\n\t\t\t'uniform float alpha;',\n\t\t\t'uniform float time;',\n\t\t\t'uniform float distortionScale;',\n\t\t\t'uniform sampler2D normalSampler;',\n\t\t\t'uniform vec3 sunColor;',\n\t\t\t'uniform vec3 sunDirection;',\n\t\t\t'uniform vec3 eye;',\n\t\t\t'uniform vec3 waterColor;',\n\n\t\t\t'varying vec4 mirrorCoord;',\n\t\t\t'varying vec3 worldPosition;',\n\t\t\t\n\t\t\t'vec4 getNoise( vec2 uv )',\n\t\t\t'{',\n\n\t\t\t'\tvec2 uv0 = ( uv / 403.0 )+time*0.05- vec2(time /1112.0, time / 113.0);',\n\t\t\t'\tvec2 uv1 = uv / 207.0+vec2( time / 1112.0, time / 8.0 );',\n\t    \t'\tvec2 uv2 = uv / vec2( 4907.0, 4203.0 ) - vec2( time / 161.0, time / 92.0 );',\n\t\t\t'\tvec2 uv3 = uv / vec2( 3091.0, 3427.0 ) - vec2( time / 159.0, time / 80.0 );',\n\t\t\t\n\t\t\t'\tvec4 noise = ( texture2D( normalSampler, uv0 ) ) +',\n\t        '\t\t( texture2D( normalSampler, uv1 ) ) +',\n\t        '\t\t( texture2D( normalSampler, uv2 ) ) +',\n\t\t\t'\t\t( texture2D( normalSampler, uv3 ) );',\n\t\t\t'\treturn noise * 0.5 - 1.0;',\n\t\t\t'}',\n\t\t\t\n\t\t\t'void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )',\n\t\t\t'{',\n\t\t\t'\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );',\n\t\t\t'\tfloat direction = max( 0.8, dot( eyeDirection, reflection ) );',\n\t\t\t'\tspecularColor += pow( direction, shiny ) * sunColor * spec;',\n\t\t\t'\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;',\n\t\t\t'}',\n\t\t\t\n\t\t\t'void main()',\n\t\t\t'{',\n\t\t\t'\tvec4 noise = getNoise( worldPosition.xz );',\n\t\t\n\t\t'\tvec3  surfaceNormal = normalize( noise.xzy * vec3( 0.55, 0.2, 0.65 ) );',\n\t\t\t'\tvec3 diffuseLight = vec3(0.0);',\n\t\t\t'\tvec3 specularLight = vec3(0.0);',\n\n\t\t\t'\tvec3 worldToEye = eye-worldPosition;',\n\t\t\t'\tvec3 eyeDirection = normalize( worldToEye );',\n\t\t\t'\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );',\n\t\t\t\n\t\t\t'\tfloat distance = length(worldToEye);',\n\n\t\t\n\t\t\t'\tsurfaceNormal = normalize( noise.xzy * vec3( 0.4,0.08, 0.4 ) );',\n\n\t\t\t'\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 0.3 / distance ) * distortionScale;',\n\t\t\t'\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );',\n\n\t\t\t'\tsurfaceNormal = normalize( noise.xzy * vec3( 2.5, 0.8, 2.5 ) );',\n\n\t\t\t'\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );',\n\t\t\t'\tfloat rf0 = 0.3;',\n\t\t\t'\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 8.0 );',\n\t\t\t'\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;',\n\t\t\t 'float angle = distance;',\n\t\t\t 'vec3 albedo;',\n\t\t\t'\tif(distance < 200.0)albedo = mix( sunColor*0.7 * diffuseLight *waterColor* 0.95 + scatter*0.005, ( vec3( 0.1 ) + reflectionSample + reflectionSample * specularLight*max(sin(distance+time),0.3) ), reflectance );',\n\t\t\t'\tif(distance >= 200.0)albedo = mix( sunColor*0.8 * diffuseLight*waterColor * 0.9 + scatter*0.01, ( vec3( 0.1 ) + reflectionSample + reflectionSample * specularLight ), reflectance );',\n\t\t\n\t\t\t\t'float limit = 0.13;',\n\t\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.x < 0.5 ) albedo.x = albedo.x+reflectionSample.x*0.12;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.y < 0.5  ) albedo.y = albedo.y+reflectionSample.y*0.12;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.z < 0.5  ) albedo.z = albedo.z+reflectionSample.z*0.12;',\n\n\n\t\t\t\t\t\t'limit = 0.15;',\n\t\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.x < 0.45 ) albedo.x = albedo.x+reflectionSample.x*0.1;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.y < 0.45  ) albedo.y = albedo.y+reflectionSample.y*0.1;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.z < 0.45  ) albedo.z = albedo.z+reflectionSample.z*0.1;',\n\n\t\t\t\t\t\t\t\t'limit = 0.17;',\n\t\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.x < 0.4 ) albedo.x = albedo.x+reflectionSample.x*0.05;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.y < 0.4  ) albedo.y = albedo.y+reflectionSample.y*0.05;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.z < 0.4  ) albedo.z = albedo.z+reflectionSample.z*0.05;',\n\n\n\t\t\t\t\t\t\t\t'limit = 0.19;',\n\t\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.x < 0.35 ) albedo.x = albedo.x+reflectionSample.x*0.02;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.y < 0.35  ) albedo.y = albedo.y+reflectionSample.y*0.02;',\n\t\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit)&& albedo.z < 0.35  ) albedo.z = albedo.z+reflectionSample.z*0.02;',\n\n\n\t\t//\t'float limit = 0.1;',\n\t\t\t\n\t\t\t\n\t\t//'if(albedo.x < limit || albedo.y < limit || albedo.z < limit){ albedo.x += reflectionSample.x-0.05;albedo.y+=reflectionSample.y-0.05;albedo.z+=reflectionSample.z-0.05;} ',\n\t\t\t//' limit = 0.130;',\n\t\t//\t'albedo*=0.9;',\n\t\t//\t'if(albedo.x < limit || albedo.y < limit || albedo.z < limit){ albedo.x += reflectionSample.x-0.05;albedo.y+=reflectionSample.y-0.05;albedo.z+=reflectionSample.z-0.05;} ',\n\t\t\t\t\n\t\t\t//' limit = 0.130;',\n\t\t\t//\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit) && distance >= 1300.0 )discard;',\n\t\t\t\n\t\t\t//\t\t'if((albedo.x < limit || albedo.y < limit || albedo.z < limit) && distance >= 500.0 )discard;',\n\t\t\n\t\t/*'   if(distance >= 500.0)gl_FragColor = vec4( albedo, 0.70 );',\n\t\t\t'\telse if(distance < 500.0)gl_FragColor = vec4( albedo, 0.68 );',\n\t\t\t\t'\telse if(distance < 495.0)gl_FragColor = vec4( albedo, 0.63 );',\n\t\t\t\t\t'\telse if(distance < 485.0)gl_FragColor = vec4( albedo, 0.58 );',\n\t\t\t\t\t\t\t'else\tif(distance < 475.0)gl_FragColor = vec4( albedo, 0.55 );',\n\t\t\t\t\t\t \t\t'else if(distance < 460.0)gl_FragColor = vec4( albedo, 0.50 );',\n\t\t\t\t\t\t\t\t'\telse if(distance < 450.0)gl_FragColor = vec4( albedo, 0.45 );',\n\t\t\t\t\t\t\t\t\t'\telse if(distance < 440.0)gl_FragColor = vec4( albedo, 0.40 );',\n\t\t\t\t\t\t\t\t\t\t'\telse if(distance < 430.0)gl_FragColor = vec4( albedo, 0.35 );',\n\t\t\t\t\t\t\t\t\t\t\t'\telse if(distance < 420.0)gl_FragColor = vec4( albedo, 0.20 );',\n\t\t\t\t\t\t\t\t\t\t\t\t'\telse if(distance < 400.0)gl_FragColor = vec4( albedo, 0.10);',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'\telse if(distance < 350.0)gl_FragColor = vec4( albedo, 0.06);',\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'\telse if(distance < 300.0)gl_FragColor = vec4( albedo, 0.001);',*/\n\n\t\t\t\t\t'gl_FragColor = vec4( albedo, 1.0);',\n\t\t\t\n\t\t\t'}'\n\t\t].join('\\n')\n\n\t};\n\n\tTHREE.Water = function ( renderer, camera, scene, options ) {\n\n\t\tTHREE.Object3D.call( this );\n\t\tthis.name = 'water_' + this.id;\n\n\t\tfunction optionalParameter ( value, defaultValue ) {\n\t\t\treturn value !== undefined ? value : defaultValue;\n\t\t};\n\n\t\toptions = options || {};\n\t\t\n\t\tthis.matrixNeedsUpdate = true;\n\t\t\n\t\tvar width = optionalParameter( options.textureWidth, 512*4 );\n\t\tvar height = optionalParameter( options.textureHeight, 512*4 );\n\t\tthis.clipBias = optionalParameter( options.clipBias, 0.0 );\n\t\tthis.alpha = optionalParameter( options.alpha, 1.0 );\n\t\tthis.time = optionalParameter( options.time, 0.0 );\n\t\tthis.normalSampler = optionalParameter( options.waterNormals, null );\n\t\tthis.sunDirection = optionalParameter( options.sunDirection, new THREE.Vector3( 0.50707, 0.70707, -0.3 ) );\n\t\tthis.sunColor = new THREE.Color( optionalParameter( options.sunColor, 0xffffff ) );\n\t\tthis.waterColor = new THREE.Color( optionalParameter( options.waterColor, 0x7F7F7F ) );\n\t\tthis.eye = optionalParameter( options.eye, new THREE.Vector3( 0, 0, 0 ) );\n\t\tthis.distortionScale = optionalParameter( options.distortionScale, 20.0 );\n\t\t\n\t\tthis.renderer = renderer;\n\t\tthis.scene = scene;\n\t\tthis.mirrorPlane = new THREE.Plane();\n\t\tthis.normal = new THREE.Vector3( 0, 0, 1 );\n\t\tthis.mirrorWorldPosition = new THREE.Vector3();\n\t\tthis.cameraWorldPosition = new THREE.Vector3();\n\t\tthis.rotationMatrix = new THREE.Matrix4();\n\t\tthis.lookAtPosition = new THREE.Vector3( 0, 0, -1 );\n\t\tthis.clipPlane = new THREE.Vector4();\n\t\t\n\t\tif ( camera instanceof THREE.PerspectiveCamera )\n\t\t\tthis.camera = camera;\n\t\telse \n\t\t{\n\t\t\tthis.camera = new THREE.PerspectiveCamera();\n\t\t\tconsole.log(this.name + ': camera is not a Perspective Camera!')\n\t\t}\n\n\t\tthis.textureMatrix = new THREE.Matrix4();\n\n\t\tthis.mirrorCamera = this.camera.clone();\n\t\t\n\t\tthis.texture = new THREE.WebGLRenderTarget( width, height );\n\t\tthis.tempTexture = new THREE.WebGLRenderTarget( width, height );\n\t\t\n\t\tvar mirrorShader = THREE.ShaderLib[ \"water\" ];\n\t\tvar mirrorUniforms = THREE.UniformsUtils.clone( mirrorShader.uniforms );\n\n\t\tthis.material = new THREE.ShaderMaterial( { \n\t\t\tfragmentShader: mirrorShader.fragmentShader, \n\t\t\tvertexShader: mirrorShader.vertexShader, \n\t\t\tuniforms: mirrorUniforms,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.material.uniforms.mirrorSampler.value = this.texture;\n\t\tthis.material.uniforms.textureMatrix.value = this.textureMatrix;\n\t\tthis.material.uniforms.alpha.value = this.alpha;\n\t\tthis.material.uniforms.time.value = this.time;\n\t\tthis.material.uniforms.normalSampler.value = this.normalSampler;\n\t\tthis.material.uniforms.sunColor.value = this.sunColor;\n\t\tthis.material.uniforms.waterColor.value = this.waterColor;\n\t\tthis.material.uniforms.sunDirection.value = this.sunDirection;\n\t\tthis.material.uniforms.distortionScale.value = this.distortionScale;\n\t\t\n\t\tthis.material.uniforms.eye.value = this.eye;\n\t\t\n\t\tif ( !THREE.Math.isPowerOfTwo(width) || !THREE.Math.isPowerOfTwo(height) )\n\t\t{\n\t\t\tthis.texture.generateMipmaps = false;\n\t\t\tthis.tempTexture.generateMipmaps = false;\n\t\t}\n\n\t\tthis.updateTextureMatrix();\n\t\tthis.render();\n\t};\n\n\tTHREE.Water.prototype = Object.create( THREE.Mirror.prototype );\n\n\n\tTHREE.Water.prototype.updateTextureMatrix = function () {\n\n\t\tfunction sign(x) { return x ? x < 0 ? -1 : 1 : 0; }\n\n\t\tthis.updateMatrixWorld();\n\t\tthis.camera.updateMatrixWorld();\n\n\t\tthis.mirrorWorldPosition.setFromMatrixPosition( this.matrixWorld );\n\t\tthis.cameraWorldPosition.setFromMatrixPosition( this.camera.matrixWorld );\n\n\t\tthis.rotationMatrix.extractRotation( this.matrixWorld );\n\n\t\tthis.normal.set( 0, 0, 1 );\n\t\tthis.normal.applyMatrix4( this.rotationMatrix );\n\n\t\tvar view = this.mirrorWorldPosition.clone().sub( this.cameraWorldPosition );\n\t\tview.reflect( this.normal ).negate();\n\t\tview.add( this.mirrorWorldPosition );\n\n\t\tthis.rotationMatrix.extractRotation( this.camera.matrixWorld );\n\n\t\tthis.lookAtPosition.set(0, 0, -1);\n\t\tthis.lookAtPosition.applyMatrix4( this.rotationMatrix );\n\t\tthis.lookAtPosition.add( this.cameraWorldPosition );\n\n\t\tvar target = this.mirrorWorldPosition.clone().sub( this.lookAtPosition );\n\t\ttarget.reflect( this.normal ).negate();\n\t\ttarget.add( this.mirrorWorldPosition );\n\n\t\tthis.up.set(0, -1, 0);\n\t\tthis.up.applyMatrix4( this.rotationMatrix );\n\t\tthis.up.reflect( this.normal ).negate();\n\n\t\tthis.mirrorCamera.position.copy( view );\n\t\tthis.mirrorCamera.up = this.up;\n\t\tthis.mirrorCamera.lookAt( target );\n\t\tthis.mirrorCamera.aspect = this.camera.aspect;\n\n\t\tthis.mirrorCamera.updateProjectionMatrix();\n\t\tthis.mirrorCamera.updateMatrixWorld();\n\t\tthis.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld);\n\n\t\t// Update the texture matrix\n\t\tthis.textureMatrix.set( 0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.0, 0.0, 1.0 );\n\t\tthis.textureMatrix.multiply(this.mirrorCamera.projectionMatrix);\n\t\tthis.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse);\n\n\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\tthis.mirrorPlane.setFromNormalAndCoplanarPoint( this.normal, this.mirrorWorldPosition );\n\t\tthis.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse);\n\n\t\tthis.clipPlane.set(this.mirrorPlane.normal.x, this.mirrorPlane.normal.y, this.mirrorPlane.normal.z, this.mirrorPlane.constant );\n\n\t\tvar q = new THREE.Vector4();\n\t\tvar projectionMatrix = this.mirrorCamera.projectionMatrix;\n\n\t\tq.x = (sign(this.clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n\t\tq.y = (sign(this.clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n\t\tq.z = -1.0;\n\t\tq.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\n\n\t\t// Calculate the scaled plane vector\n\t\tvar c = new THREE.Vector4();\n\t\tc = this.clipPlane.multiplyScalar( 2.0 / this.clipPlane.dot(q) );\n\n\t\t// Replacing the third row of the projection matrix\n\t\tprojectionMatrix.elements[2] = c.x;\n\t\tprojectionMatrix.elements[6] = c.y;\n\t\tprojectionMatrix.elements[10] = c.z + 1.0 - this.clipBias;\n\t\tprojectionMatrix.elements[14] = c.w;\n\t\t\n\t\tvar worldCoordinates = new THREE.Vector3();\n\t\tworldCoordinates.setFromMatrixPosition( this.camera.matrixWorld );\n\t\tthis.eye = worldCoordinates;\n\t\tthis.material.uniforms.eye.value = this.eye;\n\t};\n};\n\nmodule.exports = WaterLoader;"],"sourceRoot":"/source/"}